"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[27],{7027:(k,l,r)=>{r.r(l),r.d(l,{AdminDashboardComponent:()=>M});var d=r(6814),e=r(4946),c=r(95),u=r(5565),m=r(9615),_=r(3076),g=r(6538);function b(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelEdit())}),e._UZ(1,"i",53),e._uU(2," Cancel Edit "),e.qZA()}}function p(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showDeleteConfirmation())}),e._UZ(1,"i",55),e._uU(2),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.isDeleting()),e.xp6(2),e.hij(" ",t.isDeleting()?"Deleting...":"Delete Current"," ")}}function h(i,s){if(1&i&&(e.TgZ(0,"div",56),e._UZ(1,"i",57),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.successMessage()," ")}}function f(i,s){1&i&&e._UZ(0,"span",58)}function A(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editCurrentAnnouncement())}),e._UZ(1,"i",60),e._uU(2," Edit Current "),e.qZA()}}function v(i,s){if(1&i&&(e.TgZ(0,"div")(1,"h6",61),e._uU(2),e.qZA(),e.TgZ(3,"p",62),e._uU(4),e.qZA(),e.TgZ(5,"div",63)(6,"span"),e._UZ(7,"i",64),e._uU(8),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA()()()),2&i){const t=s.ngIf,n=e.oxw();e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.content),e.xp6(4),e.hij(" ",t.likes," "),e.xp6(2),e.hij("Updated: ",n.formatDate(t.updatedAt),"")}}function Z(i,s){1&i&&(e.TgZ(0,"div",65),e._UZ(1,"i",66),e.TgZ(2,"p",24),e._uU(3,"No announcement available"),e.qZA(),e.TgZ(4,"small"),e._uU(5,"Create your first announcement using the form"),e.qZA()())}function T(i,s){1&i&&(e.TgZ(0,"div",67)(1,"small"),e._uU(2,"No viewers yet"),e.qZA()())}function x(i,s){1&i&&(e.TgZ(0,"small",76),e._UZ(1,"i",77),e.qZA())}function C(i,s){if(1&i&&(e.TgZ(0,"div",70),e._UZ(1,"i",71),e.TgZ(2,"div",72)(3,"small",73),e._uU(4),e.qZA(),e.TgZ(5,"small",74),e._uU(6),e.qZA()(),e.YNc(7,x,2,0,"small",75),e.qZA()),2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(n.formatDate(t.viewedAt)),e.xp6(1),e.Q6J("ngIf",t.hasLiked)}}function D(i,s){if(1&i&&(e.TgZ(0,"div",78)(1,"small",74),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("+",t.viewedUsers().length-5," more viewers")}}function U(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,C,8,3,"div",68),e.YNc(2,D,3,1,"div",69),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.viewedUsers().slice(-5)),e.xp6(1),e.Q6J("ngIf",t.viewedUsers().length>5)}}function w(i,s){1&i&&e._UZ(0,"span",58)}function y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",79),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e.TgZ(1,"div",80),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(2,"div",81)(3,"div",82)(4,"h5",83),e._UZ(5,"i",84),e._uU(6," Confirm Delete "),e.qZA(),e.TgZ(7,"button",85),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e.qZA()(),e.TgZ(8,"div",86)(9,"p")(10,"strong"),e._uU(11,"Are you sure you want to delete this announcement?"),e.qZA()(),e.TgZ(12,"p",15),e._uU(13,"This action cannot be undone. All likes and engagement data will be lost."),e.qZA()(),e.TgZ(14,"div",87)(15,"button",88),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e._uU(16," Cancel "),e.qZA(),e.TgZ(17,"button",89),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmDelete())}),e.YNc(18,w,1,0,"span",40),e._uU(19),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(17),e.Q6J("disabled",t.isDeleting()),e.xp6(1),e.Q6J("ngIf",t.isDeleting()),e.xp6(1),e.hij(" ",t.isDeleting()?"Deleting...":"Delete Announcement"," ")}}let M=(()=>{class i{constructor(t,n,o,a){this.adminService=t,this.announcementService=n,this.userService=o,this.router=a,this.title=(0,e.tdS)(""),this.content=(0,e.tdS)(""),this.isSubmitting=(0,e.tdS)(!1),this.isDeleting=(0,e.tdS)(!1),this.successMessage=(0,e.tdS)(""),this.currentAnnouncement=(0,e.tdS)(null),this.showDeleteConfirm=(0,e.tdS)(!1),this.editingAnnouncementId=(0,e.tdS)(null),this.viewedUsers=this.userService.viewedUsers}ngOnInit(){this.adminService.isAuthenticated()?this.loadCurrentAnnouncement():this.router.navigate(["/admin"])}loadCurrentAnnouncement(){const t=this.announcementService.getLatestAnnouncement();this.currentAnnouncement.set(t),this.editingAnnouncementId()||(this.title.set(""),this.content.set(""))}onSubmit(){if(this.title().trim()&&this.content().trim()){this.isSubmitting.set(!0),this.successMessage.set("");try{const t=this.editingAnnouncementId();t?this.announcementService.updateAnnouncement(t,this.title().trim(),this.content().trim())&&(this.successMessage.set("Announcement updated successfully!"),this.cancelEdit()):(this.announcementService.createNewAnnouncement(this.title().trim(),this.content().trim()),this.successMessage.set("New announcement created successfully!"),this.title.set(""),this.content.set("")),this.currentAnnouncement.set(this.announcementService.getLatestAnnouncement()),setTimeout(()=>{this.successMessage.set("")},3e3)}catch(t){console.error("Error with announcement:",t)}finally{this.isSubmitting.set(!1)}}}showDeleteConfirmation(){this.showDeleteConfirm.set(!0)}hideDeleteConfirmation(){this.showDeleteConfirm.set(!1)}confirmDelete(){const t=this.currentAnnouncement();if(t){this.isDeleting.set(!0),this.showDeleteConfirm.set(!1);try{this.announcementService.deleteAnnouncement(t.id)&&(this.currentAnnouncement.set(null),this.title.set(""),this.content.set(""),this.successMessage.set("Announcement deleted successfully!"),setTimeout(()=>{this.successMessage.set("")},3e3))}catch(n){console.error("Error deleting announcement:",n)}finally{this.isDeleting.set(!1)}}}logout(){this.adminService.logout(),this.router.navigate(["/admin"])}updateTitle(t){this.title.set(t)}updateContent(t){this.content.set(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}getTotalLikes(){const t=this.currentAnnouncement();return t?t.likes:0}getTotalViewers(){return this.viewedUsers().length}hasAnnouncement(){return null!==this.currentAnnouncement()}getTotalAnnouncements(){return this.announcementService.getAllAnnouncements().length}isEditMode(){return null!==this.editingAnnouncementId()}editCurrentAnnouncement(){const t=this.currentAnnouncement();t&&(this.editingAnnouncementId.set(t.id),this.title.set(t.title),this.content.set(t.content))}cancelEdit(){this.editingAnnouncementId.set(null),this.title.set(""),this.content.set("")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.l),e.Y36(m.X),e.Y36(_.K),e.Y36(g.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-dashboard"]],standalone:!0,features:[e.jDz],decls:82,vars:19,consts:[[1,"container-fluid","min-vh-100","bg-light"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-danger"],[1,"container"],["href","#",1,"navbar-brand"],[1,"bi","bi-shield-check-fill","me-2"],[1,"navbar-nav","ms-auto"],[1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"container","py-4"],[1,"row","mb-4"],[1,"col-md-4"],[1,"card","text-center","border-primary"],[1,"card-body"],[1,"bi","bi-people-fill","display-4","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],[1,"card","text-center","border-danger"],[1,"bi","bi-heart-fill","display-4","text-danger"],[1,"card","text-center","border-success"],[1,"bi","bi-megaphone-fill","display-4","text-success"],[1,"row"],[1,"col-lg-8"],[1,"card","shadow-sm"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-pencil-square","me-2"],[1,"btn-group"],["class","btn btn-outline-secondary btn-sm","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-danger btn-sm","type","button",3,"disabled","click",4,"ngIf"],["class","alert alert-success alert-dismissible",4,"ngIf"],[3,"ngSubmit"],["announcementForm","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Enter announcement title","required","",1,"form-control",3,"value","input"],[1,"mb-4"],["for","content",1,"form-label"],["id","content","rows","6","placeholder","Enter announcement content...","required","",1,"form-control",3,"value","input"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["type","button","class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"col-lg-4"],[1,"card-header","bg-white"],[1,"bi","bi-eye-fill","me-2"],[4,"ngIf","ngIfElse"],["noAnnouncement",""],[1,"card","shadow-sm","mt-3"],[1,"bi","bi-clock-history","me-2"],["class","text-center text-muted py-2",4,"ngIf"],[4,"ngIf"],["class","modal fade show d-block","style","background-color: rgba(0,0,0,0.5);",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-x-circle"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"disabled","click"],[1,"bi","bi-trash3"],[1,"alert","alert-success","alert-dismissible"],[1,"bi","bi-check-circle-fill","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"text-primary"],[1,"small","text-muted","mb-2"],[1,"d-flex","justify-content-between","text-muted","small"],[1,"bi","bi-heart-fill","text-danger"],[1,"text-center","text-muted","py-3"],[1,"bi","bi-megaphone","display-4","d-block","mb-2"],[1,"text-center","text-muted","py-2"],["class","d-flex align-items-center mb-2",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],[1,"bi","bi-person-circle","text-primary","me-2"],[1,"flex-grow-1"],[1,"d-block"],[1,"text-muted"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"bi","bi-heart-fill"],[1,"text-center"],[1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.5)",3,"click"],[1,"modal-dialog","modal-dialog-centered",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","text-danger"],[1,"bi","bi-exclamation-triangle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e._uU(5," Admin Dashboard "),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return n.logout()}),e._UZ(8,"i",7),e._uU(9," Logout "),e.qZA()()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),e._UZ(15,"i",13),e.TgZ(16,"h3",14),e._uU(17),e.qZA(),e.TgZ(18,"p",15),e._uU(19,"Total Viewers"),e.qZA()()()(),e.TgZ(20,"div",10)(21,"div",16)(22,"div",12),e._UZ(23,"i",17),e.TgZ(24,"h3",14),e._uU(25),e.qZA(),e.TgZ(26,"p",15),e._uU(27,"Total Likes"),e.qZA()()()(),e.TgZ(28,"div",10)(29,"div",18)(30,"div",12),e._UZ(31,"i",19),e.TgZ(32,"h3",14),e._uU(33),e.qZA(),e.TgZ(34,"p",15),e._uU(35,"Total Announcements"),e.qZA()()()()(),e.TgZ(36,"div",20)(37,"div",21)(38,"div",22)(39,"div",23)(40,"h5",24),e._UZ(41,"i",25),e._uU(42),e.qZA(),e.TgZ(43,"div",26),e.YNc(44,b,3,0,"button",27),e.YNc(45,p,3,2,"button",28),e.qZA()(),e.TgZ(46,"div",12),e.YNc(47,h,3,1,"div",29),e.TgZ(48,"form",30,31),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(50,"div",32)(51,"label",33),e._uU(52,"Announcement Title"),e.qZA(),e.TgZ(53,"input",34),e.NdJ("input",function(a){return n.updateTitle(a.target.value)}),e.qZA()(),e.TgZ(54,"div",35)(55,"label",36),e._uU(56,"Announcement Content"),e.qZA(),e.TgZ(57,"textarea",37),e.NdJ("input",function(a){return n.updateContent(a.target.value)}),e.qZA()(),e.TgZ(58,"div",38)(59,"button",39),e.YNc(60,f,1,0,"span",40),e._uU(61),e.qZA(),e.YNc(62,A,3,0,"button",41),e.qZA()()()()(),e.TgZ(63,"div",42)(64,"div",22)(65,"div",43)(66,"h6",24),e._UZ(67,"i",44),e._uU(68),e.qZA()(),e.TgZ(69,"div",12),e.YNc(70,v,11,4,"div",45),e.YNc(71,Z,6,0,"ng-template",null,46,e.W1O),e.qZA()(),e.TgZ(73,"div",47)(74,"div",43)(75,"h6",24),e._UZ(76,"i",48),e._uU(77," Recent Viewers "),e.qZA()(),e.TgZ(78,"div",12),e.YNc(79,T,3,0,"div",49),e.YNc(80,U,3,2,"div",50),e.qZA()()()()()(),e.YNc(81,y,20,3,"div",51)),2&t){const o=e.MAs(72);e.xp6(17),e.Oqu(n.getTotalViewers()),e.xp6(8),e.Oqu(n.getTotalLikes()),e.xp6(8),e.Oqu(n.getTotalAnnouncements()),e.xp6(9),e.hij(" ",n.isEditMode()?"Update":"Create New"," Announcement "),e.xp6(2),e.Q6J("ngIf",n.isEditMode()),e.xp6(1),e.Q6J("ngIf",n.hasAnnouncement()),e.xp6(2),e.Q6J("ngIf",n.successMessage()),e.xp6(6),e.Q6J("value",n.title()),e.xp6(4),e.Q6J("value",n.content()),e.xp6(2),e.Q6J("disabled",n.isSubmitting()||!n.title().trim()||!n.content().trim()),e.xp6(1),e.Q6J("ngIf",n.isSubmitting()),e.xp6(1),e.hij(" ",n.isSubmitting()?"Saving...":n.isEditMode()?"Update Announcement":"Create New Announcement"," "),e.xp6(1),e.Q6J("ngIf",n.hasAnnouncement()&&!n.isEditMode()),e.xp6(6),e.hij(" ",n.hasAnnouncement()?"Current Announcement":"No Announcement"," "),e.xp6(2),e.Q6J("ngIf",n.currentAnnouncement())("ngIfElse",o),e.xp6(9),e.Q6J("ngIf",0===n.viewedUsers().length),e.xp6(1),e.Q6J("ngIf",n.viewedUsers().length>0),e.xp6(1),e.Q6J("ngIf",n.showDeleteConfirm())}},dependencies:[d.ez,d.sg,d.O5,c.u5,c._Y,c.JL,c.F],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:12px;transition:all .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a!important}.navbar-brand[_ngcontent-%COMP%]{font-weight:600}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef}.form-control[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354526}.btn-danger[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.bg-light[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)!important}.alert[_ngcontent-%COMP%]{border-radius:8px;border:none}.border-primary[_ngcontent-%COMP%]{border-color:#0d6efd!important;border-width:2px!important}.border-danger[_ngcontent-%COMP%]{border-color:#dc3545!important;border-width:2px!important}.border-success[_ngcontent-%COMP%]{border-color:#198754!important;border-width:2px!important}.modal.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .15s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.btn-outline-danger[_ngcontent-%COMP%]{transition:all .2s ease}.btn-outline-danger[_ngcontent-%COMP%]:hover{transform:scale(1.05)}"]}),i})()}}]);