"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[347],{4347:(f,g,u)=>{u.r(g),u.d(g,{LandingComponent:()=>c});var d=u(6814),e=u(4946),a=u(95),m=u(6538),r=u(3076);function i(s,h){if(1&s&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors().name," ")}}function o(s,h){if(1&s&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors().email," ")}}function l(s,h){1&s&&e._UZ(0,"span",22)}let c=(()=>{class s{constructor(t,n){this.userService=t,this.router=n,this.name=(0,e.tdS)(""),this.email=(0,e.tdS)(""),this.errors=(0,e.tdS)({}),this.isSubmitting=(0,e.tdS)(!1)}onSubmit(){if(this.validateForm()){this.isSubmitting.set(!0);try{this.userService.createUser(this.name(),this.email()),this.router.navigate(["/announcement"])}catch(t){console.error("Error creating user:",t)}finally{this.isSubmitting.set(!1)}}}validateForm(){const t={};return this.name().trim()?this.name().trim().length<2&&(t.name="Name must be at least 2 characters"):t.name="Name is required",this.email().trim()?this.isValidEmail(this.email().trim())||(t.email="Please enter a valid email address"):t.email="Email is required",this.errors.set(t),0===Object.keys(t).length}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}updateName(t){this.name.set(t),this.errors().name&&this.errors.update(n=>({...n,name:void 0}))}updateEmail(t){this.email.set(t),this.errors().email&&this.errors.update(n=>({...n,email:void 0}))}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(r.K),e.Y36(m.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-landing"]],standalone:!0,features:[e.jDz],decls:31,vars:11,consts:[[1,"container-fluid","vh-100","d-flex","align-items-center","justify-content-center","bg-light"],[1,"card","shadow-lg",2,"max-width","500px","width","100%"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"mb-3"],["src","assets/UPIDlogo.svg","alt","UPID Logo",2,"height","80px","width","auto"],[1,"h2","text-primary","mb-3"],[1,"h4","text-secondary","mb-3"],[1,"text-muted"],[3,"ngSubmit"],["userForm","ngForm"],["for","name",1,"form-label"],["type","text","id","name","placeholder","Enter your full name","required","",1,"form-control",3,"value","input"],["class","invalid-feedback",4,"ngIf"],[1,"mb-4"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Enter your email address","required","",1,"form-control",3,"value","input"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/admin",1,"text-decoration-none"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"h1",6),e._uU(7," \u0909\u0924\u094d\u0924\u0930 \u092a\u094d\u0930\u0926\u0947\u0936 \u0938\u093f\u0902\u091a\u093e\u0908 \u0935\u093f\u092d\u093e\u0917 "),e.qZA(),e.TgZ(8,"h2",7),e._uU(9," UPID Suchana Portal "),e.qZA(),e.TgZ(10,"p",8),e._uU(11,"Enter your details to access the latest announcements"),e.qZA()(),e.TgZ(12,"form",9,10),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(14,"div",4)(15,"label",11),e._uU(16,"Full Name"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("input",function(p){return n.updateName(p.target.value)}),e.qZA(),e.YNc(18,i,2,1,"div",13),e.qZA(),e.TgZ(19,"div",14)(20,"label",15),e._uU(21,"Email Address"),e.qZA(),e.TgZ(22,"input",16),e.NdJ("input",function(p){return n.updateEmail(p.target.value)}),e.qZA(),e.YNc(23,o,2,1,"div",13),e.qZA(),e.TgZ(24,"button",17),e.YNc(25,l,1,0,"span",18),e._uU(26),e.qZA()(),e.TgZ(27,"div",19)(28,"small",8)(29,"a",20),e._uU(30,"Admin Login"),e.qZA()()()()()()),2&t&&(e.xp6(17),e.ekj("is-invalid",n.errors().name),e.Q6J("value",n.name()),e.xp6(1),e.Q6J("ngIf",n.errors().name),e.xp6(4),e.ekj("is-invalid",n.errors().email),e.Q6J("value",n.email()),e.xp6(1),e.Q6J("ngIf",n.errors().email),e.xp6(1),e.Q6J("disabled",n.isSubmitting()),e.xp6(1),e.Q6J("ngIf",n.isSubmitting()),e.xp6(1),e.hij(" ",n.isSubmitting()?"Processing...":"Access Announcements"," "))},dependencies:[d.ez,d.O5,a.u5,a._Y,a.JL,a.F,m.Bz,m.rH],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:15px}.btn-primary[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:12px}.form-control[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .25rem #0d6efd26}.bg-light[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)!important}h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}"]}),s})()},3076:(f,g,u)=>{u.d(g,{K:()=>e});var d=u(4946);let e=(()=>{class a{constructor(){this.STORAGE_KEY="announcement-portal-users",this.CURRENT_USER_KEY="announcement-portal-current-user",this.users=(0,d.tdS)(this.loadUsers()),this.currentUser=(0,d.tdS)(this.loadCurrentUser()),this.users$=this.users.asReadonly(),this.currentUser$=this.currentUser.asReadonly(),this.viewedUsers=(0,d.Flj)(()=>this.users().filter(r=>r.hasViewed))}loadUsers(){const r=localStorage.getItem(this.STORAGE_KEY);return r?JSON.parse(r):[]}loadCurrentUser(){const r=localStorage.getItem(this.CURRENT_USER_KEY);return r?JSON.parse(r):null}saveUsers(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.users()))}saveCurrentUser(){localStorage.setItem(this.CURRENT_USER_KEY,JSON.stringify(this.currentUser()))}createUser(r,i){const o=this.users().find(c=>c.email===i);if(o)return this.currentUser.set(o),this.saveCurrentUser(),o;const l={id:Date.now().toString(),name:r.trim(),email:i.trim().toLowerCase(),hasLiked:!1,hasViewed:!1,viewedAt:new Date};return this.users.update(c=>[...c,l]),this.currentUser.set(l),this.saveUsers(),this.saveCurrentUser(),l}markAsViewed(r){this.users.update(i=>i.map(o=>o.id===r?{...o,hasViewed:!0,viewedAt:new Date}:o)),this.saveUsers()}toggleLike(r){let i=!1;return this.users.update(o=>o.map(l=>l.id===r?(i=!l.hasLiked,{...l,hasLiked:i}):l)),this.saveUsers(),i}getCurrentUser(){return this.currentUser()}logout(){this.currentUser.set(null),localStorage.removeItem(this.CURRENT_USER_KEY)}getUserById(r){return this.users().find(i=>i.id===r)}clearAllData(){this.users.set([]),this.currentUser.set(null),localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.CURRENT_USER_KEY)}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);