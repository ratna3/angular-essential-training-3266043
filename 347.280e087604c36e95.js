"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[347],{4347:(f,h,o)=>{o.r(h),o.d(h,{LandingComponent:()=>g});var u=o(6814),l=o(95),d=o(6538),e=o(4946),t=o(3076);function s(i,c){if(1&i&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.hij(" ",n.errors.name," ")}}function a(i,c){if(1&i&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.hij(" ",n.errors.email," ")}}function m(i,c){1&i&&e._UZ(0,"span",21)}let g=(()=>{class i{constructor(n,r){this.userService=n,this.router=r,this.nameValue="",this.emailValue="",this.errors={},this.isSubmitting=!1}onSubmit(){if(this.validateForm()){this.isSubmitting=!0;try{this.userService.createUser(this.nameValue,this.emailValue),this.router.navigate(["/announcement"])}catch(n){console.error("Error creating user:",n)}finally{this.isSubmitting=!1}}}validateForm(){const n={};return this.nameValue.trim()?this.nameValue.trim().length<2&&(n.name="Name must be at least 2 characters"):n.name="Name is required",this.emailValue.trim()?this.isValidEmail(this.emailValue.trim())||(n.email="Please enter a valid email address"):n.email="Email is required",this.errors=n,0===Object.keys(n).length}isValidEmail(n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}updateName(){this.errors.name&&(this.errors={...this.errors,name:void 0})}updateEmail(){this.errors.email&&(this.errors={...this.errors,email:void 0})}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(t.K),e.Y36(d.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-landing"]],standalone:!0,features:[e.jDz],decls:28,vars:11,consts:[[1,"container-fluid","vh-100","d-flex","align-items-center","justify-content-center","bg-light"],[1,"card","shadow-lg",2,"max-width","500px","width","100%"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"h2","text-primary","mb-3"],[1,"bi","bi-megaphone-fill"],[1,"text-muted"],[3,"ngSubmit"],["userForm","ngForm"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","name","name","placeholder","Enter your full name","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","invalid-feedback",4,"ngIf"],[1,"mb-4"],["for","email",1,"form-label"],["type","email","id","email","name","email","placeholder","Enter your email address","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/admin",1,"text-decoration-none"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e._UZ(5,"i",5),e._uU(6," Announcement Portal "),e.qZA(),e.TgZ(7,"p",6),e._uU(8,"Enter your details to access the latest announcements"),e.qZA()(),e.TgZ(9,"form",7,8),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(11,"div",9)(12,"label",10),e._uU(13,"Full Name"),e.qZA(),e.TgZ(14,"input",11),e.NdJ("ngModelChange",function(p){return r.nameValue=p})("ngModelChange",function(){return r.updateName()}),e.qZA(),e.YNc(15,s,2,1,"div",12),e.qZA(),e.TgZ(16,"div",13)(17,"label",14),e._uU(18,"Email Address"),e.qZA(),e.TgZ(19,"input",15),e.NdJ("ngModelChange",function(p){return r.emailValue=p})("ngModelChange",function(){return r.updateEmail()}),e.qZA(),e.YNc(20,a,2,1,"div",12),e.qZA(),e.TgZ(21,"button",16),e.YNc(22,m,1,0,"span",17),e._uU(23),e.qZA()(),e.TgZ(24,"div",18)(25,"small",6)(26,"a",19),e._uU(27,"Admin Login"),e.qZA()()()()()()),2&n&&(e.xp6(14),e.ekj("is-invalid",r.errors.name),e.Q6J("ngModel",r.nameValue),e.xp6(1),e.Q6J("ngIf",r.errors.name),e.xp6(4),e.ekj("is-invalid",r.errors.email),e.Q6J("ngModel",r.emailValue),e.xp6(1),e.Q6J("ngIf",r.errors.email),e.xp6(1),e.Q6J("disabled",r.isSubmitting),e.xp6(1),e.Q6J("ngIf",r.isSubmitting),e.xp6(1),e.hij(" ",r.isSubmitting?"Processing...":"Access Announcements"," "))},dependencies:[u.ez,u.O5,l.u5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F,d.Bz,d.rH],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:15px}.btn-primary[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:12px}.form-control[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .25rem #0d6efd26}.bg-light[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)!important}h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}"]}),i})()},3076:(f,h,o)=>{o.d(h,{K:()=>l});var u=o(4946);let l=(()=>{class d{constructor(){this.STORAGE_KEY="announcement-portal-users",this.CURRENT_USER_KEY="announcement-portal-current-user",this.users=(0,u.tdS)(this.loadUsers()),this.currentUser=(0,u.tdS)(this.loadCurrentUser()),this.users$=this.users.asReadonly(),this.currentUser$=this.currentUser.asReadonly(),this.viewedUsers=(0,u.Flj)(()=>this.users().filter(t=>t.hasViewed))}loadUsers(){const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):[]}loadCurrentUser(){const t=localStorage.getItem(this.CURRENT_USER_KEY);return t?JSON.parse(t):null}saveUsers(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.users()))}saveCurrentUser(){localStorage.setItem(this.CURRENT_USER_KEY,JSON.stringify(this.currentUser()))}createUser(t,s){const a=this.users().find(g=>g.email===s);if(a)return this.currentUser.set(a),this.saveCurrentUser(),a;const m={id:Date.now().toString(),name:t.trim(),email:s.trim().toLowerCase(),hasLiked:!1,hasViewed:!1,viewedAt:new Date};return this.users.update(g=>[...g,m]),this.currentUser.set(m),this.saveUsers(),this.saveCurrentUser(),m}markAsViewed(t){this.users.update(s=>s.map(a=>a.id===t?{...a,hasViewed:!0,viewedAt:new Date}:a)),this.saveUsers()}toggleLike(t){let s=!1;return this.users.update(a=>a.map(m=>m.id===t?(s=!m.hasLiked,{...m,hasLiked:s}):m)),this.saveUsers(),s}getCurrentUser(){return this.currentUser()}logout(){this.currentUser.set(null),localStorage.removeItem(this.CURRENT_USER_KEY)}getUserById(t){return this.users().find(s=>s.id===t)}clearAllData(){this.users.set([]),this.currentUser.set(null),localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.CURRENT_USER_KEY)}}return d.\u0275fac=function(t){return new(t||d)},d.\u0275prov=u.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);