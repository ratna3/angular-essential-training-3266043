"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[270],{5123:(u,m,a)=>{a.d(m,{P:()=>l});const l=[{id:1,name:"MINISTER",displayName:"Hon'ble Minister",seniorityLevel:1,department:"Irrigation Department",description:"Highest authority in the department"},{id:2,name:"PRINCIPAL_SECRETARY",displayName:"Principal Secretary",seniorityLevel:2,department:"Irrigation Department",description:"Administrative head of the department"},{id:3,name:"CHIEF_ENGINEER_I",displayName:"Chief Engineer-I",seniorityLevel:3,department:"Technical Division",description:"Senior technical authority"},{id:4,name:"CHIEF_ENGINEER_II",displayName:"Chief Engineer-II",seniorityLevel:4,department:"Technical Division",description:"Technical division head"},{id:5,name:"SENIOR_STAFF_OFFICER",displayName:"Senior Staff Officer",seniorityLevel:5,department:"Administrative Division",description:"Senior administrative officer"},{id:6,name:"SUPERINTENDING_ENGINEER",displayName:"Superintending Engineer",seniorityLevel:6,department:"Technical Division",description:"Regional technical head"},{id:7,name:"EXECUTIVE_ENGINEER",displayName:"Executive Engineer",seniorityLevel:7,department:"Technical Division",description:"Field technical officer"},{id:8,name:"ASSISTANT_ENGINEER",displayName:"Assistant Engineer",seniorityLevel:8,department:"Technical Division",description:"Junior technical officer"},{id:9,name:"JUNIOR_ENGINEER",displayName:"Junior Engineer",seniorityLevel:9,department:"Technical Division",description:"Entry-level technical position"},{id:10,name:"CLERICAL_STAFF",displayName:"Clerical Staff",seniorityLevel:10,department:"Administrative Division",description:"Administrative support staff"}]},5270:(u,m,a)=>{a.r(m),a.d(m,{AdminLoginComponent:()=>r});var l=a(6814),e=a(4946),p=a(95),o=a(5565),g=a(6538);function n(i,s){if(1&i&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&i){const c=e.oxw();e.xp6(1),e.hij(" ",c.error()," ")}}function t(i,s){1&i&&e._UZ(0,"span",24)}let r=(()=>{class i{constructor(c,d){this.adminService=c,this.router=d,this.username=(0,e.tdS)(""),this.password=(0,e.tdS)(""),this.error=(0,e.tdS)(""),this.isSubmitting=(0,e.tdS)(!1)}onSubmit(){this.username().trim()&&this.password().trim()?(this.isSubmitting.set(!0),this.error.set(""),setTimeout(()=>{this.adminService.login(this.username().trim(),this.password())?this.router.navigate(["/admin/dashboard"]):this.error.set("Invalid username or password"),this.isSubmitting.set(!1)},500)):this.error.set("Please enter both username and password")}updateUsername(c){this.username.set(c),this.error()&&this.error.set("")}updatePassword(c){this.password.set(c),this.error()&&this.error.set("")}goBack(){this.router.navigate(["/"])}}return i.\u0275fac=function(c){return new(c||i)(e.Y36(o.l),e.Y36(g.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-login"]],standalone:!0,features:[e.jDz],decls:37,vars:10,consts:[[1,"container-fluid","vh-100","d-flex","align-items-center","justify-content-center","bg-dark"],[1,"card","shadow-lg",2,"max-width","400px","width","100%"],[1,"card-body","p-4"],[1,"text-center","mb-4"],[1,"mb-3"],["src","assets/UPIDlogo.svg","alt","UPID Logo",2,"height","60px","width","auto"],[1,"h3","text-danger","mb-3"],[1,"bi","bi-shield-lock-fill"],[1,"text-muted"],[3,"ngSubmit"],["adminForm","ngForm"],["for","username",1,"form-label"],["type","text","id","username","placeholder","Enter admin username","required","","autocomplete","username",1,"form-control",3,"value","input"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Enter admin password","required","","autocomplete","current-password",1,"form-control",3,"value","input"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-danger","w-100","py-2","mb-3",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center"],[1,"btn","btn-link","text-muted",3,"click"],[1,"bi","bi-arrow-left","me-1"],[1,"mt-4","p-3","bg-light","rounded"],[1,"text-muted","d-block","text-center"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(c,d){1&c&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"h1",6),e._UZ(7,"i",7),e._uU(8," UPID Admin Login "),e.qZA(),e.TgZ(9,"p",8),e._uU(10,"Secure access to admin dashboard"),e.qZA()(),e.TgZ(11,"form",9,10),e.NdJ("ngSubmit",function(){return d.onSubmit()}),e.TgZ(13,"div",4)(14,"label",11),e._uU(15,"Username"),e.qZA(),e.TgZ(16,"input",12),e.NdJ("input",function(h){return d.updateUsername(h.target.value)}),e.qZA()(),e.TgZ(17,"div",4)(18,"label",13),e._uU(19,"Password"),e.qZA(),e.TgZ(20,"input",14),e.NdJ("input",function(h){return d.updatePassword(h.target.value)}),e.qZA(),e.YNc(21,n,2,1,"div",15),e.qZA(),e.TgZ(22,"button",16),e.YNc(23,t,1,0,"span",17),e._uU(24),e.qZA()(),e.TgZ(25,"div",18)(26,"button",19),e.NdJ("click",function(){return d.goBack()}),e._UZ(27,"i",20),e._uU(28," Back to Landing Page "),e.qZA()(),e.TgZ(29,"div",21)(30,"small",22)(31,"strong"),e._uU(32,"Demo Credentials:"),e.qZA(),e._UZ(33,"br"),e._uU(34," Username: adminIndia"),e._UZ(35,"br"),e._uU(36," Password: Indi@446 "),e.qZA()()()()()),2&c&&(e.xp6(16),e.ekj("is-invalid",d.error()),e.Q6J("value",d.username()),e.xp6(4),e.ekj("is-invalid",d.error()),e.Q6J("value",d.password()),e.xp6(1),e.Q6J("ngIf",d.error()),e.xp6(1),e.Q6J("disabled",d.isSubmitting()),e.xp6(1),e.Q6J("ngIf",d.isSubmitting()),e.xp6(1),e.hij(" ",d.isSubmitting()?"Authenticating...":"Login"," "))},dependencies:[l.ez,l.O5,p.u5,p._Y,p.JL,p.F],styles:['.container-fluid[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,64,175,.95) 0%,rgba(14,165,233,.9) 25%,rgba(16,185,129,.85) 50%,rgba(34,197,94,.9) 75%,rgba(59,130,246,.95) 100%);position:relative;min-height:100vh;overflow:hidden}.container-fluid[_ngcontent-%COMP%]:before{content:"";position:fixed;top:0;left:0;width:120%;height:120%;background-image:radial-gradient(circle at 25% 75%,rgba(255,255,255,.1) 0%,transparent 40%),radial-gradient(circle at 75% 25%,rgba(255,255,255,.08) 0%,transparent 40%),radial-gradient(circle at 50% 50%,rgba(255,255,255,.06) 0%,transparent 30%),linear-gradient(45deg,rgba(255,255,255,.02) 1px,transparent 1px),linear-gradient(-45deg,rgba(255,255,255,.02) 1px,transparent 1px);background-size:800px 800px,600px 600px,400px 400px,40px 40px,40px 40px;background-position:0 0,200px 200px,100px 100px,0 0,20px 20px;animation:_ngcontent-%COMP%_irrigationWaves 25s ease-in-out infinite;pointer-events:none;z-index:0}@keyframes _ngcontent-%COMP%_irrigationWaves{0%,to{transform:translate(0) translateY(0) rotate(0);background-position:0 0,200px 200px,100px 100px,0 0,20px 20px}25%{transform:translate(20px) translateY(-10px) rotate(1deg);background-position:50px 50px,250px 150px,150px 50px,10px 10px,30px 10px}50%{transform:translate(0) translateY(-20px) rotate(0);background-position:100px 100px,100px 250px,200px 100px,20px 20px,0px 20px}75%{transform:translate(-20px) translateY(-10px) rotate(-1deg);background-position:50px 150px,150px 100px,50px 150px,10px 30px,20px 0px}}.container-fluid[_ngcontent-%COMP%]:after{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background-image:radial-gradient(circle 2px,rgba(255,255,255,.4) 50%,transparent 50%),radial-gradient(circle 3px,rgba(255,255,255,.3) 50%,transparent 50%),radial-gradient(circle 1px,rgba(255,255,255,.5) 50%,transparent 50%);background-size:200px 200px,300px 300px,150px 150px;background-position:0 0,100px 100px,50px 50px;animation:_ngcontent-%COMP%_floatingDroplets 20s linear infinite;pointer-events:none;z-index:1}@keyframes _ngcontent-%COMP%_floatingDroplets{0%{background-position:0 100vh,100px calc(100vh + 100px),50px calc(100vh + 50px)}to{background-position:0 -200px,100px -300px,50px -150px}}.card[_ngcontent-%COMP%]{border:none;border-radius:25px;background:rgba(255,255,255,.95);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);box-shadow:0 25px 50px #0003,0 15px 35px #1e40af1a,inset 0 1px #fff9;position:relative;z-index:5;overflow:hidden;animation:_ngcontent-%COMP%_cardSlideIn 1s ease-out}@keyframes _ngcontent-%COMP%_cardSlideIn{0%{opacity:0;transform:translateY(50px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#1e40af 0%,#0ea5e9 25%,#16a34a 50%,#0ea5e9 75%,#1e40af 100%);background-size:200% 100%;animation:_ngcontent-%COMP%_topBorderFlow 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_topBorderFlow{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 35px 60px #00000040,0 20px 40px #1e40af26,inset 0 1px #fffc;transition:all .4s cubic-bezier(.175,.885,.32,1.275)}h1[_ngcontent-%COMP%]{color:#1e40af;font-weight:800;text-shadow:0 2px 4px rgba(30,64,175,.2);margin-bottom:.5rem;font-size:2.5rem}h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:15px;color:#0ea5e9;filter:drop-shadow(0 2px 4px rgba(14,165,233,.3));animation:_ngcontent-%COMP%_iconPulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_iconPulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.text-muted[_ngcontent-%COMP%]{color:#6b7280!important;font-weight:500;font-size:1.1rem;margin-bottom:2rem}.form-control[_ngcontent-%COMP%]{border-radius:15px;border:2px solid rgba(59,130,246,.2);padding:1rem 1.25rem;font-size:1.1rem;background:rgba(255,255,255,.9);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all .3s ease;position:relative}.form-control[_ngcontent-%COMP%]:focus{border-color:#1e40af;box-shadow:0 0 0 .25rem #1e40af26,0 4px 12px #1e40af1a;background:white;transform:translateY(-2px)}.form-control[_ngcontent-%COMP%]:hover{border-color:#0ea5e9;background:rgba(255,255,255,.95)}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#374151;margin-bottom:.75rem;font-size:1rem}.btn-danger[_ngcontent-%COMP%]{border-radius:15px;font-weight:700;padding:1rem 2rem;font-size:1.1rem;background:linear-gradient(135deg,#1e40af 0%,#0ea5e9 100%);border:none;color:#fff;transition:all .3s cubic-bezier(.175,.885,.32,1.275);box-shadow:0 4px 15px #1e40af4d,0 2px 8px #0000001a;position:relative;overflow:hidden}.btn-danger[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.2) 50%,transparent 100%);transition:left .5s ease}.btn-danger[_ngcontent-%COMP%]:hover:before{left:100%}.btn-danger[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1e3a8a 0%,#0284c7 100%);transform:translateY(-3px);box-shadow:0 8px 25px #1e40af66,0 4px 12px #00000026;color:#fff}.btn-danger[_ngcontent-%COMP%]:active{transform:translateY(-1px);box-shadow:0 4px 15px #1e40af4d,0 2px 8px #0000001a}.btn-link[_ngcontent-%COMP%]{text-decoration:none;color:#ffffffe6;font-weight:600;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:rgba(255,255,255,.1);padding:.75rem 1.5rem;border-radius:12px;border:1px solid rgba(255,255,255,.2)}.btn-link[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:none;background:rgba(255,255,255,.2);border-color:#fff6;transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.btn-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;transition:transform .3s ease}.btn-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(-3px)}.btn-danger[_ngcontent-%COMP%]:disabled{background:linear-gradient(135deg,#9ca3af 0%,#d1d5db 100%);cursor:not-allowed;transform:none;box-shadow:0 2px 8px #0000001a}.alert[_ngcontent-%COMP%]{border-radius:15px;border:none;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);animation:_ngcontent-%COMP%_alertSlideIn .5s ease-out;position:relative;overflow:hidden}@keyframes _ngcontent-%COMP%_alertSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.alert[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px}.alert-danger[_ngcontent-%COMP%]{background:rgba(220,38,38,.1);color:#b91c1c;border:1px solid rgba(220,38,38,.2)}.alert-danger[_ngcontent-%COMP%]:before{background:#dc2626}.alert-success[_ngcontent-%COMP%]{background:rgba(22,163,74,.1);color:#15803d;border:1px solid rgba(22,163,74,.2)}.alert-success[_ngcontent-%COMP%]:before{background:#16a34a}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%]:before{background-size:400px 400px,300px 300px,200px 200px,25px 25px,25px 25px}.card[_ngcontent-%COMP%]{border-radius:20px;margin:1rem}h1[_ngcontent-%COMP%]{font-size:2rem}.form-control[_ngcontent-%COMP%]{padding:.875rem 1rem;font-size:1rem}.btn-danger[_ngcontent-%COMP%]{padding:.875rem 1.5rem;font-size:1rem}}.btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid #fbbf24;outline-offset:2px}.form-control[_ngcontent-%COMP%]:focus-visible{outline:2px solid #fbbf24;outline-offset:2px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1);border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(255,255,255,.3);border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.5)}']}),i})()},5565:(u,m,a)=>{a.d(m,{l:()=>p});var l=a(4946),e=a(7879);let p=(()=>{class o{constructor(n){this.hierarchicalAdminService=n,this.ADMIN_SESSION_KEY="announcement-portal-admin-session",this.legacyAdminCredentials={username:"admin",password:"admin123"},this.isLoggedIn=(0,l.tdS)(this.loadAdminSession()),this.currentAdminSignal=(0,l.tdS)(null),this.isLoggedIn$=this.isLoggedIn.asReadonly(),this.currentAdmin$=this.currentAdminSignal.asReadonly(),this.loadCurrentAdmin()}loadAdminSession(){return null!==this.hierarchicalAdminService.getCurrentAdmin()}loadCurrentAdmin(){const n=this.hierarchicalAdminService.getCurrentAdmin();n&&(this.currentAdminSignal.set(n),this.isLoggedIn.set(!0))}login(n,t){const r=this.hierarchicalAdminService.login(n,t);if(r)return this.currentAdminSignal.set(r),this.isLoggedIn.set(!0),!0;if((n===this.legacyAdminCredentials.username||"admin@announcement.com"===n)&&t===this.legacyAdminCredentials.password){const s=this.hierarchicalAdminService.getAdminById("admin-legacy");if(s)return this.currentAdminSignal.set(s),this.isLoggedIn.set(!0),!0}return!1}logout(){this.hierarchicalAdminService.logout(),this.isLoggedIn.set(!1),this.currentAdminSignal.set(null)}isAuthenticated(){return this.isLoggedIn()}getCurrentAdmin(){return this.currentAdminSignal()}canEditAnnouncement(n){const t=this.getCurrentAdmin();return!!t&&this.hierarchicalAdminService.canEditAnnouncement(t,n)}canDeleteAnnouncement(n){const t=this.getCurrentAdmin();return!!t&&this.hierarchicalAdminService.canDeleteAnnouncement(t,n)}canViewAnnouncement(n){const t=this.getCurrentAdmin();return!!t&&this.hierarchicalAdminService.canViewAnnouncement(t,n)}}return o.\u0275fac=function(n){return new(n||o)(l.LFG(e.X))},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},7879:(u,m,a)=>{a.d(m,{X:()=>p});var l=a(4946),e=a(5123);let p=(()=>{class o{constructor(){this.STORAGE_KEY="hierarchical_admins",this.CURRENT_ADMIN_KEY="current_hierarchical_admin",this.adminUsersSignal=(0,l.tdS)([]),this.currentAdminSignal=(0,l.tdS)(null),this.initializeDefaultAdmins(),this.loadCurrentAdmin()}initializeDefaultAdmins(){const n=this.getStoredAdmins();if(0===n.length){const t=[{id:"admin-001",username:"minister",email:"minister@irrigation.up.gov.in",password:"minister123",role:e.P[0],fullName:"Hon. Irrigation Minister",employeeId:"MIN-001",department:"Irrigation Department",isActive:!0,createdAt:new Date,lastLogin:new Date},{id:"admin-002",username:"principal_secretary",email:"ps@irrigation.up.gov.in",password:"ps123",role:e.P[1],fullName:"Principal Secretary",employeeId:"PS-001",department:"Irrigation Department",isActive:!0,createdAt:new Date},{id:"admin-003",username:"ce1",email:"ce1@irrigation.up.gov.in",password:"ce1123",role:e.P[2],fullName:"Chief Engineer-I",employeeId:"CE1-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-004",username:"ce2",email:"ce2@irrigation.up.gov.in",password:"ce2123",role:e.P[3],fullName:"Chief Engineer-II",employeeId:"CE2-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-005",username:"sso",email:"sso@irrigation.up.gov.in",password:"sso123",role:e.P[4],fullName:"Senior Staff Officer",employeeId:"SSO-001",department:"Administrative Division",isActive:!0,createdAt:new Date},{id:"admin-006",username:"se",email:"se@irrigation.up.gov.in",password:"se123",role:e.P[5],fullName:"Superintending Engineer",employeeId:"SE-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-007",username:"ee",email:"ee@irrigation.up.gov.in",password:"ee123",role:e.P[6],fullName:"Executive Engineer",employeeId:"EE-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-legacy",username:"admin",email:"admin@announcement.com",password:"admin123",role:e.P[2],fullName:"System Administrator",employeeId:"ADMIN-001",department:"IT Division",isActive:!0,createdAt:new Date}];this.saveAdmins(t),this.adminUsersSignal.set(t)}else this.adminUsersSignal.set(n)}login(n,t){const i=this.adminUsersSignal().find(s=>(s.email===n||s.username===n)&&s.password===t&&s.isActive);return i?(i.lastLogin=new Date,this.currentAdminSignal.set(i),localStorage.setItem(this.CURRENT_ADMIN_KEY,JSON.stringify(i)),this.updateAdmin(i),i):null}logout(){this.currentAdminSignal.set(null),localStorage.removeItem(this.CURRENT_ADMIN_KEY)}getCurrentAdmin(){return this.currentAdminSignal()}getSubordinateAdmins(n){return this.adminUsersSignal().filter(r=>r.role.seniorityLevel>n.role.seniorityLevel&&r.isActive)}canViewAnnouncement(n,t){return n.role.seniorityLevel<=t.role.seniorityLevel}canEditAnnouncement(n,t){return n.id===t.id||n.role.seniorityLevel<t.role.seniorityLevel}canDeleteAnnouncement(n,t){return n.id===t.id||n.role.seniorityLevel<t.role.seniorityLevel}getAdminsByDepartment(){const n=this.adminUsersSignal(),t={};return n.forEach(r=>{t[r.department]||(t[r.department]=[]),t[r.department].push(r)}),Object.keys(t).forEach(r=>{t[r].sort((i,s)=>i.role.seniorityLevel-s.role.seniorityLevel)}),t}getHierarchyTree(){return this.getAdminsByDepartment()}getAllRoles(){return e.P}getRoleById(n){return e.P.find(t=>t.id===n)}getAdminById(n){return this.adminUsersSignal().find(t=>t.id===n)}loadCurrentAdmin(){const n=localStorage.getItem(this.CURRENT_ADMIN_KEY);if(n)try{const t=JSON.parse(n);this.currentAdminSignal.set(t)}catch(t){console.error("Error loading current admin:",t),localStorage.removeItem(this.CURRENT_ADMIN_KEY)}}getStoredAdmins(){const n=localStorage.getItem(this.STORAGE_KEY);if(n)try{return JSON.parse(n)}catch(t){return console.error("Error parsing stored admins:",t),[]}return[]}saveAdmins(n){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n)),this.adminUsersSignal.set(n)}updateAdmin(n){const t=this.adminUsersSignal(),r=t.findIndex(i=>i.id===n.id);-1!==r&&(t[r]=n,this.saveAdmins(t))}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);