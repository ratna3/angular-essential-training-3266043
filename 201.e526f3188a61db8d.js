"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[201],{2201:(be,g,s)=>{s.r(g),s.d(g,{AdminDashboardComponent:()=>ue});var u=s(5861),d=s(6814),e=s(4946),l=s(95),m=s(7879);function p(i,r){1&i&&e._UZ(0,"i",48)}function b(i,r){1&i&&(e.TgZ(0,"span",49),e._UZ(1,"i",50),e.qZA())}function _(i,r){1&i&&(e.TgZ(0,"span",51),e._UZ(1,"i",52),e.qZA())}function f(i,r){1&i&&(e.TgZ(0,"span",53),e._UZ(1,"i",54),e.qZA())}function h(i,r){if(1&i&&(e.TgZ(0,"span",55),e._UZ(1,"i",56),e._uU(2),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",n.getRelativeTime(t.lastLogin)," ")}}function x(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",57)(1,"button",58),e.NdJ("click",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.oxw(3).onSelectOfficer(a),e.KtG(o.stopPropagation())}),e._UZ(2,"i",59),e._uU(3," View Announcements "),e.qZA()()}}function v(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onSelectOfficer(a))}),e.TgZ(1,"div",26)(2,"div",8)(3,"div",9),e._UZ(4,"i",35),e.qZA(),e.TgZ(5,"div")(6,"h6",36),e._uU(7),e.YNc(8,p,1,0,"i",37),e.qZA(),e.TgZ(9,"p",12),e._uU(10),e.qZA(),e.TgZ(11,"p",38),e._uU(12),e.qZA()()(),e.TgZ(13,"div",39)(14,"div",40)(15,"span",41),e._uU(16),e.qZA()(),e.TgZ(17,"div",42),e.YNc(18,b,2,0,"span",43),e.YNc(19,_,2,0,"span",44),e.YNc(20,f,2,0,"span",45),e.YNc(21,h,3,1,"span",46),e.qZA()()(),e.YNc(22,x,4,0,"div",47),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw(3);e.ekj("subordinate",n.isSubordinate(t))("direct-subordinate",n.isDirectSubordinate(t))("current-user",t.id===n.currentUser.id)("disabled",!n.isSubordinate(t)&&t.id!==n.currentUser.id),e.xp6(4),e.Tol(n.getRoleIcon(t.role.name)+" "+n.getRolePriorityColor(t.role.seniorityLevel)),e.xp6(2),e.Tol(n.getRolePriorityColor(t.role.seniorityLevel)),e.xp6(1),e.hij(" ",t.fullName," "),e.xp6(1),e.Q6J("ngIf",t.id===n.currentUser.id),e.xp6(2),e.Oqu(t.role.displayName),e.xp6(2),e.Oqu(t.employeeId),e.xp6(3),e.ekj("bg-danger",t.role.seniorityLevel<=2)("bg-warning",t.role.seniorityLevel>2&&t.role.seniorityLevel<=4)("bg-info",t.role.seniorityLevel>4&&t.role.seniorityLevel<=6)("bg-secondary",t.role.seniorityLevel>6),e.xp6(1),e.hij(" Level ",t.role.seniorityLevel," "),e.xp6(2),e.Q6J("ngIf",n.isDirectSubordinate(t)),e.xp6(1),e.Q6J("ngIf",n.isSubordinate(t)&&!n.isDirectSubordinate(t)),e.xp6(1),e.Q6J("ngIf",t.role.seniorityLevel<n.currentUser.role.seniorityLevel),e.xp6(1),e.Q6J("ngIf",t.lastLogin),e.xp6(1),e.Q6J("ngIf",n.isSubordinate(t))}}function A(i,r){if(1&i&&(e.TgZ(0,"div",32),e.YNc(1,v,23,30,"div",33),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.value)("ngForTrackBy",n.trackByAdminId)}}function Z(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.toggleDepartment(a.key))}),e.TgZ(2,"div",26)(3,"div",8),e._UZ(4,"i",27),e.TgZ(5,"span",28),e._uU(6),e.qZA(),e.TgZ(7,"span",29),e._uU(8),e.qZA()(),e._UZ(9,"i",30),e.qZA()(),e.YNc(10,A,2,2,"div",31),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.ekj("collapsed",!n.isDepartmentExpanded(t.key)),e.xp6(3),e.Tol(n.getDepartmentIcon(t.key)),e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value.length),e.xp6(1),e.ekj("bi-chevron-down",!n.isDepartmentExpanded(t.key))("bi-chevron-up",n.isDepartmentExpanded(t.key)),e.xp6(1),e.Q6J("ngIf",n.isDepartmentExpanded(t.key))}}let C=(()=>{class i{constructor(t){this.hierarchicalAdminService=t,this.selectOfficer=new e.vpe,this.expandedDepartments=(0,e.tdS)(new Set),this.hierarchyTree=(0,e.tdS)({}),this.subordinateAdmins=(0,e.tdS)([]),this.loadHierarchy()}ngOnInit(){this.loadHierarchy(),this.loadSubordinates()}ngOnChanges(){this.currentUser&&this.loadSubordinates()}loadHierarchy(){const t=this.hierarchicalAdminService.getHierarchyTree();this.hierarchyTree.set(t)}loadSubordinates(){if(this.currentUser){const t=this.hierarchicalAdminService.getSubordinateAdmins(this.currentUser);this.subordinateAdmins.set(t)}}toggleDepartment(t){const n=this.expandedDepartments(),o=new Set(n);o.has(t)?o.delete(t):o.add(t),this.expandedDepartments.set(o)}isDepartmentExpanded(t){return this.expandedDepartments().has(t)}onSelectOfficer(t){this.selectOfficer.emit(t)}isSubordinate(t){return this.currentUser.role.seniorityLevel<t.role.seniorityLevel}isDirectSubordinate(t){return this.currentUser.role.seniorityLevel+1===t.role.seniorityLevel}getRolePriorityColor(t){return t<=2?"text-danger":t<=4?"text-warning":t<=6?"text-info":"text-secondary"}getRoleIcon(t){return{MINISTER:"bi-crown",PRINCIPAL_SECRETARY:"bi-award",CHIEF_ENGINEER_I:"bi-gear-fill",CHIEF_ENGINEER_II:"bi-gear",SENIOR_STAFF_OFFICER:"bi-person-badge",SUPERINTENDING_ENGINEER:"bi-tools",EXECUTIVE_ENGINEER:"bi-hammer",ASSISTANT_ENGINEER:"bi-wrench",JUNIOR_ENGINEER:"bi-nut",CLERICAL_STAFF:"bi-clipboard"}[t]||"bi-person"}getDepartmentIcon(t){return{"Irrigation Department":"bi-droplet","Technical Division":"bi-gear-wide-connected","Administrative Division":"bi-building","IT Division":"bi-laptop"}[t]||"bi-building"}trackByAdminId(t,n){return n.id}getRelativeTime(t){const o=(new Date).getTime()-new Date(t).getTime(),a=Math.floor(o/36e5),c=Math.floor(a/24);return c>0?`${c}d ago`:a>0?`${a}h ago`:"Just now"}getDepartmentCount(){return Object.keys(this.hierarchyTree()).length}getActiveOfficersCount(){const t=this.hierarchyTree();let n=0;return Object.values(t).forEach(o=>{n+=o.filter(a=>a.isActive).length}),n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-role-hierarchy"]],inputs:{currentUser:"currentUser"},outputs:{selectOfficer:"selectOfficer"},standalone:!0,features:[e.TTD,e.jDz],decls:43,vars:11,consts:[[1,"role-hierarchy-container"],[1,"card","border-0","shadow-sm"],[1,"card-header","bg-gradient","bg-primary","text-white"],[1,"mb-0"],[1,"bi","bi-diagram-3","me-2"],[1,"opacity-75"],[1,"card-body","p-0"],[1,"current-user-info","p-3","bg-light","border-bottom"],[1,"d-flex","align-items-center"],[1,"me-3"],[1,"display-6"],[1,"mb-1","fw-bold"],[1,"text-muted","mb-1","small"],[1,"badge","bg-success","small"],[1,"hierarchy-tree"],["class","department-section",4,"ngFor","ngForOf"],[1,"quick-stats","p-3","bg-light","border-top"],[1,"row","text-center"],[1,"col-4"],[1,"stat-item"],[1,"text-primary","mb-0"],[1,"text-muted"],[1,"text-success","mb-0"],[1,"text-info","mb-0"],[1,"department-section"],[1,"department-header","p-3","border-bottom","bg-light",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],[1,"me-2"],[1,"fw-semibold"],[1,"badge","bg-secondary","ms-2","small"],[1,"bi"],["class","officers-list",4,"ngIf"],[1,"officers-list"],["class","officer-item p-3 border-bottom",3,"subordinate","direct-subordinate","current-user","disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"officer-item","p-3","border-bottom",3,"click"],[1,"fs-4"],[1,"mb-1"],["class","bi bi-person-check text-success ms-1","title","You",4,"ngIf"],[1,"text-muted","mb-0","small"],[1,"text-end"],[1,"seniority-badge"],[1,"badge"],[1,"status-indicators","mt-1"],["class","badge bg-success small me-1","title","Direct Subordinate",4,"ngIf"],["class","badge bg-info small me-1","title","Subordinate",4,"ngIf"],["class","badge bg-warning small me-1","title","Superior",4,"ngIf"],["class","badge bg-light text-dark small","title","Last Login",4,"ngIf"],["class","mt-2 text-end",4,"ngIf"],["title","You",1,"bi","bi-person-check","text-success","ms-1"],["title","Direct Subordinate",1,"badge","bg-success","small","me-1"],[1,"bi","bi-arrow-down-circle"],["title","Subordinate",1,"badge","bg-info","small","me-1"],[1,"bi","bi-arrow-down"],["title","Superior",1,"badge","bg-warning","small","me-1"],[1,"bi","bi-arrow-up"],["title","Last Login",1,"badge","bg-light","text-dark","small"],[1,"bi","bi-clock"],[1,"mt-2","text-end"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-eye","me-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._UZ(4,"i",4),e._uU(5," Department Hierarchy "),e.qZA(),e.TgZ(6,"small",5),e._uU(7,"View announcements from subordinate officers"),e.qZA()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e._UZ(12,"i",10),e.qZA(),e.TgZ(13,"div")(14,"h6",11),e._uU(15),e.qZA(),e.TgZ(16,"p",12),e._uU(17),e.qZA(),e.TgZ(18,"span",13),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",14),e.YNc(21,Z,11,11,"div",15),e.ALo(22,"keyvalue"),e.qZA(),e.TgZ(23,"div",16)(24,"div",17)(25,"div",18)(26,"div",19)(27,"h6",20),e._uU(28),e.qZA(),e.TgZ(29,"small",21),e._uU(30,"Subordinates"),e.qZA()()(),e.TgZ(31,"div",18)(32,"div",19)(33,"h6",22),e._uU(34),e.qZA(),e.TgZ(35,"small",21),e._uU(36,"Departments"),e.qZA()()(),e.TgZ(37,"div",18)(38,"div",19)(39,"h6",23),e._uU(40),e.qZA(),e.TgZ(41,"small",21),e._uU(42,"Active Officers"),e.qZA()()()()()()()()),2&t&&(e.xp6(12),e.Tol(n.getRoleIcon(n.currentUser.role.name)+" "+n.getRolePriorityColor(n.currentUser.role.seniorityLevel)),e.xp6(3),e.Oqu(n.currentUser.fullName),e.xp6(2),e.Oqu(n.currentUser.role.displayName),e.xp6(2),e.Oqu(n.currentUser.department),e.xp6(2),e.Q6J("ngForOf",e.lcZ(22,9,n.hierarchyTree())),e.xp6(7),e.Oqu(n.subordinateAdmins().length),e.xp6(6),e.Oqu(n.getDepartmentCount()),e.xp6(6),e.Oqu(n.getActiveOfficersCount()))},dependencies:[d.ez,d.sg,d.O5,d.Nd],styles:[".role-hierarchy-container[_ngcontent-%COMP%]{max-height:600px}.department-header[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;-webkit-user-select:none;user-select:none}.department-header[_ngcontent-%COMP%]:hover{background-color:var(--bs-gray-200)!important}.department-header.collapsed[_ngcontent-%COMP%]{opacity:.8}.officers-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.officer-item[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;position:relative}.officer-item[_ngcontent-%COMP%]:hover{background-color:var(--bs-gray-100);transform:translate(5px)}.officer-item.current-user[_ngcontent-%COMP%]{background-color:rgba(var(--bs-success-rgb),.1);border-left:4px solid var(--bs-success)}.officer-item.direct-subordinate[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.05);border-left:3px solid var(--bs-primary)}.officer-item.subordinate[_ngcontent-%COMP%]:not(.direct-subordinate){background-color:rgba(var(--bs-info-rgb),.03);border-left:2px solid var(--bs-info)}.officer-item.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;background-color:rgba(var(--bs-gray-rgb),.05)}.officer-item.disabled[_ngcontent-%COMP%]:hover{transform:none;background-color:rgba(var(--bs-gray-rgb),.05)}.current-user-info[_ngcontent-%COMP%]{border-left:4px solid var(--bs-success)}.seniority-badge[_ngcontent-%COMP%]{font-size:.75rem}.status-indicators[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.65rem}.hierarchy-tree[_ngcontent-%COMP%]{max-height:450px;overflow-y:auto}.stat-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.quick-stats[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)}.officers-list[_ngcontent-%COMP%]::-webkit-scrollbar, .hierarchy-tree[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.officers-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .hierarchy-tree[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:6px}.officers-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .hierarchy-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:6px}.officers-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .hierarchy-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media (max-width: 768px){.role-hierarchy-container[_ngcontent-%COMP%]{max-height:500px}.officer-item[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important}.officer-item[_ngcontent-%COMP%]   .text-end[_ngcontent-%COMP%]{text-align:left!important;margin-top:.5rem}.status-indicators[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem}}.officers-list[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:400px}}.text-priority-1[_ngcontent-%COMP%]{color:#dc3545!important}.text-priority-2[_ngcontent-%COMP%]{color:#fd7e14!important}.text-priority-3[_ngcontent-%COMP%]{color:#ffc107!important}.text-priority-4[_ngcontent-%COMP%]{color:#20c997!important}"]}),i})();var T=s(5565),w=s(9615),y=s(3076),O=s(6644),k=s(6538);function U(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelEdit())}),e._UZ(1,"i",64),e._uU(2," Cancel Edit "),e.qZA()}}function M(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",65),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showDeleteConfirmation())}),e._UZ(1,"i",66),e._uU(2),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.isDeleting()),e.xp6(2),e.hij(" ",t.isDeleting()?"Deleting...":"Delete Current"," ")}}function q(i,r){if(1&i&&(e.TgZ(0,"div",67),e._UZ(1,"i",68),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.successMessage()," ")}}function P(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",72)(1,"div",73),e._UZ(2,"i",74),e.TgZ(3,"div")(4,"div",75),e._uU(5),e.qZA(),e.TgZ(6,"small",69),e._uU(7),e.qZA()()(),e.TgZ(8,"button",76),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeSelectedFile(a))}),e._UZ(9,"i",77),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.Tol(n.getFileIcon(t.type)),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(n.formatFileSize(t.size))}}function D(i,r){if(1&i&&(e.TgZ(0,"div",35)(1,"h6",69),e._uU(2,"Selected Files:"),e.qZA(),e.TgZ(3,"div",70),e.YNc(4,P,10,4,"div",71),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.selectedFiles())}}function S(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",72)(1,"div",73),e._UZ(2,"i",78),e.TgZ(3,"div")(4,"div",75),e._uU(5),e.qZA(),e.TgZ(6,"small",69),e._uU(7),e.qZA()()(),e.TgZ(8,"button",76),e.NdJ("click",function(){const a=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeUploadedAttachment(a))}),e._UZ(9,"i",77),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.Tol(n.getFileIcon(t.type)),e.xp6(3),e.Oqu(t.originalName),e.xp6(2),e.AsE("",n.formatFileSize(t.size)," \u2022 ",t.downloads," downloads")}}function I(i,r){if(1&i&&(e.TgZ(0,"div",35)(1,"h6",69),e._uU(2,"Current Attachments:"),e.qZA(),e.TgZ(3,"div",70),e.YNc(4,S,10,5,"div",71),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.uploadedAttachments())}}function F(i,r){if(1&i&&(e.TgZ(0,"div",79),e._UZ(1,"i",80),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" Large file size (",t.formatFileSize(t.getTotalFileSize()),"). Consider reducing file count or size for better performance. ")}}function N(i,r){1&i&&e._UZ(0,"span",81)}function E(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"Uploading Files..."),e.qZA())}function J(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"Saving..."),e.qZA())}function Y(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.isEditMode()?"Update Announcement":"Create New Announcement"," ")}}function H(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editCurrentAnnouncement())}),e._UZ(1,"i",83),e._uU(2," Edit Current "),e.qZA()}}function Q(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",89),e._uU(2),e.qZA()),2&i){const t=e.oxw().ngIf;e.xp6(2),e.AsE(" ",t.attachments.length," file",1!==t.attachments.length?"s":""," ")}}function R(i,r){if(1&i&&(e.TgZ(0,"div")(1,"h6",84),e._uU(2),e.qZA(),e.TgZ(3,"p",85),e._uU(4),e.qZA(),e.TgZ(5,"div",86)(6,"span"),e._UZ(7,"i",87),e._uU(8),e.qZA(),e.YNc(9,Q,3,2,"span",50),e.qZA(),e.TgZ(10,"div",88)(11,"small",69),e._uU(12),e.qZA()()()),2&i){const t=r.ngIf,n=e.oxw();e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.content),e.xp6(4),e.hij(" ",t.likes," "),e.xp6(1),e.Q6J("ngIf",t.attachments&&t.attachments.length>0),e.xp6(3),e.hij("Updated: ",n.formatDate(t.updatedAt),"")}}function z(i,r){1&i&&(e.TgZ(0,"div",90),e._UZ(1,"i",91),e.TgZ(2,"p",27),e._uU(3,"No announcement available"),e.qZA(),e.TgZ(4,"small"),e._uU(5,"Create your first announcement using the form"),e.qZA()())}function j(i,r){1&i&&(e.TgZ(0,"div",92)(1,"small"),e._uU(2,"No viewers yet"),e.qZA()())}function L(i,r){1&i&&(e.TgZ(0,"small",100),e._UZ(1,"i",101),e.qZA())}function G(i,r){if(1&i&&(e.TgZ(0,"div",95),e._UZ(1,"i",96),e.TgZ(2,"div",97)(3,"small",98),e._uU(4),e.qZA(),e.TgZ(5,"small",69),e._uU(6),e.qZA()(),e.YNc(7,L,2,0,"small",99),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(n.formatDate(t.viewedAt)),e.xp6(1),e.Q6J("ngIf",t.hasLiked)}}function $(i,r){if(1&i&&(e.TgZ(0,"div",102)(1,"small",69),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("+",t.viewedUsers().length-5," more viewers")}}function K(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,G,8,3,"div",93),e.YNc(2,$,3,1,"div",94),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.viewedUsers().slice(-5)),e.xp6(1),e.Q6J("ngIf",t.viewedUsers().length>5)}}function B(i,r){if(1&i&&(e.TgZ(0,"div",95),e._UZ(1,"i",104),e.TgZ(2,"div",97)(3,"small",105),e._uU(4),e.qZA(),e.TgZ(5,"small",69),e._uU(6),e.qZA()(),e.TgZ(7,"div",88)(8,"small",106),e._uU(9),e.qZA(),e.TgZ(10,"small",107),e._uU(11,"downloads"),e.qZA()()()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Tol(n.getFileIcon(t.type)),e.xp6(2),e.Q6J("title",t.originalName),e.xp6(1),e.hij(" ",t.originalName," "),e.xp6(2),e.Oqu(n.formatFileSize(t.size)),e.xp6(3),e.Oqu(t.downloads)}}function V(i,r){if(1&i&&(e.TgZ(0,"div",102)(1,"small",69),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("+",t.getTopDownloadedFiles().length-5," more files")}}function X(i,r){if(1&i&&(e.TgZ(0,"div",57)(1,"div",53)(2,"h6",27),e._UZ(3,"i",103),e._uU(4," Top Downloaded Files "),e.qZA()(),e.TgZ(5,"div",13),e.YNc(6,B,12,6,"div",93),e.YNc(7,V,3,1,"div",94),e.qZA()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.getTopDownloadedFiles().slice(0,5)),e.xp6(1),e.Q6J("ngIf",t.getTopDownloadedFiles().length>5)}}function W(i,r){if(1&i&&(e.TgZ(0,"span",148),e._UZ(1,"i",89),e._uU(2),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.AsE(" ",t.attachments.length," file",1!==t.attachments.length?"s":""," ")}}function ee(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",149),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(5);return e.KtG(a.editAnnouncement(o.id))}),e._UZ(1,"i",150),e.qZA()}}function te(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",151),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(5);return e.KtG(a.deleteSpecificAnnouncement(o.id))}),e._UZ(1,"i",66),e.qZA()}}function ne(i,r){if(1&i&&(e.TgZ(0,"div",154)(1,"div",155)(2,"div",73),e._UZ(3,"i",156),e.TgZ(4,"div",157)(5,"small",75),e._uU(6),e.qZA(),e.TgZ(7,"small",107),e._uU(8),e.qZA()(),e.TgZ(9,"small",158),e._uU(10),e.qZA()()()()),2&i){const t=r.$implicit,n=e.oxw(7);e.xp6(3),e.Tol(n.getFileIcon(t.type)),e.xp6(3),e.Oqu(t.originalName),e.xp6(2),e.Oqu(n.formatFileSize(t.size)),e.xp6(2),e.hij("",t.downloads," downloads")}}function ie(i,r){if(1&i&&(e.TgZ(0,"div",15)(1,"div",152),e.YNc(2,ne,11,5,"div",153),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.attachments)}}function oe(i,r){if(1&i&&(e.TgZ(0,"div",135)(1,"div",13)(2,"div",136)(3,"h6",137),e._uU(4),e.qZA(),e.TgZ(5,"span",138),e._uU(6),e.qZA()(),e.TgZ(7,"p",139),e._uU(8),e.qZA(),e.TgZ(9,"div",140)(10,"div",141),e._UZ(11,"i",142),e._uU(12),e.YNc(13,W,3,2,"span",143),e.qZA(),e.TgZ(14,"div",144),e.YNc(15,ee,2,0,"button",145),e.YNc(16,te,2,0,"button",146),e.qZA()(),e.YNc(17,ie,3,1,"div",147),e.qZA()()),2&i){const t=r.$implicit,n=e.oxw(5);e.xp6(4),e.Oqu(t.title),e.xp6(1),e.Tol(n.getAnnouncementPriorityBadge(t.priority)),e.xp6(1),e.hij(" ",t.priority||"medium"," "),e.xp6(2),e.Oqu(t.content),e.xp6(4),e.hij(" ",n.formatDate(t.createdAt)," "),e.xp6(1),e.Q6J("ngIf",t.attachments&&t.attachments.length>0),e.xp6(2),e.Q6J("ngIf",n.canEditSelectedAnnouncement(t)),e.xp6(1),e.Q6J("ngIf",n.canDeleteSelectedAnnouncement(t)),e.xp6(1),e.Q6J("ngIf",t.attachments&&t.attachments.length>0)}}function re(i,r){if(1&i&&(e.TgZ(0,"div",133),e.YNc(1,oe,18,10,"div",134),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.selectedOfficerAnnouncements())}}function ae(i,r){1&i&&(e.TgZ(0,"div",159),e._UZ(1,"i",160),e.TgZ(2,"p",161),e._uU(3,"No announcements from this officer"),e.qZA()())}function ce(i,r){if(1&i&&(e.TgZ(0,"div")(1,"div",123)(2,"div",124),e._UZ(3,"i",125),e.qZA(),e.TgZ(4,"div")(5,"h6",126),e._uU(6),e.qZA(),e.TgZ(7,"p",127),e._uU(8),e.qZA(),e.TgZ(9,"span",128),e._uU(10),e.qZA()()(),e.TgZ(11,"h6",129),e._UZ(12,"i",130),e._uU(13),e.qZA(),e.YNc(14,re,2,1,"div",131),e.YNc(15,ae,4,0,"ng-template",null,132,e.W1O),e.qZA()),2&i){const t=e.MAs(16),n=e.oxw(3);e.xp6(6),e.Oqu(n.selectedOfficer().fullName),e.xp6(2),e.Oqu(n.selectedOfficer().role.displayName),e.xp6(2),e.Oqu(n.selectedOfficer().department),e.xp6(3),e.hij(" Announcements (",n.selectedOfficerAnnouncements().length,") "),e.xp6(1),e.Q6J("ngIf",n.selectedOfficerAnnouncements().length>0)("ngIfElse",t)}}function se(i,r){1&i&&(e.TgZ(0,"div",162),e._UZ(1,"i",163),e.TgZ(2,"p",164),e._uU(3,"Select an officer from the hierarchy to view their announcements"),e.qZA(),e.TgZ(4,"p",141),e._uU(5,"You can view announcements from officers with lower seniority levels"),e.qZA()())}function de(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",114)(1,"div",115)(2,"div",116)(3,"div",117)(4,"h6",118),e._UZ(5,"i",119),e._uU(6," Officer Hierarchy "),e.qZA(),e.TgZ(7,"app-role-hierarchy",120),e.NdJ("selectOfficer",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onSelectOfficer(o))}),e.qZA()()(),e.TgZ(8,"div",121)(9,"div",117),e.YNc(10,ce,17,6,"div",55),e.YNc(11,se,6,0,"ng-template",null,122,e.W1O),e.qZA()()()()}if(2&i){const t=e.MAs(12),n=e.oxw(2);e.xp6(7),e.Q6J("currentUser",n.currentAdmin()),e.xp6(3),e.Q6J("ngIf",n.selectedOfficer())("ngIfElse",t)}}function le(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",108)(1,"div",109)(2,"div",25)(3,"div",110)(4,"h5",27),e._UZ(5,"i",111),e._uU(6," Department Hierarchy & Subordinate Announcements "),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleHierarchy())}),e._UZ(8,"i",112),e._uU(9),e.qZA()(),e.YNc(10,de,13,3,"div",113),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(8),e.ekj("bi-chevron-down",!t.showHierarchy())("bi-chevron-up",t.showHierarchy()),e.xp6(1),e.hij(" ",t.showHierarchy()?"Hide":"Show"," Hierarchy "),e.xp6(1),e.Q6J("ngIf",t.showHierarchy())}}function ge(i,r){1&i&&e._UZ(0,"span",81)}function me(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",165),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e.TgZ(1,"div",166),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(2,"div",167)(3,"div",168)(4,"h5",169),e._UZ(5,"i",170),e._uU(6," Confirm Delete "),e.qZA(),e.TgZ(7,"button",171),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e.qZA()(),e.TgZ(8,"div",172)(9,"p")(10,"strong"),e._uU(11,"Are you sure you want to delete this announcement?"),e.qZA()(),e.TgZ(12,"p",16),e._uU(13,"This action cannot be undone. All likes and engagement data will be lost."),e.qZA()(),e.TgZ(14,"div",173)(15,"button",174),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e._uU(16," Cancel "),e.qZA(),e.TgZ(17,"button",175),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmDelete())}),e.YNc(18,ge,1,0,"span",49),e._uU(19),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(17),e.Q6J("disabled",t.isDeleting()),e.xp6(1),e.Q6J("ngIf",t.isDeleting()),e.xp6(1),e.hij(" ",t.isDeleting()?"Deleting...":"Delete Announcement"," ")}}let ue=(()=>{class i{constructor(t,n,o,a,c,pe){this.adminService=t,this.announcementService=n,this.userService=o,this.fileService=a,this.hierarchicalAdminService=c,this.router=pe,this.title=(0,e.tdS)(""),this.content=(0,e.tdS)(""),this.isSubmitting=(0,e.tdS)(!1),this.isDeleting=(0,e.tdS)(!1),this.successMessage=(0,e.tdS)(""),this.currentAnnouncement=(0,e.tdS)(null),this.showDeleteConfirm=(0,e.tdS)(!1),this.editingAnnouncementId=(0,e.tdS)(null),this.selectedFiles=(0,e.tdS)([]),this.uploadedAttachments=(0,e.tdS)([]),this.isUploadingFiles=(0,e.tdS)(!1),this.currentAdmin=(0,e.tdS)(null),this.selectedOfficer=(0,e.tdS)(null),this.selectedOfficerAnnouncements=(0,e.tdS)([]),this.showHierarchy=(0,e.tdS)(!1),this.viewedUsers=this.userService.viewedUsers}ngOnInit(){if(!this.adminService.isAuthenticated())return void this.router.navigate(["/admin"]);const t=this.adminService.getCurrentAdmin();this.currentAdmin.set(t),this.loadCurrentAnnouncement(),this.fileService.setDownloadCallback(n=>{this.announcementService.updateFileDownloadCount(n),this.loadCurrentAnnouncement()}),setInterval(()=>{this.loadCurrentAnnouncement()},3e4)}loadCurrentAnnouncement(){const t=this.announcementService.getLatestAnnouncement();this.currentAnnouncement.set(t),this.editingAnnouncementId()||(this.title.set(""),this.content.set(""),this.uploadedAttachments.set([]),this.selectedFiles.set([]))}onSubmit(){var t=this;return(0,u.Z)(function*(){if(t.title().trim()&&t.content().trim()){t.isSubmitting.set(!0),t.successMessage.set("");try{const n=[...t.uploadedAttachments()];if(t.selectedFiles().length>0){t.isUploadingFiles.set(!0);for(const a of t.selectedFiles())try{const c=yield t.fileService.uploadFile(a);n.push(c)}catch(c){console.error("Error uploading file:",c)}t.isUploadingFiles.set(!1)}const o=t.editingAnnouncementId();o?t.announcementService.updateAnnouncement(o,t.title().trim(),t.content().trim(),n)&&(t.successMessage.set("Announcement updated successfully!"),t.cancelEdit()):(t.announcementService.createNewAnnouncement(t.title().trim(),t.content().trim(),n),t.successMessage.set("New announcement created successfully!"),t.title.set(""),t.content.set(""),t.selectedFiles.set([]),t.uploadedAttachments.set([])),t.currentAnnouncement.set(t.announcementService.getLatestAnnouncement()),setTimeout(()=>{t.successMessage.set("")},3e3)}catch(n){console.error("Error with announcement:",n)}finally{t.isSubmitting.set(!1),t.isUploadingFiles.set(!1)}}})()}showDeleteConfirmation(){this.showDeleteConfirm.set(!0)}hideDeleteConfirmation(){this.showDeleteConfirm.set(!1)}confirmDelete(){const t=this.currentAnnouncement();if(t){this.isDeleting.set(!0),this.showDeleteConfirm.set(!1);try{this.announcementService.deleteAnnouncement(t.id)&&(this.currentAnnouncement.set(null),this.title.set(""),this.content.set(""),this.successMessage.set("Announcement deleted successfully!"),setTimeout(()=>{this.successMessage.set("")},3e3))}catch(n){console.error("Error deleting announcement:",n)}finally{this.isDeleting.set(!1)}}}logout(){this.adminService.logout(),this.router.navigate(["/admin"])}updateTitle(t){this.title.set(t)}updateContent(t){this.content.set(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}getTotalLikes(){const t=this.currentAnnouncement();return t?t.likes:0}getTotalViewers(){return this.viewedUsers().length}hasAnnouncement(){return null!==this.currentAnnouncement()}getTotalAnnouncements(){return this.announcementService.getAllAnnouncements().length}getTotalDownloads(){this.announcementService.syncFileDownloads(this.fileService);const t=this.announcementService.getAllAnnouncements();let n=0;return t.forEach(o=>{o.attachments&&o.attachments.forEach(a=>{n+=a.downloads})}),n}getTopDownloadedFiles(){this.announcementService.syncFileDownloads(this.fileService);const t=[];return this.announcementService.getAllAnnouncements().forEach(o=>{o.attachments&&t.push(...o.attachments)}),t.sort((o,a)=>a.downloads-o.downloads)}isEditMode(){return null!==this.editingAnnouncementId()}editCurrentAnnouncement(){const t=this.currentAnnouncement();t&&(this.editingAnnouncementId.set(t.id),this.title.set(t.title),this.content.set(t.content),this.uploadedAttachments.set([...t.attachments]),this.selectedFiles.set([]))}cancelEdit(){this.editingAnnouncementId.set(null),this.title.set(""),this.content.set(""),this.uploadedAttachments.set([]),this.selectedFiles.set([])}onFileSelected(t){const n=t.target;if(n.files){const o=Array.from(n.files);this.selectedFiles.update(a=>[...a,...o]),n.value=""}}removeSelectedFile(t){this.selectedFiles.update(n=>n.filter((o,a)=>a!==t))}removeUploadedAttachment(t){this.uploadedAttachments.update(n=>n.filter((o,a)=>a!==t))}getFileIcon(t){return this.fileService.getFileIcon(t)}formatFileSize(t){return this.fileService.formatFileSize(t)}getTotalFileSize(){return this.selectedFiles().reduce((o,a)=>o+a.size,0)+this.uploadedAttachments().reduce((o,a)=>o+a.size,0)}toggleHierarchy(){this.showHierarchy.update(t=>!t)}onSelectOfficer(t){this.selectedOfficer.set(t);const n=this.announcementService.getAnnouncementsByOfficer(t.id);this.selectedOfficerAnnouncements.set(n)}getSubordinateAnnouncements(){return this.announcementService.getSubordinateAnnouncements()}canEditSelectedAnnouncement(t){const n=this.currentAdmin();return!!n&&this.announcementService.canEditAnnouncement(t,n)}canDeleteSelectedAnnouncement(t){const n=this.currentAdmin();return!!n&&this.announcementService.canDeleteAnnouncement(t,n)}getAnnouncementCreatorInfo(t){const n=t.createdBy;return`${n.fullName} (${n.role.displayName}) - ${n.department}`}getAnnouncementPriorityBadge(t){return{urgent:"bg-danger",high:"bg-warning text-dark",medium:"bg-info",low:"bg-secondary"}[t||"medium"]||"bg-secondary"}getRoleHierarchyLevel(){return this.currentAdmin()?.role.seniorityLevel||10}hasSubordinates(){const t=this.currentAdmin();return!!t&&this.hierarchicalAdminService.getSubordinateAdmins(t).length>0}editAnnouncement(t){const n=this.announcementService.getAllAnnouncements().find(o=>o.id===t);if(n){const o=this.currentAdmin();if(o&&this.announcementService.canEditAnnouncement(n,o)){this.editingAnnouncementId.set(t),this.title.set(n.title),this.content.set(n.content),this.uploadedAttachments.set(n.attachments||[]),this.selectedFiles.set([]);const a=document.querySelector(".card");a&&a.scrollIntoView({behavior:"smooth"})}else alert("You do not have permission to edit this announcement.")}}deleteSpecificAnnouncement(t){const n=this.announcementService.getAllAnnouncements().find(o=>o.id===t);if(n){const o=this.currentAdmin();if(o&&this.announcementService.canDeleteAnnouncement(n,o)){if(confirm(`Are you sure you want to delete "${n.title}"?`)&&this.announcementService.deleteAnnouncement(t)){this.successMessage.set("Announcement deleted successfully!");const c=this.selectedOfficer();c&&this.onSelectOfficer(c),setTimeout(()=>this.successMessage.set(""),3e3)}}else alert("You do not have permission to delete this announcement.")}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.l),e.Y36(w.X),e.Y36(y.K),e.Y36(O.I),e.Y36(m.X),e.Y36(k.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-dashboard"]],standalone:!0,features:[e.jDz],decls:106,vars:27,consts:[[1,"container-fluid","min-vh-100","bg-light"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-danger"],[1,"container"],["href","#",1,"navbar-brand"],["src","assets/UPIDlogo.svg","alt","UPID Logo",1,"me-2",2,"height","32px","width","auto"],[1,"bi","bi-shield-check-fill","me-2"],[1,"navbar-nav","ms-auto"],[1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"container","py-4"],[1,"row","mb-4"],[1,"col-md-3"],[1,"card","text-center","border-primary"],[1,"card-body"],[1,"bi","bi-people-fill","display-4","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],[1,"card","text-center","border-danger"],[1,"bi","bi-heart-fill","display-4","text-danger"],[1,"card","text-center","border-success"],[1,"bi","bi-megaphone-fill","display-4","text-success"],[1,"card","text-center","border-warning"],[1,"bi","bi-download","display-4","text-warning"],[1,"row"],[1,"col-lg-8"],[1,"card","shadow-sm"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-pencil-square","me-2"],[1,"btn-group"],["class","btn btn-outline-secondary btn-sm","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-danger btn-sm","type","button",3,"disabled","click",4,"ngIf"],["class","alert alert-success alert-dismissible",4,"ngIf"],[3,"ngSubmit"],["announcementForm","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Enter announcement title","required","",1,"form-control",3,"value","input"],[1,"mb-4"],["for","content",1,"form-label"],["id","content","rows","6","placeholder","Enter announcement content...","required","",1,"form-control",3,"value","input"],[1,"form-label"],["type","file","id","fileInput","multiple","","accept",".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif,.txt,.zip,.rar",1,"form-control",3,"change"],[1,"form-text"],[1,"bi","bi-info-circle","me-1"],["class","mb-3",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"col-lg-4"],[1,"card-header","bg-white"],[1,"bi","bi-eye-fill","me-2"],[4,"ngIf","ngIfElse"],["noAnnouncement",""],[1,"card","shadow-sm","mt-3"],[1,"bi","bi-clock-history","me-2"],["class","text-center text-muted py-2",4,"ngIf"],["class","card shadow-sm mt-3",4,"ngIf"],["class","row mt-4",4,"ngIf"],["class","modal fade show d-block","style","background-color: rgba(0,0,0,0.5);",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-x-circle"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"disabled","click"],[1,"bi","bi-trash3"],[1,"alert","alert-success","alert-dismissible"],[1,"bi","bi-check-circle-fill","me-2"],[1,"text-muted"],[1,"list-group","list-group-flush"],["class","list-group-item d-flex justify-content-between align-items-center px-0",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","px-0"],[1,"d-flex","align-items-center"],[1,"bi","me-2","text-primary"],[1,"fw-semibold"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-x"],[1,"bi","me-2","text-success"],[1,"alert","alert-warning"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"text-primary"],[1,"small","text-muted","mb-2"],[1,"d-flex","justify-content-between","text-muted","small","mb-2"],[1,"bi","bi-heart-fill","text-danger"],[1,"text-end"],[1,"bi","bi-paperclip","text-info"],[1,"text-center","text-muted","py-3"],[1,"bi","bi-megaphone","display-4","d-block","mb-2"],[1,"text-center","text-muted","py-2"],["class","d-flex align-items-center mb-2",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],[1,"bi","bi-person-circle","text-primary","me-2"],[1,"flex-grow-1"],[1,"d-block"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"bi","bi-heart-fill"],[1,"text-center"],[1,"bi","bi-bar-chart","me-2"],[1,"me-2","text-warning"],[1,"d-block","fw-semibold","text-truncate",3,"title"],[1,"text-warning","fw-bold"],[1,"d-block","text-muted"],[1,"row","mt-4"],[1,"col-12"],[1,"card-header","bg-gradient","bg-info","text-white","d-flex","justify-content-between","align-items-center"],[1,"bi","bi-diagram-3","me-2"],[1,"bi"],["class","card-body p-0",4,"ngIf"],[1,"card-body","p-0"],[1,"row","g-0"],[1,"col-lg-5","border-end"],[1,"p-3"],[1,"text-primary","mb-3"],[1,"bi","bi-people","me-1"],[3,"currentUser","selectOfficer"],[1,"col-lg-7"],["noOfficerSelected",""],[1,"d-flex","align-items-center","mb-3"],[1,"me-3"],[1,"display-6","text-info","bi-person-badge"],[1,"mb-1"],[1,"text-muted","mb-1","small"],[1,"badge","bg-info"],[1,"text-success","mb-3"],[1,"bi","bi-megaphone","me-1"],["class","announcements-list",4,"ngIf","ngIfElse"],["noAnnouncements",""],[1,"announcements-list"],["class","card mb-3 border-start border-info border-3",4,"ngFor","ngForOf"],[1,"card","mb-3","border-start","border-info","border-3"],[1,"d-flex","justify-content-between","align-items-start","mb-2"],[1,"card-title","mb-1"],[1,"badge"],[1,"card-text","small","text-muted","mb-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"small","text-muted"],[1,"bi","bi-calendar3","me-1"],["class","ms-2",4,"ngIf"],[1,"btn-group","btn-group-sm"],["class","btn btn-outline-primary btn-sm","title","Edit Announcement",3,"click",4,"ngIf"],["class","btn btn-outline-danger btn-sm","title","Delete Announcement",3,"click",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"ms-2"],["title","Edit Announcement",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-pencil"],["title","Delete Announcement",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"row","g-2"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","card-body","p-2","bg-light"],[1,"me-2"],[1,"flex-grow-1","text-truncate"],[1,"text-warning"],[1,"text-center","py-4"],[1,"bi","bi-inbox","display-1","text-muted"],[1,"text-muted","mt-2"],[1,"text-center","py-5"],[1,"bi","bi-person-plus","display-1","text-muted"],[1,"text-muted","mt-3"],[1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.5)",3,"click"],[1,"modal-dialog","modal-dialog-centered",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","text-danger"],[1,"bi","bi-exclamation-triangle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),e._UZ(4,"img",4)(5,"i",5),e._uU(6," UPID Admin Dashboard "),e.qZA(),e.TgZ(7,"div",6)(8,"button",7),e.NdJ("click",function(){return n.logout()}),e._UZ(9,"i",8),e._uU(10," Logout "),e.qZA()()()(),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13),e._UZ(16,"i",14),e.TgZ(17,"h3",15),e._uU(18),e.qZA(),e.TgZ(19,"p",16),e._uU(20,"Total Viewers"),e.qZA()()()(),e.TgZ(21,"div",11)(22,"div",17)(23,"div",13),e._UZ(24,"i",18),e.TgZ(25,"h3",15),e._uU(26),e.qZA(),e.TgZ(27,"p",16),e._uU(28,"Total Likes"),e.qZA()()()(),e.TgZ(29,"div",11)(30,"div",19)(31,"div",13),e._UZ(32,"i",20),e.TgZ(33,"h3",15),e._uU(34),e.qZA(),e.TgZ(35,"p",16),e._uU(36,"Total Announcements"),e.qZA()()()(),e.TgZ(37,"div",11)(38,"div",21)(39,"div",13),e._UZ(40,"i",22),e.TgZ(41,"h3",15),e._uU(42),e.qZA(),e.TgZ(43,"p",16),e._uU(44,"Total Downloads"),e.qZA()()()()(),e.TgZ(45,"div",23)(46,"div",24)(47,"div",25)(48,"div",26)(49,"h5",27),e._UZ(50,"i",28),e._uU(51),e.qZA(),e.TgZ(52,"div",29),e.YNc(53,U,3,0,"button",30),e.YNc(54,M,3,2,"button",31),e.qZA()(),e.TgZ(55,"div",13),e.YNc(56,q,3,1,"div",32),e.TgZ(57,"form",33,34),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(59,"div",35)(60,"label",36),e._uU(61,"Announcement Title"),e.qZA(),e.TgZ(62,"input",37),e.NdJ("input",function(a){return n.updateTitle(a.target.value)}),e.qZA()(),e.TgZ(63,"div",38)(64,"label",39),e._uU(65,"Announcement Content"),e.qZA(),e.TgZ(66,"textarea",40),e.NdJ("input",function(a){return n.updateContent(a.target.value)}),e.qZA()(),e.TgZ(67,"div",38)(68,"label",41),e._uU(69,"File Attachments"),e.qZA(),e.TgZ(70,"div",35)(71,"input",42),e.NdJ("change",function(a){return n.onFileSelected(a)}),e.qZA(),e.TgZ(72,"div",43),e._UZ(73,"i",44),e._uU(74," Supported: PDF, Word, Excel, PowerPoint, Images, Text, Archives (Max 10MB each) "),e.qZA()(),e.YNc(75,D,5,1,"div",45),e.YNc(76,I,5,1,"div",45),e.YNc(77,F,3,1,"div",46),e.qZA(),e.TgZ(78,"div",47)(79,"button",48),e.YNc(80,N,1,0,"span",49),e.YNc(81,E,2,0,"span",50),e.YNc(82,J,2,0,"span",50),e.YNc(83,Y,2,1,"span",50),e.qZA(),e.YNc(84,H,3,0,"button",51),e.qZA()()()()(),e.TgZ(85,"div",52)(86,"div",25)(87,"div",53)(88,"h6",27),e._UZ(89,"i",54),e._uU(90),e.qZA()(),e.TgZ(91,"div",13),e.YNc(92,R,13,5,"div",55),e.YNc(93,z,6,0,"ng-template",null,56,e.W1O),e.qZA()(),e.TgZ(95,"div",57)(96,"div",53)(97,"h6",27),e._UZ(98,"i",58),e._uU(99," Recent Viewers "),e.qZA()(),e.TgZ(100,"div",13),e.YNc(101,j,3,0,"div",59),e.YNc(102,K,3,2,"div",50),e.qZA()(),e.YNc(103,X,8,2,"div",60),e.qZA()(),e.YNc(104,le,11,6,"div",61),e.qZA()(),e.YNc(105,me,20,3,"div",62)),2&t){const o=e.MAs(94);e.xp6(18),e.Oqu(n.getTotalViewers()),e.xp6(8),e.Oqu(n.getTotalLikes()),e.xp6(8),e.Oqu(n.getTotalAnnouncements()),e.xp6(8),e.Oqu(n.getTotalDownloads()),e.xp6(9),e.hij(" ",n.isEditMode()?"Update":"Create New"," Announcement "),e.xp6(2),e.Q6J("ngIf",n.isEditMode()),e.xp6(1),e.Q6J("ngIf",n.hasAnnouncement()),e.xp6(2),e.Q6J("ngIf",n.successMessage()),e.xp6(6),e.Q6J("value",n.title()),e.xp6(4),e.Q6J("value",n.content()),e.xp6(9),e.Q6J("ngIf",n.selectedFiles().length>0),e.xp6(1),e.Q6J("ngIf",n.uploadedAttachments().length>0),e.xp6(1),e.Q6J("ngIf",n.getTotalFileSize()>52428800),e.xp6(2),e.Q6J("disabled",n.isSubmitting()||n.isUploadingFiles()||!n.title().trim()||!n.content().trim()),e.xp6(1),e.Q6J("ngIf",n.isSubmitting()||n.isUploadingFiles()),e.xp6(1),e.Q6J("ngIf",n.isUploadingFiles()),e.xp6(1),e.Q6J("ngIf",!n.isUploadingFiles()&&n.isSubmitting()),e.xp6(1),e.Q6J("ngIf",!n.isSubmitting()&&!n.isUploadingFiles()),e.xp6(1),e.Q6J("ngIf",n.hasAnnouncement()&&!n.isEditMode()),e.xp6(6),e.hij(" ",n.hasAnnouncement()?"Current Announcement":"No Announcement"," "),e.xp6(2),e.Q6J("ngIf",n.currentAnnouncement())("ngIfElse",o),e.xp6(9),e.Q6J("ngIf",0===n.viewedUsers().length),e.xp6(1),e.Q6J("ngIf",n.viewedUsers().length>0),e.xp6(1),e.Q6J("ngIf",n.getTopDownloadedFiles().length>0),e.xp6(1),e.Q6J("ngIf",n.hasSubordinates()),e.xp6(1),e.Q6J("ngIf",n.showDeleteConfirm())}},dependencies:[d.ez,d.sg,d.O5,l.u5,l._Y,l.JL,l.F,C],styles:['.container-fluid[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,64,175,.08) 0%,rgba(14,165,233,.05) 25%,rgba(16,185,129,.03) 50%,rgba(34,197,94,.05) 75%,rgba(59,130,246,.08) 100%);position:relative;min-height:100vh}.container-fluid[_ngcontent-%COMP%]:before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background-image:radial-gradient(circle at 20% 80%,rgba(30,64,175,.1) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(16,185,129,.08) 0%,transparent 50%),radial-gradient(circle at 40% 40%,rgba(14,165,233,.06) 0%,transparent 50%),linear-gradient(90deg,rgba(59,130,246,.02) 1px,transparent 1px),linear-gradient(rgba(16,185,129,.02) 1px,transparent 1px);background-size:600px 600px,800px 800px,500px 500px,30px 30px,30px 30px;background-position:0 0,100px 100px,200px 200px,0 0,15px 15px;animation:_ngcontent-%COMP%_irrigationFlow 40s ease-in-out infinite;pointer-events:none;z-index:0}@keyframes _ngcontent-%COMP%_irrigationFlow{0%,to{background-position:0 0,100px 100px,200px 200px,0 0,15px 15px}33%{background-position:50px 50px,150px 50px,250px 150px,10px 10px,25px 5px}66%{background-position:100px 100px,50px 150px,150px 250px,5px 15px,10px 25px}}.navbar-dark[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e40af 0%,#0ea5e9 100%)!important;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:3px solid rgba(16,185,129,.3);box-shadow:0 4px 20px #1e40af33,0 1px 3px #0000001a;position:relative;z-index:10}.navbar-dark[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent 0%,#16a34a 25%,#0ea5e9 50%,#16a34a 75%,transparent 100%);animation:_ngcontent-%COMP%_waterFlow 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_waterFlow{0%,to{background-position:-100% 0}50%{background-position:100% 0}}.navbar-brand[_ngcontent-%COMP%]{font-weight:700;font-size:1.4rem;text-shadow:0 2px 4px rgba(0,0,0,.3);transition:all .3s ease}.navbar-brand[_ngcontent-%COMP%]:hover{transform:translateY(-1px);text-shadow:0 3px 6px rgba(0,0,0,.4)}.card[_ngcontent-%COMP%]{border:none;border-radius:20px;background:rgba(255,255,255,.95);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);box-shadow:0 10px 30px #00000014,0 4px 8px #0000000a;transition:all .4s cubic-bezier(.175,.885,.32,1.275);position:relative;z-index:2;overflow:hidden}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#1e40af 0%,#0ea5e9 25%,#16a34a 50%,#0ea5e9 75%,#1e40af 100%);background-size:200% 100%;animation:_ngcontent-%COMP%_gradientShift 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 40px #0000001f,0 8px 16px #00000014}.card.border-primary[_ngcontent-%COMP%]{border:2px solid rgba(30,64,175,.2)!important;background:linear-gradient(135deg,rgba(30,64,175,.05) 0%,rgba(255,255,255,.95) 50%)}.card.border-primary[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#1e40af,#3b82f6)}.card.border-danger[_ngcontent-%COMP%]{border:2px solid rgba(220,38,38,.2)!important;background:linear-gradient(135deg,rgba(220,38,38,.05) 0%,rgba(255,255,255,.95) 50%)}.card.border-danger[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#dc2626,#ef4444)}.card.border-success[_ngcontent-%COMP%]{border:2px solid rgba(22,163,74,.2)!important;background:linear-gradient(135deg,rgba(22,163,74,.05) 0%,rgba(255,255,255,.95) 50%)}.card.border-success[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#16a34a,#22c55e)}.card.border-warning[_ngcontent-%COMP%]{border:2px solid rgba(245,158,11,.2)!important;background:linear-gradient(135deg,rgba(245,158,11,.05) 0%,rgba(255,255,255,.95) 50%)}.card.border-warning[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#f59e0b,#fbbf24)}.display-4[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.1));transition:all .3s ease}.card[_ngcontent-%COMP%]:hover   .display-4[_ngcontent-%COMP%]{transform:scale(1.1) rotate(5deg);filter:drop-shadow(0 4px 8px rgba(0,0,0,.15))}.text-primary[_ngcontent-%COMP%]{color:#1e40af!important}.text-danger[_ngcontent-%COMP%]{color:#dc2626!important}.text-success[_ngcontent-%COMP%]{color:#16a34a!important}.text-warning[_ngcontent-%COMP%]{color:#f59e0b!important}.form-control[_ngcontent-%COMP%]{border-radius:12px;border:2px solid rgba(59,130,246,.2);padding:.75rem 1rem;font-size:1rem;transition:all .3s ease;background:rgba(255,255,255,.9);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.form-control[_ngcontent-%COMP%]:focus{border-color:#1e40af;box-shadow:0 0 0 .25rem #1e40af26,0 2px 8px #1e40af1a;background:white;transform:translateY(-1px)}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#374151;margin-bottom:.75rem;font-size:1rem}.btn[_ngcontent-%COMP%]{border-radius:12px;font-weight:600;padding:.65rem 1.5rem;transition:all .3s cubic-bezier(.175,.885,.32,1.275);box-shadow:0 2px 8px #0000001a;position:relative;overflow:hidden}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.2) 50%,transparent 100%);transition:left .5s ease}.btn[_ngcontent-%COMP%]:hover:before{left:100%}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 15px #00000026}.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#ef4444);border:none;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#b91c1c,#dc2626);color:#fff}.btn-outline-danger[_ngcontent-%COMP%]{border:2px solid #dc2626;color:#dc2626;background:rgba(220,38,38,.05)}.btn-outline-danger[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#dc2626,#ef4444);border-color:transparent;color:#fff;transform:translateY(-2px) scale(1.05)}.btn-outline-secondary[_ngcontent-%COMP%]{border:2px solid #6b7280;color:#6b7280;background:rgba(107,114,128,.05)}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6b7280,#9ca3af);border-color:transparent;color:#fff}.btn-outline-light[_ngcontent-%COMP%]{border:2px solid rgba(255,255,255,.8);color:#fff;background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.btn-outline-light[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2);border-color:#fff;color:#fff;transform:translateY(-1px)}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,64,175,.05) 0%,rgba(14,165,233,.02) 100%)!important;border-bottom:2px solid rgba(59,130,246,.1);border-radius:20px 20px 0 0!important;padding:1.25rem 1.5rem}.card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#1e40af;font-weight:700;margin:0}.alert[_ngcontent-%COMP%]{border-radius:12px;border:none;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);animation:_ngcontent-%COMP%_slideDown .5s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.alert-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(22,163,74,.1) 0%,rgba(34,197,94,.05) 100%);color:#15803d;border-left:4px solid #16a34a}.alert-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(220,38,38,.1) 0%,rgba(239,68,68,.05) 100%);color:#b91c1c;border-left:4px solid #dc2626}.modal.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalFadeIn .3s ease-in}.modal-content[_ngcontent-%COMP%]{border:none;border-radius:20px;background:rgba(255,255,255,.98);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);box-shadow:0 25px 50px #00000040;overflow:hidden}.modal-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#1e40af 0%,#0ea5e9 25%,#16a34a 50%,#0ea5e9 75%,#1e40af 100%)}.modal-header[_ngcontent-%COMP%]{border-bottom:2px solid rgba(59,130,246,.1);background:linear-gradient(135deg,rgba(30,64,175,.05) 0%,rgba(14,165,233,.02) 100%);border-radius:20px 20px 0 0}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;transform:scale(.9) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}.form-control[type=file][_ngcontent-%COMP%]{background:rgba(59,130,246,.02);border:2px dashed rgba(30,64,175,.3)}.form-control[type=file][_ngcontent-%COMP%]:hover{border-color:#1e40af;background:rgba(59,130,246,.05)}.form-text[_ngcontent-%COMP%]{color:#6b7280;font-size:.9rem;margin-top:.5rem}.list-group-item[_ngcontent-%COMP%]{background:rgba(255,255,255,.8);border:1px solid rgba(59,130,246,.1);border-radius:8px!important;margin-bottom:.5rem;transition:all .3s ease}.list-group-item[_ngcontent-%COMP%]:hover{background:rgba(59,130,246,.05);border-color:#1e40af;transform:translate(5px)}h3[_ngcontent-%COMP%]{font-weight:700;color:#1f2937}.text-muted[_ngcontent-%COMP%]{color:#6b7280!important;font-weight:500}.bi-file-earmark-pdf[_ngcontent-%COMP%]{color:#dc2626!important;filter:drop-shadow(0 1px 2px rgba(220,38,38,.3))}.bi-file-earmark-excel[_ngcontent-%COMP%]{color:#16a34a!important;filter:drop-shadow(0 1px 2px rgba(22,163,74,.3))}.bi-file-earmark-word[_ngcontent-%COMP%]{color:#1e40af!important;filter:drop-shadow(0 1px 2px rgba(30,64,175,.3))}.bi-file-earmark-image[_ngcontent-%COMP%]{color:#ea580c!important;filter:drop-shadow(0 1px 2px rgba(234,88,12,.3))}@media (max-width: 768px){.container-fluid[_ngcontent-%COMP%]:before{background-size:300px 300px,400px 400px,250px 250px,20px 20px,20px 20px}.card[_ngcontent-%COMP%]{border-radius:16px;margin-bottom:1rem}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.01)}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem}}.spinner-border[_ngcontent-%COMP%]{filter:drop-shadow(0 1px 2px rgba(0,0,0,.2))}.btn[_ngcontent-%COMP%]:focus-visible{outline:2px solid #1e40af;outline-offset:2px}.form-control[_ngcontent-%COMP%]:focus-visible{outline:2px solid #1e40af;outline-offset:2px}.container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pageSlideIn .8s ease-out}@keyframes _ngcontent-%COMP%_pageSlideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.badge[_ngcontent-%COMP%]{border-radius:8px;font-weight:600;font-size:.8rem;padding:6px 12px}.bg-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#fbbf24)!important;color:#92400e!important}.bg-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ea5e9,#38bdf8)!important}.bg-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#ef4444)!important}.bg-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#9ca3af)!important}.table[_ngcontent-%COMP%]{background:rgba(255,255,255,.9);border-radius:12px;overflow:hidden;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(30,64,175,.1) 0%,rgba(14,165,233,.05) 100%);color:#1e40af;font-weight:700;border:none;padding:1rem}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;padding:1rem;vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:rgba(59,130,246,.05);transform:scale(1.01)}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(59,130,246,.1);border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#1e40af,#0ea5e9);border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#1e3a8a,#0284c7)}']}),i})()}}]);