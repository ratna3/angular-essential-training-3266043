"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[347],{4347:(f,h,o)=>{o.r(h),o.d(h,{LandingComponent:()=>g});var m=o(6814),l=o(95),u=o(6538),e=o(4946),n=o(3076);function s(i,c){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.name," ")}}function a(i,c){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.email," ")}}function d(i,c){1&i&&e._UZ(0,"span",22)}let g=(()=>{class i{constructor(t,r){this.userService=t,this.router=r,this.nameValue="",this.emailValue="",this.errors={},this.isSubmitting=!1}onSubmit(){if(this.validateForm()){this.isSubmitting=!0;try{this.userService.createUser(this.nameValue,this.emailValue),this.router.navigate(["/announcement"])}catch(t){console.error("Error creating user:",t)}finally{this.isSubmitting=!1}}}validateForm(){const t={};return this.nameValue.trim()?this.nameValue.trim().length<2&&(t.name="Name must be at least 2 characters"):t.name="Name is required",this.emailValue.trim()?this.isValidEmail(this.emailValue.trim())||(t.email="Please enter a valid email address"):t.email="Email is required",this.errors=t,0===Object.keys(t).length}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}updateName(){this.errors.name&&(this.errors={...this.errors,name:void 0})}updateEmail(){this.errors.email&&(this.errors={...this.errors,email:void 0})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.K),e.Y36(u.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-landing"]],standalone:!0,features:[e.jDz],decls:31,vars:11,consts:[[1,"container-fluid","vh-100","d-flex","align-items-center","justify-content-center","bg-light"],[1,"card","shadow-lg",2,"max-width","500px","width","100%"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"mb-3"],["src","assets/UPIDlogo.png","alt","UPID Logo",2,"height","80px","width","auto"],[1,"h2","text-primary","mb-3"],[1,"h4","text-secondary","mb-3"],[1,"text-muted"],[3,"ngSubmit"],["userForm","ngForm"],["for","name",1,"form-label"],["type","text","id","name","name","name","placeholder","Enter your full name","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","invalid-feedback",4,"ngIf"],[1,"mb-4"],["for","email",1,"form-label"],["type","email","id","email","name","email","placeholder","Enter your email address","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/admin",1,"text-decoration-none"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"h1",6),e._uU(7," \u0909\u0924\u094d\u0924\u0930 \u092a\u094d\u0930\u0926\u0947\u0936 \u0938\u093f\u0902\u091a\u093e\u0908 \u0935\u093f\u092d\u093e\u0917 "),e.qZA(),e.TgZ(8,"h2",7),e._uU(9," UPID Suchana Portal "),e.qZA(),e.TgZ(10,"p",8),e._uU(11,"Enter your details to access the latest announcements"),e.qZA()(),e.TgZ(12,"form",9,10),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(14,"div",4)(15,"label",11),e._uU(16,"Full Name"),e.qZA(),e.TgZ(17,"input",12),e.NdJ("ngModelChange",function(p){return r.nameValue=p})("ngModelChange",function(){return r.updateName()}),e.qZA(),e.YNc(18,s,2,1,"div",13),e.qZA(),e.TgZ(19,"div",14)(20,"label",15),e._uU(21,"Email Address"),e.qZA(),e.TgZ(22,"input",16),e.NdJ("ngModelChange",function(p){return r.emailValue=p})("ngModelChange",function(){return r.updateEmail()}),e.qZA(),e.YNc(23,a,2,1,"div",13),e.qZA(),e.TgZ(24,"button",17),e.YNc(25,d,1,0,"span",18),e._uU(26),e.qZA()(),e.TgZ(27,"div",19)(28,"small",8)(29,"a",20),e._uU(30,"Admin Login"),e.qZA()()()()()()),2&t&&(e.xp6(17),e.ekj("is-invalid",r.errors.name),e.Q6J("ngModel",r.nameValue),e.xp6(1),e.Q6J("ngIf",r.errors.name),e.xp6(4),e.ekj("is-invalid",r.errors.email),e.Q6J("ngModel",r.emailValue),e.xp6(1),e.Q6J("ngIf",r.errors.email),e.xp6(1),e.Q6J("disabled",r.isSubmitting),e.xp6(1),e.Q6J("ngIf",r.isSubmitting),e.xp6(1),e.hij(" ",r.isSubmitting?"Processing...":"Access Announcements"," "))},dependencies:[m.ez,m.O5,l.u5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F,u.Bz,u.rH],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:15px}.btn-primary[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:12px}.form-control[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .25rem #0d6efd26}.bg-light[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)!important}h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}"]}),i})()},3076:(f,h,o)=>{o.d(h,{K:()=>l});var m=o(4946);let l=(()=>{class u{constructor(){this.STORAGE_KEY="announcement-portal-users",this.CURRENT_USER_KEY="announcement-portal-current-user",this.users=(0,m.tdS)(this.loadUsers()),this.currentUser=(0,m.tdS)(this.loadCurrentUser()),this.users$=this.users.asReadonly(),this.currentUser$=this.currentUser.asReadonly(),this.viewedUsers=(0,m.Flj)(()=>this.users().filter(n=>n.hasViewed))}loadUsers(){const n=localStorage.getItem(this.STORAGE_KEY);return n?JSON.parse(n):[]}loadCurrentUser(){const n=localStorage.getItem(this.CURRENT_USER_KEY);return n?JSON.parse(n):null}saveUsers(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.users()))}saveCurrentUser(){localStorage.setItem(this.CURRENT_USER_KEY,JSON.stringify(this.currentUser()))}createUser(n,s){const a=this.users().find(g=>g.email===s);if(a)return this.currentUser.set(a),this.saveCurrentUser(),a;const d={id:Date.now().toString(),name:n.trim(),email:s.trim().toLowerCase(),hasLiked:!1,hasViewed:!1,viewedAt:new Date};return this.users.update(g=>[...g,d]),this.currentUser.set(d),this.saveUsers(),this.saveCurrentUser(),d}markAsViewed(n){this.users.update(s=>s.map(a=>a.id===n?{...a,hasViewed:!0,viewedAt:new Date}:a)),this.saveUsers()}toggleLike(n){let s=!1;return this.users.update(a=>a.map(d=>d.id===n?(s=!d.hasLiked,{...d,hasLiked:s}):d)),this.saveUsers(),s}getCurrentUser(){return this.currentUser()}logout(){this.currentUser.set(null),localStorage.removeItem(this.CURRENT_USER_KEY)}getUserById(n){return this.users().find(s=>s.id===n)}clearAllData(){this.users.set([]),this.currentUser.set(null),localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.CURRENT_USER_KEY)}}return u.\u0275fac=function(n){return new(n||u)},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);