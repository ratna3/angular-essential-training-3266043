"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[347],{4347:(f,g,l)=>{l.r(g),l.d(g,{LandingComponent:()=>c});var d=l(6814),e=l(4946),a=l(95),m=l(6538),r=l(3076);function s(i,h){if(1&i&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors().name," ")}}function o(i,h){if(1&i&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors().email," ")}}function u(i,h){1&i&&e._UZ(0,"span",21)}let c=(()=>{class i{constructor(t,n){this.userService=t,this.router=n,this.name=(0,e.tdS)(""),this.email=(0,e.tdS)(""),this.errors=(0,e.tdS)({}),this.isSubmitting=(0,e.tdS)(!1)}onSubmit(){if(this.validateForm()){this.isSubmitting.set(!0);try{this.userService.createUser(this.name(),this.email()),this.router.navigate(["/announcement"])}catch(t){console.error("Error creating user:",t)}finally{this.isSubmitting.set(!1)}}}validateForm(){const t={};return this.name().trim()?this.name().trim().length<2&&(t.name="Name must be at least 2 characters"):t.name="Name is required",this.email().trim()?this.isValidEmail(this.email().trim())||(t.email="Please enter a valid email address"):t.email="Email is required",this.errors.set(t),0===Object.keys(t).length}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}updateName(t){this.name.set(t),this.errors().name&&this.errors.update(n=>({...n,name:void 0}))}updateEmail(t){this.email.set(t),this.errors().email&&this.errors.update(n=>({...n,email:void 0}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.K),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-landing"]],standalone:!0,features:[e.jDz],decls:28,vars:11,consts:[[1,"container-fluid","vh-100","d-flex","align-items-center","justify-content-center","bg-light"],[1,"card","shadow-lg",2,"max-width","500px","width","100%"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"h2","text-primary","mb-3"],[1,"bi","bi-megaphone-fill"],[1,"text-muted"],[3,"ngSubmit"],["userForm","ngForm"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","placeholder","Enter your full name","required","",1,"form-control",3,"value","input"],["class","invalid-feedback",4,"ngIf"],[1,"mb-4"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Enter your email address","required","",1,"form-control",3,"value","input"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/admin",1,"text-decoration-none"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e._UZ(5,"i",5),e._uU(6," Announcement Portal "),e.qZA(),e.TgZ(7,"p",6),e._uU(8,"Enter your details to access the latest announcements"),e.qZA()(),e.TgZ(9,"form",7,8),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(11,"div",9)(12,"label",10),e._uU(13,"Full Name"),e.qZA(),e.TgZ(14,"input",11),e.NdJ("input",function(p){return n.updateName(p.target.value)}),e.qZA(),e.YNc(15,s,2,1,"div",12),e.qZA(),e.TgZ(16,"div",13)(17,"label",14),e._uU(18,"Email Address"),e.qZA(),e.TgZ(19,"input",15),e.NdJ("input",function(p){return n.updateEmail(p.target.value)}),e.qZA(),e.YNc(20,o,2,1,"div",12),e.qZA(),e.TgZ(21,"button",16),e.YNc(22,u,1,0,"span",17),e._uU(23),e.qZA()(),e.TgZ(24,"div",18)(25,"small",6)(26,"a",19),e._uU(27,"Admin Login"),e.qZA()()()()()()),2&t&&(e.xp6(14),e.ekj("is-invalid",n.errors().name),e.Q6J("value",n.name()),e.xp6(1),e.Q6J("ngIf",n.errors().name),e.xp6(4),e.ekj("is-invalid",n.errors().email),e.Q6J("value",n.email()),e.xp6(1),e.Q6J("ngIf",n.errors().email),e.xp6(1),e.Q6J("disabled",n.isSubmitting()),e.xp6(1),e.Q6J("ngIf",n.isSubmitting()),e.xp6(1),e.hij(" ",n.isSubmitting()?"Processing...":"Access Announcements"," "))},dependencies:[d.ez,d.O5,a.u5,a._Y,a.JL,a.F,m.Bz,m.rH],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:15px}.btn-primary[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:12px}.form-control[_ngcontent-%COMP%]:focus{border-color:#0d6efd;box-shadow:0 0 0 .25rem #0d6efd26}.bg-light[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)!important}h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}"]}),i})()},3076:(f,g,l)=>{l.d(g,{K:()=>e});var d=l(4946);let e=(()=>{class a{constructor(){this.STORAGE_KEY="announcement-portal-users",this.CURRENT_USER_KEY="announcement-portal-current-user",this.users=(0,d.tdS)(this.loadUsers()),this.currentUser=(0,d.tdS)(this.loadCurrentUser()),this.users$=this.users.asReadonly(),this.currentUser$=this.currentUser.asReadonly(),this.viewedUsers=(0,d.Flj)(()=>this.users().filter(r=>r.hasViewed))}loadUsers(){const r=localStorage.getItem(this.STORAGE_KEY);return r?JSON.parse(r):[]}loadCurrentUser(){const r=localStorage.getItem(this.CURRENT_USER_KEY);return r?JSON.parse(r):null}saveUsers(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.users()))}saveCurrentUser(){localStorage.setItem(this.CURRENT_USER_KEY,JSON.stringify(this.currentUser()))}createUser(r,s){const o=this.users().find(c=>c.email===s);if(o)return this.currentUser.set(o),this.saveCurrentUser(),o;const u={id:Date.now().toString(),name:r.trim(),email:s.trim().toLowerCase(),hasLiked:!1,hasViewed:!1,viewedAt:new Date};return this.users.update(c=>[...c,u]),this.currentUser.set(u),this.saveUsers(),this.saveCurrentUser(),u}markAsViewed(r){this.users.update(s=>s.map(o=>o.id===r?{...o,hasViewed:!0,viewedAt:new Date}:o)),this.saveUsers()}toggleLike(r){let s=!1;return this.users.update(o=>o.map(u=>u.id===r?(s=!u.hasLiked,{...u,hasLiked:s}):u)),this.saveUsers(),s}getCurrentUser(){return this.currentUser()}logout(){this.currentUser.set(null),localStorage.removeItem(this.CURRENT_USER_KEY)}getUserById(r){return this.users().find(s=>s.id===r)}clearAllData(){this.users.set([]),this.currentUser.set(null),localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.CURRENT_USER_KEY)}}return a.\u0275fac=function(r){return new(r||a)},a.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);