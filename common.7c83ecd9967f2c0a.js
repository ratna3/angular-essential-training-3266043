"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[592],{5565:(m,u,o)=>{o.d(u,{l:()=>c});var a=o(4946);let c=(()=>{class s{constructor(){this.ADMIN_SESSION_KEY="announcement-portal-admin-session",this.adminCredentials={username:"adminIndia",password:"Indi@446"},this.isLoggedIn=(0,a.tdS)(this.loadAdminSession()),this.isLoggedIn$=this.isLoggedIn.asReadonly()}loadAdminSession(){return"true"===localStorage.getItem(this.ADMIN_SESSION_KEY)}saveAdminSession(e){e?localStorage.setItem(this.ADMIN_SESSION_KEY,"true"):localStorage.removeItem(this.ADMIN_SESSION_KEY)}login(e,t){const n=e===this.adminCredentials.username&&t===this.adminCredentials.password;return n&&(this.isLoggedIn.set(!0),this.saveAdminSession(!0)),n}logout(){this.isLoggedIn.set(!1),this.saveAdminSession(!1)}isAuthenticated(){return this.isLoggedIn()}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},9615:(m,u,o)=>{o.d(u,{X:()=>c});var a=o(4946);let c=(()=>{class s{constructor(){this.STORAGE_KEY="announcement-portal-announcements",this.announcements=(0,a.tdS)(this.loadAnnouncements()),this.announcements$=this.announcements.asReadonly()}loadAnnouncements(){const e=localStorage.getItem(this.STORAGE_KEY),t=e?JSON.parse(e):[];return 0===t.length&&(t.push({id:"1",title:"Welcome to Announcement Portal!",content:"This is your first announcement. Admin can update or delete this message anytime. Stay tuned for more exciting updates!",createdAt:new Date,updatedAt:new Date,likes:0,likedBy:[]}),this.saveAnnouncements(t)),t}saveAnnouncements(e){const t=e||this.announcements();localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}getLatestAnnouncement(){const e=this.announcements();return e.length>0?e[e.length-1]:null}getAllAnnouncements(){return this.announcements()}createOrUpdateAnnouncement(e,t){const n=new Date,r=this.getLatestAnnouncement();if(r){const h={...r,title:e.trim(),content:t.trim(),updatedAt:n};this.announcements.update(d=>d.map(S=>S.id===r.id?h:S))}else{const h={id:Date.now().toString(),title:e.trim(),content:t.trim(),createdAt:n,updatedAt:n,likes:0,likedBy:[]};this.announcements.update(d=>[...d,h])}return this.saveAnnouncements(),this.getLatestAnnouncement()}deleteAnnouncement(e){const t=this.announcements().length;return this.announcements.update(n=>n.filter(r=>r.id!==e)),this.saveAnnouncements(),this.announcements().length<t}deleteLatestAnnouncement(){const e=this.getLatestAnnouncement();return!!e&&this.deleteAnnouncement(e.id)}toggleLike(e,t){let n=!1;return this.announcements.update(r=>r.map(i=>i.id===e?i.likedBy.indexOf(t)>-1?{...i,likes:i.likes-1,likedBy:i.likedBy.filter(d=>d!==t)}:(n=!0,{...i,likes:i.likes+1,likedBy:[...i.likedBy,t]}):i)),this.saveAnnouncements(),n}hasUserLiked(e,t){const n=this.announcements().find(r=>r.id===e);return!!n&&n.likedBy.includes(t)}hasAnnouncements(){return this.announcements().length>0}clearAllData(){this.announcements.set([]),localStorage.removeItem(this.STORAGE_KEY)}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},3076:(m,u,o)=>{o.d(u,{K:()=>c});var a=o(4946);let c=(()=>{class s{constructor(){this.STORAGE_KEY="announcement-portal-users",this.CURRENT_USER_KEY="announcement-portal-current-user",this.users=(0,a.tdS)(this.loadUsers()),this.currentUser=(0,a.tdS)(this.loadCurrentUser()),this.users$=this.users.asReadonly(),this.currentUser$=this.currentUser.asReadonly(),this.viewedUsers=(0,a.Flj)(()=>this.users().filter(e=>e.hasViewed))}loadUsers(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):[]}loadCurrentUser(){const e=localStorage.getItem(this.CURRENT_USER_KEY);return e?JSON.parse(e):null}saveUsers(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.users()))}saveCurrentUser(){localStorage.setItem(this.CURRENT_USER_KEY,JSON.stringify(this.currentUser()))}createUser(e,t){const n=this.users().find(i=>i.email===t);if(n)return this.currentUser.set(n),this.saveCurrentUser(),n;const r={id:Date.now().toString(),name:e.trim(),email:t.trim().toLowerCase(),hasLiked:!1,hasViewed:!1,viewedAt:new Date};return this.users.update(i=>[...i,r]),this.currentUser.set(r),this.saveUsers(),this.saveCurrentUser(),r}markAsViewed(e){this.users.update(t=>t.map(n=>n.id===e?{...n,hasViewed:!0,viewedAt:new Date}:n)),this.saveUsers()}toggleLike(e){let t=!1;return this.users.update(n=>n.map(r=>r.id===e?(t=!r.hasLiked,{...r,hasLiked:t}):r)),this.saveUsers(),t}getCurrentUser(){return this.currentUser()}logout(){this.currentUser.set(null),localStorage.removeItem(this.CURRENT_USER_KEY)}getUserById(e){return this.users().find(t=>t.id===e)}clearAllData(){this.users.set([]),this.currentUser.set(null),localStorage.removeItem(this.STORAGE_KEY),localStorage.removeItem(this.CURRENT_USER_KEY)}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=a.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);