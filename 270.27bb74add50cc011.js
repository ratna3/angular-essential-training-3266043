"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[270],{5123:(p,u,s)=>{s.d(u,{P:()=>m});const m=[{id:1,name:"MINISTER",displayName:"Hon'ble Minister",seniorityLevel:1,department:"Irrigation Department",description:"Highest authority in the department"},{id:2,name:"PRINCIPAL_SECRETARY",displayName:"Principal Secretary",seniorityLevel:2,department:"Irrigation Department",description:"Administrative head of the department"},{id:3,name:"CHIEF_ENGINEER_I",displayName:"Chief Engineer-I",seniorityLevel:3,department:"Technical Division",description:"Senior technical authority"},{id:4,name:"CHIEF_ENGINEER_II",displayName:"Chief Engineer-II",seniorityLevel:4,department:"Technical Division",description:"Technical division head"},{id:5,name:"SENIOR_STAFF_OFFICER",displayName:"Senior Staff Officer",seniorityLevel:5,department:"Administrative Division",description:"Senior administrative officer"},{id:6,name:"SUPERINTENDING_ENGINEER",displayName:"Superintending Engineer",seniorityLevel:6,department:"Technical Division",description:"Regional technical head"},{id:7,name:"EXECUTIVE_ENGINEER",displayName:"Executive Engineer",seniorityLevel:7,department:"Technical Division",description:"Field technical officer"},{id:8,name:"ASSISTANT_ENGINEER",displayName:"Assistant Engineer",seniorityLevel:8,department:"Technical Division",description:"Junior technical officer"},{id:9,name:"JUNIOR_ENGINEER",displayName:"Junior Engineer",seniorityLevel:9,department:"Technical Division",description:"Entry-level technical position"},{id:10,name:"CLERICAL_STAFF",displayName:"Clerical Staff",seniorityLevel:10,department:"Administrative Division",description:"Administrative support staff"}]},5270:(p,u,s)=>{s.r(u),s.d(u,{AdminLoginComponent:()=>a});var m=s(6814),r=s(95),e=s(4946),d=s(5565),g=s(6538);function i(t,l){if(1&t&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&t){const c=e.oxw();e.xp6(1),e.hij(" ",c.errorMessage," ")}}function n(t,l){1&t&&e._UZ(0,"span",23)}let a=(()=>{class t{constructor(c,o){this.adminService=c,this.router=o,this.usernameValue="",this.passwordValue="",this.errorMessage="",this.isSubmitting=!1}onSubmit(){this.usernameValue.trim()&&this.passwordValue.trim()?(this.isSubmitting=!0,this.errorMessage="",setTimeout(()=>{this.adminService.login(this.usernameValue.trim(),this.passwordValue)?this.router.navigate(["/admin/dashboard"]):this.errorMessage="Invalid username or password",this.isSubmitting=!1},500)):this.errorMessage="Please enter both username and password"}updateUsername(){this.errorMessage&&(this.errorMessage="")}updatePassword(){this.errorMessage&&(this.errorMessage="")}goBack(){this.router.navigate(["/"])}}return t.\u0275fac=function(c){return new(c||t)(e.Y36(d.l),e.Y36(g.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-login"]],standalone:!0,features:[e.jDz],decls:35,vars:10,consts:[[1,"container-fluid","vh-100","d-flex","align-items-center","justify-content-center","bg-dark"],[1,"card","shadow-lg",2,"max-width","400px","width","100%"],[1,"card-body","p-4"],[1,"text-center","mb-4"],[1,"h3","text-danger","mb-3"],[1,"bi","bi-shield-lock-fill"],[1,"text-muted"],[3,"ngSubmit"],["adminForm","ngForm"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","name","username","placeholder","Enter admin username","required","","autocomplete","username",1,"form-control",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],["type","password","id","password","name","password","placeholder","Enter admin password","required","","autocomplete","current-password",1,"form-control",3,"ngModel","ngModelChange"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-danger","w-100","py-2","mb-3",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center"],[1,"btn","btn-link","text-muted",3,"click"],[1,"bi","bi-arrow-left","me-1"],[1,"mt-4","p-3","bg-light","rounded"],[1,"text-muted","d-block","text-center"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(c,o){1&c&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e._UZ(5,"i",5),e._uU(6," Admin Login "),e.qZA(),e.TgZ(7,"p",6),e._uU(8,"Secure access to admin dashboard"),e.qZA()(),e.TgZ(9,"form",7,8),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(11,"div",9)(12,"label",10),e._uU(13,"Username"),e.qZA(),e.TgZ(14,"input",11),e.NdJ("ngModelChange",function(A){return o.usernameValue=A})("ngModelChange",function(){return o.updateUsername()}),e.qZA()(),e.TgZ(15,"div",9)(16,"label",12),e._uU(17,"Password"),e.qZA(),e.TgZ(18,"input",13),e.NdJ("ngModelChange",function(A){return o.passwordValue=A})("ngModelChange",function(){return o.updatePassword()}),e.qZA(),e.YNc(19,i,2,1,"div",14),e.qZA(),e.TgZ(20,"button",15),e.YNc(21,n,1,0,"span",16),e._uU(22),e.qZA()(),e.TgZ(23,"div",17)(24,"button",18),e.NdJ("click",function(){return o.goBack()}),e._UZ(25,"i",19),e._uU(26," Back to Landing Page "),e.qZA()(),e.TgZ(27,"div",20)(28,"small",21)(29,"strong"),e._uU(30,"Demo Credentials:"),e.qZA(),e._UZ(31,"br"),e._uU(32," Username: adminIndia"),e._UZ(33,"br"),e._uU(34," Password: Indi@446 "),e.qZA()()()()()),2&c&&(e.xp6(14),e.ekj("is-invalid",o.errorMessage),e.Q6J("ngModel",o.usernameValue),e.xp6(4),e.ekj("is-invalid",o.errorMessage),e.Q6J("ngModel",o.passwordValue),e.xp6(1),e.Q6J("ngIf",o.errorMessage),e.xp6(1),e.Q6J("disabled",o.isSubmitting),e.xp6(1),e.Q6J("ngIf",o.isSubmitting),e.xp6(1),e.hij(" ",o.isSubmitting?"Authenticating...":"Login"," "))},dependencies:[m.ez,m.O5,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.On,r.F],styles:[".bg-dark[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c3e50 0%,#34495e 100%)!important}.card[_ngcontent-%COMP%]{border:none;border-radius:15px}.btn-danger[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:12px}.form-control[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354526}h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.btn-link[_ngcontent-%COMP%]{text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),t})()},5565:(p,u,s)=>{s.d(u,{l:()=>e});var m=s(4946),r=s(7879);let e=(()=>{class d{constructor(i){this.hierarchicalAdminService=i,this.ADMIN_SESSION_KEY="announcement-portal-admin-session",this.legacyAdminCredentials={username:"admin",password:"admin123"},this.isLoggedIn=(0,m.tdS)(this.loadAdminSession()),this.currentAdminSignal=(0,m.tdS)(null),this.isLoggedIn$=this.isLoggedIn.asReadonly(),this.currentAdmin$=this.currentAdminSignal.asReadonly(),this.loadCurrentAdmin()}loadAdminSession(){return null!==this.hierarchicalAdminService.getCurrentAdmin()}loadCurrentAdmin(){const i=this.hierarchicalAdminService.getCurrentAdmin();i&&(this.currentAdminSignal.set(i),this.isLoggedIn.set(!0))}login(i,n){const a=this.hierarchicalAdminService.login(i,n);if(a)return this.currentAdminSignal.set(a),this.isLoggedIn.set(!0),!0;if((i===this.legacyAdminCredentials.username||"admin@announcement.com"===i)&&n===this.legacyAdminCredentials.password){const l=this.hierarchicalAdminService.getAdminById("admin-legacy");if(l)return this.currentAdminSignal.set(l),this.isLoggedIn.set(!0),!0}return!1}logout(){this.hierarchicalAdminService.logout(),this.isLoggedIn.set(!1),this.currentAdminSignal.set(null)}isAuthenticated(){return this.isLoggedIn()}getCurrentAdmin(){return this.currentAdminSignal()}canEditAnnouncement(i){const n=this.getCurrentAdmin();return!!n&&this.hierarchicalAdminService.canEditAnnouncement(n,i)}canDeleteAnnouncement(i){const n=this.getCurrentAdmin();return!!n&&this.hierarchicalAdminService.canDeleteAnnouncement(n,i)}canViewAnnouncement(i){const n=this.getCurrentAdmin();return!!n&&this.hierarchicalAdminService.canViewAnnouncement(n,i)}}return d.\u0275fac=function(i){return new(i||d)(m.LFG(r.X))},d.\u0275prov=m.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},7879:(p,u,s)=>{s.d(u,{X:()=>e});var m=s(4946),r=s(5123);let e=(()=>{class d{constructor(){this.STORAGE_KEY="hierarchical_admins",this.CURRENT_ADMIN_KEY="current_hierarchical_admin",this.adminUsersSignal=(0,m.tdS)([]),this.currentAdminSignal=(0,m.tdS)(null),this.initializeDefaultAdmins(),this.loadCurrentAdmin()}initializeDefaultAdmins(){const i=this.getStoredAdmins();if(0===i.length){const n=[{id:"admin-001",username:"minister",email:"minister@irrigation.up.gov.in",password:"minister123",role:r.P[0],fullName:"Hon. Irrigation Minister",employeeId:"MIN-001",department:"Irrigation Department",isActive:!0,createdAt:new Date,lastLogin:new Date},{id:"admin-002",username:"principal_secretary",email:"ps@irrigation.up.gov.in",password:"ps123",role:r.P[1],fullName:"Principal Secretary",employeeId:"PS-001",department:"Irrigation Department",isActive:!0,createdAt:new Date},{id:"admin-003",username:"ce1",email:"ce1@irrigation.up.gov.in",password:"ce1123",role:r.P[2],fullName:"Chief Engineer-I",employeeId:"CE1-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-004",username:"ce2",email:"ce2@irrigation.up.gov.in",password:"ce2123",role:r.P[3],fullName:"Chief Engineer-II",employeeId:"CE2-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-005",username:"sso",email:"sso@irrigation.up.gov.in",password:"sso123",role:r.P[4],fullName:"Senior Staff Officer",employeeId:"SSO-001",department:"Administrative Division",isActive:!0,createdAt:new Date},{id:"admin-006",username:"se",email:"se@irrigation.up.gov.in",password:"se123",role:r.P[5],fullName:"Superintending Engineer",employeeId:"SE-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-007",username:"ee",email:"ee@irrigation.up.gov.in",password:"ee123",role:r.P[6],fullName:"Executive Engineer",employeeId:"EE-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-legacy",username:"admin",email:"admin@announcement.com",password:"admin123",role:r.P[2],fullName:"System Administrator",employeeId:"ADMIN-001",department:"IT Division",isActive:!0,createdAt:new Date}];this.saveAdmins(n),this.adminUsersSignal.set(n)}else this.adminUsersSignal.set(i)}login(i,n){const t=this.adminUsersSignal().find(l=>(l.email===i||l.username===i)&&l.password===n&&l.isActive);return t?(t.lastLogin=new Date,this.currentAdminSignal.set(t),localStorage.setItem(this.CURRENT_ADMIN_KEY,JSON.stringify(t)),this.updateAdmin(t),t):null}logout(){this.currentAdminSignal.set(null),localStorage.removeItem(this.CURRENT_ADMIN_KEY)}getCurrentAdmin(){return this.currentAdminSignal()}getSubordinateAdmins(i){return this.adminUsersSignal().filter(a=>a.role.seniorityLevel>i.role.seniorityLevel&&a.isActive)}canViewAnnouncement(i,n){return i.role.seniorityLevel<=n.role.seniorityLevel}canEditAnnouncement(i,n){return i.id===n.id||i.role.seniorityLevel<n.role.seniorityLevel}canDeleteAnnouncement(i,n){return i.id===n.id||i.role.seniorityLevel<n.role.seniorityLevel}getAdminsByDepartment(){const i=this.adminUsersSignal(),n={};return i.forEach(a=>{n[a.department]||(n[a.department]=[]),n[a.department].push(a)}),Object.keys(n).forEach(a=>{n[a].sort((t,l)=>t.role.seniorityLevel-l.role.seniorityLevel)}),n}getHierarchyTree(){return this.getAdminsByDepartment()}getAllRoles(){return r.P}getRoleById(i){return r.P.find(n=>n.id===i)}getAdminById(i){return this.adminUsersSignal().find(n=>n.id===i)}loadCurrentAdmin(){const i=localStorage.getItem(this.CURRENT_ADMIN_KEY);if(i)try{const n=JSON.parse(i);this.currentAdminSignal.set(n)}catch(n){console.error("Error loading current admin:",n),localStorage.removeItem(this.CURRENT_ADMIN_KEY)}}getStoredAdmins(){const i=localStorage.getItem(this.STORAGE_KEY);if(i)try{return JSON.parse(i)}catch(n){return console.error("Error parsing stored admins:",n),[]}return[]}saveAdmins(i){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i)),this.adminUsersSignal.set(i)}updateAdmin(i){const n=this.adminUsersSignal(),a=n.findIndex(t=>t.id===i.id);-1!==a&&(n[a]=i,this.saveAdmins(n))}}return d.\u0275fac=function(i){return new(i||d)},d.\u0275prov=m.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);