"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[27],{7027:(U,l,o)=>{o.r(l),o.d(l,{AdminDashboardComponent:()=>T});var c=o(6814),e=o(4946),d=o(95),m=o(5565),u=o(9615),g=o(3076),_=o(4670);function p(n,r){if(1&n&&(e.TgZ(0,"div",44),e._UZ(1,"i",45),e._uU(2),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.successMessage()," ")}}function b(n,r){1&n&&e._UZ(0,"span",46)}function h(n,r){if(1&n&&(e.TgZ(0,"div",12)(1,"h6",47),e._uU(2),e.qZA(),e.TgZ(3,"p",48),e._uU(4),e.qZA(),e.TgZ(5,"div",49)(6,"span"),e._UZ(7,"i",50),e._uU(8),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA()()()),2&n){const t=r.ngIf,i=e.oxw();e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.content),e.xp6(4),e.hij(" ",t.likes," "),e.xp6(2),e.hij("Updated: ",i.formatDate(t.updatedAt),"")}}function v(n,r){1&n&&(e.TgZ(0,"div",51)(1,"small"),e._uU(2,"No viewers yet"),e.qZA()())}function f(n,r){1&n&&(e.TgZ(0,"small",60),e._UZ(1,"i",61),e.qZA())}function Z(n,r){if(1&n&&(e.TgZ(0,"div",54),e._UZ(1,"i",55),e.TgZ(2,"div",56)(3,"small",57),e._uU(4),e.qZA(),e.TgZ(5,"small",58),e._uU(6),e.qZA()(),e.YNc(7,f,2,0,"small",59),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(i.formatDate(t.viewedAt)),e.xp6(1),e.Q6J("ngIf",t.hasLiked)}}function A(n,r){if(1&n&&(e.TgZ(0,"div",62)(1,"small",58),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("+",t.viewedUsers().length-5," more viewers")}}function x(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Z,8,3,"div",52),e.YNc(2,A,3,1,"div",53),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.viewedUsers().slice(-5)),e.xp6(1),e.Q6J("ngIf",t.viewedUsers().length>5)}}let T=(()=>{class n{constructor(t,i,a,s){this.adminService=t,this.announcementService=i,this.userService=a,this.router=s,this.title=(0,e.tdS)(""),this.content=(0,e.tdS)(""),this.isSubmitting=(0,e.tdS)(!1),this.successMessage=(0,e.tdS)(""),this.currentAnnouncement=(0,e.tdS)(null),this.viewedUsers=this.userService.viewedUsers}ngOnInit(){this.adminService.isAuthenticated()?this.loadCurrentAnnouncement():this.router.navigate(["/admin"])}loadCurrentAnnouncement(){const t=this.announcementService.getLatestAnnouncement();this.currentAnnouncement.set(t),t&&(this.title.set(t.title),this.content.set(t.content))}onSubmit(){if(this.title().trim()&&this.content().trim()){this.isSubmitting.set(!0),this.successMessage.set("");try{const t=this.announcementService.createOrUpdateAnnouncement(this.title().trim(),this.content().trim());this.currentAnnouncement.set(t),this.successMessage.set("Announcement updated successfully!"),setTimeout(()=>{this.successMessage.set("")},3e3)}catch(t){console.error("Error updating announcement:",t)}finally{this.isSubmitting.set(!1)}}}logout(){this.adminService.logout(),this.router.navigate(["/admin"])}updateTitle(t){this.title.set(t)}updateContent(t){this.content.set(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}getTotalLikes(){const t=this.currentAnnouncement();return t?t.likes:0}getTotalViewers(){return this.viewedUsers().length}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.l),e.Y36(u.X),e.Y36(g.K),e.Y36(_.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-dashboard"]],standalone:!0,features:[e.jDz],decls:73,vars:11,consts:[[1,"container-fluid","min-vh-100","bg-light"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-danger"],[1,"container"],["href","#",1,"navbar-brand"],[1,"bi","bi-shield-check-fill","me-2"],[1,"navbar-nav","ms-auto"],[1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"container","py-4"],[1,"row","mb-4"],[1,"col-md-4"],[1,"card","text-center","border-primary"],[1,"card-body"],[1,"bi","bi-people-fill","display-4","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],[1,"card","text-center","border-danger"],[1,"bi","bi-heart-fill","display-4","text-danger"],[1,"card","text-center","border-success"],[1,"bi","bi-megaphone-fill","display-4","text-success"],[1,"row"],[1,"col-lg-8"],[1,"card","shadow-sm"],[1,"card-header","bg-white"],[1,"mb-0"],[1,"bi","bi-pencil-square","me-2"],["class","alert alert-success alert-dismissible",4,"ngIf"],[3,"ngSubmit"],["announcementForm","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Enter announcement title","required","",1,"form-control",3,"value","input"],[1,"mb-4"],["for","content",1,"form-label"],["id","content","rows","6","placeholder","Enter announcement content...","required","",1,"form-control",3,"value","input"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"col-lg-4"],[1,"bi","bi-eye-fill","me-2"],["class","card-body",4,"ngIf"],[1,"card","shadow-sm","mt-3"],[1,"bi","bi-clock-history","me-2"],["class","text-center text-muted py-2",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-success","alert-dismissible"],[1,"bi","bi-check-circle-fill","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"text-primary"],[1,"small","text-muted","mb-2"],[1,"d-flex","justify-content-between","text-muted","small"],[1,"bi","bi-heart-fill","text-danger"],[1,"text-center","text-muted","py-2"],["class","d-flex align-items-center mb-2",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],[1,"bi","bi-person-circle","text-primary","me-2"],[1,"flex-grow-1"],[1,"d-block"],[1,"text-muted"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"bi","bi-heart-fill"],[1,"text-center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e._uU(5," Admin Dashboard "),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return i.logout()}),e._UZ(8,"i",7),e._uU(9," Logout "),e.qZA()()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),e._UZ(15,"i",13),e.TgZ(16,"h3",14),e._uU(17),e.qZA(),e.TgZ(18,"p",15),e._uU(19,"Total Viewers"),e.qZA()()()(),e.TgZ(20,"div",10)(21,"div",16)(22,"div",12),e._UZ(23,"i",17),e.TgZ(24,"h3",14),e._uU(25),e.qZA(),e.TgZ(26,"p",15),e._uU(27,"Total Likes"),e.qZA()()()(),e.TgZ(28,"div",10)(29,"div",18)(30,"div",12),e._UZ(31,"i",19),e.TgZ(32,"h3",14),e._uU(33,"1"),e.qZA(),e.TgZ(34,"p",15),e._uU(35,"Active Announcement"),e.qZA()()()()(),e.TgZ(36,"div",20)(37,"div",21)(38,"div",22)(39,"div",23)(40,"h5",24),e._UZ(41,"i",25),e._uU(42," Update Announcement "),e.qZA()(),e.TgZ(43,"div",12),e.YNc(44,p,3,1,"div",26),e.TgZ(45,"form",27,28),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(47,"div",29)(48,"label",30),e._uU(49,"Announcement Title"),e.qZA(),e.TgZ(50,"input",31),e.NdJ("input",function(s){return i.updateTitle(s.target.value)}),e.qZA()(),e.TgZ(51,"div",32)(52,"label",33),e._uU(53,"Announcement Content"),e.qZA(),e.TgZ(54,"textarea",34),e.NdJ("input",function(s){return i.updateContent(s.target.value)}),e.qZA()(),e.TgZ(55,"button",35),e.YNc(56,b,1,0,"span",36),e._uU(57),e.qZA()()()()(),e.TgZ(58,"div",37)(59,"div",22)(60,"div",23)(61,"h6",24),e._UZ(62,"i",38),e._uU(63," Current Announcement "),e.qZA()(),e.YNc(64,h,11,4,"div",39),e.qZA(),e.TgZ(65,"div",40)(66,"div",23)(67,"h6",24),e._UZ(68,"i",41),e._uU(69," Recent Viewers "),e.qZA()(),e.TgZ(70,"div",12),e.YNc(71,v,3,0,"div",42),e.YNc(72,x,3,2,"div",43),e.qZA()()()()()()),2&t&&(e.xp6(17),e.Oqu(i.getTotalViewers()),e.xp6(8),e.Oqu(i.getTotalLikes()),e.xp6(19),e.Q6J("ngIf",i.successMessage()),e.xp6(6),e.Q6J("value",i.title()),e.xp6(4),e.Q6J("value",i.content()),e.xp6(1),e.Q6J("disabled",i.isSubmitting()||!i.title().trim()||!i.content().trim()),e.xp6(1),e.Q6J("ngIf",i.isSubmitting()),e.xp6(1),e.hij(" ",i.isSubmitting()?"Updating...":"Update Announcement"," "),e.xp6(7),e.Q6J("ngIf",i.currentAnnouncement()),e.xp6(7),e.Q6J("ngIf",0===i.viewedUsers().length),e.xp6(1),e.Q6J("ngIf",i.viewedUsers().length>0))},dependencies:[c.ez,c.sg,c.O5,d.u5,d._Y,d.JL,d.F],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:12px;transition:all .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a!important}.navbar-brand[_ngcontent-%COMP%]{font-weight:600}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef}.form-control[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354526}.btn-danger[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.bg-light[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)!important}.alert[_ngcontent-%COMP%]{border-radius:8px;border:none}.border-primary[_ngcontent-%COMP%]{border-color:#0d6efd!important;border-width:2px!important}.border-danger[_ngcontent-%COMP%]{border-color:#dc3545!important;border-width:2px!important}.border-success[_ngcontent-%COMP%]{border-color:#198754!important;border-width:2px!important}"]}),n})()}}]);