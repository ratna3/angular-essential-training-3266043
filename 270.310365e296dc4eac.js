"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[270],{5123:(p,c,a)=>{a.d(c,{P:()=>l});const l=[{id:1,name:"MINISTER",displayName:"Hon'ble Minister",seniorityLevel:1,department:"Irrigation Department",description:"Highest authority in the department"},{id:2,name:"PRINCIPAL_SECRETARY",displayName:"Principal Secretary",seniorityLevel:2,department:"Irrigation Department",description:"Administrative head of the department"},{id:3,name:"CHIEF_ENGINEER_I",displayName:"Chief Engineer-I",seniorityLevel:3,department:"Technical Division",description:"Senior technical authority"},{id:4,name:"CHIEF_ENGINEER_II",displayName:"Chief Engineer-II",seniorityLevel:4,department:"Technical Division",description:"Technical division head"},{id:5,name:"SENIOR_STAFF_OFFICER",displayName:"Senior Staff Officer",seniorityLevel:5,department:"Administrative Division",description:"Senior administrative officer"},{id:6,name:"SUPERINTENDING_ENGINEER",displayName:"Superintending Engineer",seniorityLevel:6,department:"Technical Division",description:"Regional technical head"},{id:7,name:"EXECUTIVE_ENGINEER",displayName:"Executive Engineer",seniorityLevel:7,department:"Technical Division",description:"Field technical officer"},{id:8,name:"ASSISTANT_ENGINEER",displayName:"Assistant Engineer",seniorityLevel:8,department:"Technical Division",description:"Junior technical officer"},{id:9,name:"JUNIOR_ENGINEER",displayName:"Junior Engineer",seniorityLevel:9,department:"Technical Division",description:"Entry-level technical position"},{id:10,name:"CLERICAL_STAFF",displayName:"Clerical Staff",seniorityLevel:10,department:"Administrative Division",description:"Administrative support staff"}]},5270:(p,c,a)=>{a.r(c),a.d(c,{AdminLoginComponent:()=>r});var l=a(6814),e=a(4946),u=a(95),s=a(5565),g=a(6538);function i(t,o){if(1&t&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&t){const m=e.oxw();e.xp6(1),e.hij(" ",m.error()," ")}}function n(t,o){1&t&&e._UZ(0,"span",24)}let r=(()=>{class t{constructor(m,d){this.adminService=m,this.router=d,this.username=(0,e.tdS)(""),this.password=(0,e.tdS)(""),this.error=(0,e.tdS)(""),this.isSubmitting=(0,e.tdS)(!1)}onSubmit(){this.username().trim()&&this.password().trim()?(this.isSubmitting.set(!0),this.error.set(""),setTimeout(()=>{this.adminService.login(this.username().trim(),this.password())?this.router.navigate(["/admin/dashboard"]):this.error.set("Invalid username or password"),this.isSubmitting.set(!1)},500)):this.error.set("Please enter both username and password")}updateUsername(m){this.username.set(m),this.error()&&this.error.set("")}updatePassword(m){this.password.set(m),this.error()&&this.error.set("")}goBack(){this.router.navigate(["/"])}}return t.\u0275fac=function(m){return new(m||t)(e.Y36(s.l),e.Y36(g.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-login"]],standalone:!0,features:[e.jDz],decls:37,vars:10,consts:[[1,"container-fluid","vh-100","d-flex","align-items-center","justify-content-center","bg-dark"],[1,"card","shadow-lg",2,"max-width","400px","width","100%"],[1,"card-body","p-4"],[1,"text-center","mb-4"],[1,"mb-3"],["src","assets/UPIDlogo.svg","alt","UPID Logo",2,"height","60px","width","auto"],[1,"h3","text-danger","mb-3"],[1,"bi","bi-shield-lock-fill"],[1,"text-muted"],[3,"ngSubmit"],["adminForm","ngForm"],["for","username",1,"form-label"],["type","text","id","username","placeholder","Enter admin username","required","","autocomplete","username",1,"form-control",3,"value","input"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Enter admin password","required","","autocomplete","current-password",1,"form-control",3,"value","input"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-danger","w-100","py-2","mb-3",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"text-center"],[1,"btn","btn-link","text-muted",3,"click"],[1,"bi","bi-arrow-left","me-1"],[1,"mt-4","p-3","bg-light","rounded"],[1,"text-muted","d-block","text-center"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(m,d){1&m&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"h1",6),e._UZ(7,"i",7),e._uU(8," UPID Admin Login "),e.qZA(),e.TgZ(9,"p",8),e._uU(10,"Secure access to admin dashboard"),e.qZA()(),e.TgZ(11,"form",9,10),e.NdJ("ngSubmit",function(){return d.onSubmit()}),e.TgZ(13,"div",4)(14,"label",11),e._uU(15,"Username"),e.qZA(),e.TgZ(16,"input",12),e.NdJ("input",function(A){return d.updateUsername(A.target.value)}),e.qZA()(),e.TgZ(17,"div",4)(18,"label",13),e._uU(19,"Password"),e.qZA(),e.TgZ(20,"input",14),e.NdJ("input",function(A){return d.updatePassword(A.target.value)}),e.qZA(),e.YNc(21,i,2,1,"div",15),e.qZA(),e.TgZ(22,"button",16),e.YNc(23,n,1,0,"span",17),e._uU(24),e.qZA()(),e.TgZ(25,"div",18)(26,"button",19),e.NdJ("click",function(){return d.goBack()}),e._UZ(27,"i",20),e._uU(28," Back to Landing Page "),e.qZA()(),e.TgZ(29,"div",21)(30,"small",22)(31,"strong"),e._uU(32,"Demo Credentials:"),e.qZA(),e._UZ(33,"br"),e._uU(34," Username: adminIndia"),e._UZ(35,"br"),e._uU(36," Password: Indi@446 "),e.qZA()()()()()),2&m&&(e.xp6(16),e.ekj("is-invalid",d.error()),e.Q6J("value",d.username()),e.xp6(4),e.ekj("is-invalid",d.error()),e.Q6J("value",d.password()),e.xp6(1),e.Q6J("ngIf",d.error()),e.xp6(1),e.Q6J("disabled",d.isSubmitting()),e.xp6(1),e.Q6J("ngIf",d.isSubmitting()),e.xp6(1),e.hij(" ",d.isSubmitting()?"Authenticating...":"Login"," "))},dependencies:[l.ez,l.O5,u.u5,u._Y,u.JL,u.F],styles:[".bg-dark[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2c3e50 0%,#34495e 100%)!important}.card[_ngcontent-%COMP%]{border:none;border-radius:15px}.btn-danger[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef;padding:12px}.form-control[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354526}h1[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:10px}.btn-link[_ngcontent-%COMP%]{text-decoration:none}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),t})()},5565:(p,c,a)=>{a.d(c,{l:()=>u});var l=a(4946),e=a(7879);let u=(()=>{class s{constructor(i){this.hierarchicalAdminService=i,this.ADMIN_SESSION_KEY="announcement-portal-admin-session",this.legacyAdminCredentials={username:"admin",password:"admin123"},this.isLoggedIn=(0,l.tdS)(this.loadAdminSession()),this.currentAdminSignal=(0,l.tdS)(null),this.isLoggedIn$=this.isLoggedIn.asReadonly(),this.currentAdmin$=this.currentAdminSignal.asReadonly(),this.loadCurrentAdmin()}loadAdminSession(){return null!==this.hierarchicalAdminService.getCurrentAdmin()}loadCurrentAdmin(){const i=this.hierarchicalAdminService.getCurrentAdmin();i&&(this.currentAdminSignal.set(i),this.isLoggedIn.set(!0))}login(i,n){const r=this.hierarchicalAdminService.login(i,n);if(r)return this.currentAdminSignal.set(r),this.isLoggedIn.set(!0),!0;if((i===this.legacyAdminCredentials.username||"admin@announcement.com"===i)&&n===this.legacyAdminCredentials.password){const o=this.hierarchicalAdminService.getAdminById("admin-legacy");if(o)return this.currentAdminSignal.set(o),this.isLoggedIn.set(!0),!0}return!1}logout(){this.hierarchicalAdminService.logout(),this.isLoggedIn.set(!1),this.currentAdminSignal.set(null)}isAuthenticated(){return this.isLoggedIn()}getCurrentAdmin(){return this.currentAdminSignal()}canEditAnnouncement(i){const n=this.getCurrentAdmin();return!!n&&this.hierarchicalAdminService.canEditAnnouncement(n,i)}canDeleteAnnouncement(i){const n=this.getCurrentAdmin();return!!n&&this.hierarchicalAdminService.canDeleteAnnouncement(n,i)}canViewAnnouncement(i){const n=this.getCurrentAdmin();return!!n&&this.hierarchicalAdminService.canViewAnnouncement(n,i)}}return s.\u0275fac=function(i){return new(i||s)(l.LFG(e.X))},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},7879:(p,c,a)=>{a.d(c,{X:()=>u});var l=a(4946),e=a(5123);let u=(()=>{class s{constructor(){this.STORAGE_KEY="hierarchical_admins",this.CURRENT_ADMIN_KEY="current_hierarchical_admin",this.adminUsersSignal=(0,l.tdS)([]),this.currentAdminSignal=(0,l.tdS)(null),this.initializeDefaultAdmins(),this.loadCurrentAdmin()}initializeDefaultAdmins(){const i=this.getStoredAdmins();if(0===i.length){const n=[{id:"admin-001",username:"minister",email:"minister@irrigation.up.gov.in",password:"minister123",role:e.P[0],fullName:"Hon. Irrigation Minister",employeeId:"MIN-001",department:"Irrigation Department",isActive:!0,createdAt:new Date,lastLogin:new Date},{id:"admin-002",username:"principal_secretary",email:"ps@irrigation.up.gov.in",password:"ps123",role:e.P[1],fullName:"Principal Secretary",employeeId:"PS-001",department:"Irrigation Department",isActive:!0,createdAt:new Date},{id:"admin-003",username:"ce1",email:"ce1@irrigation.up.gov.in",password:"ce1123",role:e.P[2],fullName:"Chief Engineer-I",employeeId:"CE1-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-004",username:"ce2",email:"ce2@irrigation.up.gov.in",password:"ce2123",role:e.P[3],fullName:"Chief Engineer-II",employeeId:"CE2-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-005",username:"sso",email:"sso@irrigation.up.gov.in",password:"sso123",role:e.P[4],fullName:"Senior Staff Officer",employeeId:"SSO-001",department:"Administrative Division",isActive:!0,createdAt:new Date},{id:"admin-006",username:"se",email:"se@irrigation.up.gov.in",password:"se123",role:e.P[5],fullName:"Superintending Engineer",employeeId:"SE-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-007",username:"ee",email:"ee@irrigation.up.gov.in",password:"ee123",role:e.P[6],fullName:"Executive Engineer",employeeId:"EE-001",department:"Technical Division",isActive:!0,createdAt:new Date},{id:"admin-legacy",username:"admin",email:"admin@announcement.com",password:"admin123",role:e.P[2],fullName:"System Administrator",employeeId:"ADMIN-001",department:"IT Division",isActive:!0,createdAt:new Date}];this.saveAdmins(n),this.adminUsersSignal.set(n)}else this.adminUsersSignal.set(i)}login(i,n){const t=this.adminUsersSignal().find(o=>(o.email===i||o.username===i)&&o.password===n&&o.isActive);return t?(t.lastLogin=new Date,this.currentAdminSignal.set(t),localStorage.setItem(this.CURRENT_ADMIN_KEY,JSON.stringify(t)),this.updateAdmin(t),t):null}logout(){this.currentAdminSignal.set(null),localStorage.removeItem(this.CURRENT_ADMIN_KEY)}getCurrentAdmin(){return this.currentAdminSignal()}getSubordinateAdmins(i){return this.adminUsersSignal().filter(r=>r.role.seniorityLevel>i.role.seniorityLevel&&r.isActive)}canViewAnnouncement(i,n){return i.role.seniorityLevel<=n.role.seniorityLevel}canEditAnnouncement(i,n){return i.id===n.id||i.role.seniorityLevel<n.role.seniorityLevel}canDeleteAnnouncement(i,n){return i.id===n.id||i.role.seniorityLevel<n.role.seniorityLevel}getAdminsByDepartment(){const i=this.adminUsersSignal(),n={};return i.forEach(r=>{n[r.department]||(n[r.department]=[]),n[r.department].push(r)}),Object.keys(n).forEach(r=>{n[r].sort((t,o)=>t.role.seniorityLevel-o.role.seniorityLevel)}),n}getHierarchyTree(){return this.getAdminsByDepartment()}getAllRoles(){return e.P}getRoleById(i){return e.P.find(n=>n.id===i)}getAdminById(i){return this.adminUsersSignal().find(n=>n.id===i)}loadCurrentAdmin(){const i=localStorage.getItem(this.CURRENT_ADMIN_KEY);if(i)try{const n=JSON.parse(i);this.currentAdminSignal.set(n)}catch(n){console.error("Error loading current admin:",n),localStorage.removeItem(this.CURRENT_ADMIN_KEY)}}getStoredAdmins(){const i=localStorage.getItem(this.STORAGE_KEY);if(i)try{return JSON.parse(i)}catch(n){return console.error("Error parsing stored admins:",n),[]}return[]}saveAdmins(i){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(i)),this.adminUsersSignal.set(i)}updateAdmin(i){const n=this.adminUsersSignal(),r=n.findIndex(t=>t.id===i.id);-1!==r&&(n[r]=i,this.saveAdmins(n))}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);