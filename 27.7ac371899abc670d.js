"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[27],{7027:(y,l,s)=>{s.r(l),s.d(l,{AdminDashboardComponent:()=>w});var c=s(6814),e=s(4946),d=s(95),m=s(5565),u=s(9615),_=s(3076),g=s(6538);function b(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showDeleteConfirmation())}),e._UZ(1,"i",49),e._uU(2),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.isDeleting()),e.xp6(2),e.hij(" ",t.isDeleting()?"Deleting...":"Delete"," ")}}function p(i,r){if(1&i&&(e.TgZ(0,"div",50),e._UZ(1,"i",51),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.successMessage()," ")}}function h(i,r){1&i&&e._UZ(0,"span",52)}function f(i,r){if(1&i&&(e.TgZ(0,"div")(1,"h6",53),e._uU(2),e.qZA(),e.TgZ(3,"p",54),e._uU(4),e.qZA(),e.TgZ(5,"div",55)(6,"span"),e._UZ(7,"i",56),e._uU(8),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA()()()),2&i){const t=r.ngIf,n=e.oxw();e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.content),e.xp6(4),e.hij(" ",t.likes," "),e.xp6(2),e.hij("Updated: ",n.formatDate(t.updatedAt),"")}}function v(i,r){1&i&&(e.TgZ(0,"div",57),e._UZ(1,"i",58),e.TgZ(2,"p",24),e._uU(3,"No announcement available"),e.qZA(),e.TgZ(4,"small"),e._uU(5,"Create your first announcement using the form"),e.qZA()())}function A(i,r){1&i&&(e.TgZ(0,"div",59)(1,"small"),e._uU(2,"No viewers yet"),e.qZA()())}function Z(i,r){1&i&&(e.TgZ(0,"small",68),e._UZ(1,"i",69),e.qZA())}function x(i,r){if(1&i&&(e.TgZ(0,"div",62),e._UZ(1,"i",63),e.TgZ(2,"div",64)(3,"small",65),e._uU(4),e.qZA(),e.TgZ(5,"small",66),e._uU(6),e.qZA()(),e.YNc(7,Z,2,0,"small",67),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(n.formatDate(t.viewedAt)),e.xp6(1),e.Q6J("ngIf",t.hasLiked)}}function T(i,r){if(1&i&&(e.TgZ(0,"div",70)(1,"small",66),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("+",t.viewedUsers().length-5," more viewers")}}function C(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,x,8,3,"div",60),e.YNc(2,T,3,1,"div",61),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.viewedUsers().slice(-5)),e.xp6(1),e.Q6J("ngIf",t.viewedUsers().length>5)}}function D(i,r){1&i&&e._UZ(0,"span",52)}function U(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",71),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e.TgZ(1,"div",72),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(2,"div",73)(3,"div",74)(4,"h5",75),e._UZ(5,"i",76),e._uU(6," Confirm Delete "),e.qZA(),e.TgZ(7,"button",77),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e.qZA()(),e.TgZ(8,"div",78)(9,"p")(10,"strong"),e._uU(11,"Are you sure you want to delete this announcement?"),e.qZA()(),e.TgZ(12,"p",15),e._uU(13,"This action cannot be undone. All likes and engagement data will be lost."),e.qZA()(),e.TgZ(14,"div",79)(15,"button",80),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e._uU(16," Cancel "),e.qZA(),e.TgZ(17,"button",81),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmDelete())}),e.YNc(18,D,1,0,"span",37),e._uU(19),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(17),e.Q6J("disabled",t.isDeleting()),e.xp6(1),e.Q6J("ngIf",t.isDeleting()),e.xp6(1),e.hij(" ",t.isDeleting()?"Deleting...":"Delete Announcement"," ")}}let w=(()=>{class i{constructor(t,n,o,a){this.adminService=t,this.announcementService=n,this.userService=o,this.router=a,this.title=(0,e.tdS)(""),this.content=(0,e.tdS)(""),this.isSubmitting=(0,e.tdS)(!1),this.isDeleting=(0,e.tdS)(!1),this.successMessage=(0,e.tdS)(""),this.currentAnnouncement=(0,e.tdS)(null),this.showDeleteConfirm=(0,e.tdS)(!1),this.viewedUsers=this.userService.viewedUsers}ngOnInit(){this.adminService.isAuthenticated()?this.loadCurrentAnnouncement():this.router.navigate(["/admin"])}loadCurrentAnnouncement(){const t=this.announcementService.getLatestAnnouncement();this.currentAnnouncement.set(t),t?(this.title.set(t.title),this.content.set(t.content)):(this.title.set(""),this.content.set(""))}onSubmit(){if(this.title().trim()&&this.content().trim()){this.isSubmitting.set(!0),this.successMessage.set("");try{const t=this.announcementService.createOrUpdateAnnouncement(this.title().trim(),this.content().trim());this.currentAnnouncement.set(t),this.successMessage.set("Announcement updated successfully!"),setTimeout(()=>{this.successMessage.set("")},3e3)}catch(t){console.error("Error updating announcement:",t)}finally{this.isSubmitting.set(!1)}}}showDeleteConfirmation(){this.showDeleteConfirm.set(!0)}hideDeleteConfirmation(){this.showDeleteConfirm.set(!1)}confirmDelete(){const t=this.currentAnnouncement();if(t){this.isDeleting.set(!0),this.showDeleteConfirm.set(!1);try{this.announcementService.deleteAnnouncement(t.id)&&(this.currentAnnouncement.set(null),this.title.set(""),this.content.set(""),this.successMessage.set("Announcement deleted successfully!"),setTimeout(()=>{this.successMessage.set("")},3e3))}catch(n){console.error("Error deleting announcement:",n)}finally{this.isDeleting.set(!1)}}}logout(){this.adminService.logout(),this.router.navigate(["/admin"])}updateTitle(t){this.title.set(t)}updateContent(t){this.content.set(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}getTotalLikes(){const t=this.currentAnnouncement();return t?t.likes:0}getTotalViewers(){return this.viewedUsers().length}hasAnnouncement(){return null!==this.currentAnnouncement()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.l),e.Y36(u.X),e.Y36(_.K),e.Y36(g.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-dashboard"]],standalone:!0,features:[e.jDz],decls:78,vars:17,consts:[[1,"container-fluid","min-vh-100","bg-light"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-danger"],[1,"container"],["href","#",1,"navbar-brand"],[1,"bi","bi-shield-check-fill","me-2"],[1,"navbar-nav","ms-auto"],[1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"container","py-4"],[1,"row","mb-4"],[1,"col-md-4"],[1,"card","text-center","border-primary"],[1,"card-body"],[1,"bi","bi-people-fill","display-4","text-primary"],[1,"mt-2"],[1,"text-muted","mb-0"],[1,"card","text-center","border-danger"],[1,"bi","bi-heart-fill","display-4","text-danger"],[1,"card","text-center","border-success"],[1,"bi","bi-megaphone-fill","display-4","text-success"],[1,"row"],[1,"col-lg-8"],[1,"card","shadow-sm"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-pencil-square","me-2"],["class","btn btn-outline-danger btn-sm",3,"disabled","click",4,"ngIf"],["class","alert alert-success alert-dismissible",4,"ngIf"],[3,"ngSubmit"],["announcementForm","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Enter announcement title","required","",1,"form-control",3,"value","input"],[1,"mb-4"],["for","content",1,"form-label"],["id","content","rows","6","placeholder","Enter announcement content...","required","",1,"form-control",3,"value","input"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"col-lg-4"],[1,"card-header","bg-white"],[1,"bi","bi-eye-fill","me-2"],[4,"ngIf","ngIfElse"],["noAnnouncement",""],[1,"card","shadow-sm","mt-3"],[1,"bi","bi-clock-history","me-2"],["class","text-center text-muted py-2",4,"ngIf"],[4,"ngIf"],["class","modal fade show d-block","style","background-color: rgba(0,0,0,0.5);",3,"click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm",3,"disabled","click"],[1,"bi","bi-trash3"],[1,"alert","alert-success","alert-dismissible"],[1,"bi","bi-check-circle-fill","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"text-primary"],[1,"small","text-muted","mb-2"],[1,"d-flex","justify-content-between","text-muted","small"],[1,"bi","bi-heart-fill","text-danger"],[1,"text-center","text-muted","py-3"],[1,"bi","bi-megaphone","display-4","d-block","mb-2"],[1,"text-center","text-muted","py-2"],["class","d-flex align-items-center mb-2",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],[1,"bi","bi-person-circle","text-primary","me-2"],[1,"flex-grow-1"],[1,"d-block"],[1,"text-muted"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"bi","bi-heart-fill"],[1,"text-center"],[1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.5)",3,"click"],[1,"modal-dialog","modal-dialog-centered",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","text-danger"],[1,"bi","bi-exclamation-triangle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e._uU(5," Admin Dashboard "),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return n.logout()}),e._UZ(8,"i",7),e._uU(9," Logout "),e.qZA()()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),e._UZ(15,"i",13),e.TgZ(16,"h3",14),e._uU(17),e.qZA(),e.TgZ(18,"p",15),e._uU(19,"Total Viewers"),e.qZA()()()(),e.TgZ(20,"div",10)(21,"div",16)(22,"div",12),e._UZ(23,"i",17),e.TgZ(24,"h3",14),e._uU(25),e.qZA(),e.TgZ(26,"p",15),e._uU(27,"Total Likes"),e.qZA()()()(),e.TgZ(28,"div",10)(29,"div",18)(30,"div",12),e._UZ(31,"i",19),e.TgZ(32,"h3",14),e._uU(33),e.qZA(),e.TgZ(34,"p",15),e._uU(35,"Active Announcements"),e.qZA()()()()(),e.TgZ(36,"div",20)(37,"div",21)(38,"div",22)(39,"div",23)(40,"h5",24),e._UZ(41,"i",25),e._uU(42),e.qZA(),e.YNc(43,b,3,2,"button",26),e.qZA(),e.TgZ(44,"div",12),e.YNc(45,p,3,1,"div",27),e.TgZ(46,"form",28,29),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(48,"div",30)(49,"label",31),e._uU(50,"Announcement Title"),e.qZA(),e.TgZ(51,"input",32),e.NdJ("input",function(a){return n.updateTitle(a.target.value)}),e.qZA()(),e.TgZ(52,"div",33)(53,"label",34),e._uU(54,"Announcement Content"),e.qZA(),e.TgZ(55,"textarea",35),e.NdJ("input",function(a){return n.updateContent(a.target.value)}),e.qZA()(),e.TgZ(56,"button",36),e.YNc(57,h,1,0,"span",37),e._uU(58),e.qZA()()()()(),e.TgZ(59,"div",38)(60,"div",22)(61,"div",39)(62,"h6",24),e._UZ(63,"i",40),e._uU(64),e.qZA()(),e.TgZ(65,"div",12),e.YNc(66,f,11,4,"div",41),e.YNc(67,v,6,0,"ng-template",null,42,e.W1O),e.qZA()(),e.TgZ(69,"div",43)(70,"div",39)(71,"h6",24),e._UZ(72,"i",44),e._uU(73," Recent Viewers "),e.qZA()(),e.TgZ(74,"div",12),e.YNc(75,A,3,0,"div",45),e.YNc(76,C,3,2,"div",46),e.qZA()()()()()(),e.YNc(77,U,20,3,"div",47)),2&t){const o=e.MAs(68);e.xp6(17),e.Oqu(n.getTotalViewers()),e.xp6(8),e.Oqu(n.getTotalLikes()),e.xp6(8),e.Oqu(n.hasAnnouncement()?"1":"0"),e.xp6(9),e.hij(" ",n.hasAnnouncement()?"Update":"Create"," Announcement "),e.xp6(1),e.Q6J("ngIf",n.hasAnnouncement()),e.xp6(2),e.Q6J("ngIf",n.successMessage()),e.xp6(6),e.Q6J("value",n.title()),e.xp6(4),e.Q6J("value",n.content()),e.xp6(1),e.Q6J("disabled",n.isSubmitting()||!n.title().trim()||!n.content().trim()),e.xp6(1),e.Q6J("ngIf",n.isSubmitting()),e.xp6(1),e.hij(" ",n.isSubmitting()?"Saving...":n.hasAnnouncement()?"Update Announcement":"Create Announcement"," "),e.xp6(6),e.hij(" ",n.hasAnnouncement()?"Current Announcement":"No Announcement"," "),e.xp6(2),e.Q6J("ngIf",n.currentAnnouncement())("ngIfElse",o),e.xp6(9),e.Q6J("ngIf",0===n.viewedUsers().length),e.xp6(1),e.Q6J("ngIf",n.viewedUsers().length>0),e.xp6(1),e.Q6J("ngIf",n.showDeleteConfirm())}},dependencies:[c.ez,c.sg,c.O5,d.u5,d._Y,d.JL,d.F],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:12px;transition:all .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a!important}.navbar-brand[_ngcontent-%COMP%]{font-weight:600}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef}.form-control[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354526}.btn-danger[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.bg-light[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)!important}.alert[_ngcontent-%COMP%]{border-radius:8px;border:none}.border-primary[_ngcontent-%COMP%]{border-color:#0d6efd!important;border-width:2px!important}.border-danger[_ngcontent-%COMP%]{border-color:#dc3545!important;border-width:2px!important}.border-success[_ngcontent-%COMP%]{border-color:#198754!important;border-width:2px!important}.modal.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .15s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.btn-outline-danger[_ngcontent-%COMP%]{transition:all .2s ease}.btn-outline-danger[_ngcontent-%COMP%]:hover{transform:scale(1.05)}"]}),i})()}}]);