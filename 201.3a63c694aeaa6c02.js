"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[201],{2201:(pe,m,a)=>{a.r(m),a.d(m,{AdminDashboardComponent:()=>_e});var _=a(5861),d=a(6814),e=a(4946),l=a(95),u=a(7879);function g(i,r){1&i&&e._UZ(0,"i",48)}function p(i,r){1&i&&(e.TgZ(0,"span",49),e._UZ(1,"i",50),e.qZA())}function f(i,r){1&i&&(e.TgZ(0,"span",51),e._UZ(1,"i",52),e.qZA())}function b(i,r){1&i&&(e.TgZ(0,"span",53),e._UZ(1,"i",54),e.qZA())}function h(i,r){if(1&i&&(e.TgZ(0,"span",55),e._UZ(1,"i",56),e._uU(2),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",n.getRelativeTime(t.lastLogin)," ")}}function v(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",57)(1,"button",58),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw().$implicit;return e.oxw(3).onSelectOfficer(s),e.KtG(o.stopPropagation())}),e._UZ(2,"i",59),e._uU(3," View Announcements "),e.qZA()()}}function x(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.onSelectOfficer(s))}),e.TgZ(1,"div",26)(2,"div",8)(3,"div",9),e._UZ(4,"i",35),e.qZA(),e.TgZ(5,"div")(6,"h6",36),e._uU(7),e.YNc(8,g,1,0,"i",37),e.qZA(),e.TgZ(9,"p",12),e._uU(10),e.qZA(),e.TgZ(11,"p",38),e._uU(12),e.qZA()()(),e.TgZ(13,"div",39)(14,"div",40)(15,"span",41),e._uU(16),e.qZA()(),e.TgZ(17,"div",42),e.YNc(18,p,2,0,"span",43),e.YNc(19,f,2,0,"span",44),e.YNc(20,b,2,0,"span",45),e.YNc(21,h,3,1,"span",46),e.qZA()()(),e.YNc(22,v,4,0,"div",47),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw(3);e.ekj("subordinate",n.isSubordinate(t))("direct-subordinate",n.isDirectSubordinate(t))("current-user",t.id===n.currentUser.id)("disabled",!n.isSubordinate(t)&&t.id!==n.currentUser.id),e.xp6(4),e.Tol(n.getRoleIcon(t.role.name)+" "+n.getRolePriorityColor(t.role.seniorityLevel)),e.xp6(2),e.Tol(n.getRolePriorityColor(t.role.seniorityLevel)),e.xp6(1),e.hij(" ",t.fullName," "),e.xp6(1),e.Q6J("ngIf",t.id===n.currentUser.id),e.xp6(2),e.Oqu(t.role.displayName),e.xp6(2),e.Oqu(t.employeeId),e.xp6(3),e.ekj("bg-danger",t.role.seniorityLevel<=2)("bg-warning",t.role.seniorityLevel>2&&t.role.seniorityLevel<=4)("bg-info",t.role.seniorityLevel>4&&t.role.seniorityLevel<=6)("bg-secondary",t.role.seniorityLevel>6),e.xp6(1),e.hij(" Level ",t.role.seniorityLevel," "),e.xp6(2),e.Q6J("ngIf",n.isDirectSubordinate(t)),e.xp6(1),e.Q6J("ngIf",n.isSubordinate(t)&&!n.isDirectSubordinate(t)),e.xp6(1),e.Q6J("ngIf",t.role.seniorityLevel<n.currentUser.role.seniorityLevel),e.xp6(1),e.Q6J("ngIf",t.lastLogin),e.xp6(1),e.Q6J("ngIf",n.isSubordinate(t))}}function A(i,r){if(1&i&&(e.TgZ(0,"div",32),e.YNc(1,x,23,30,"div",33),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.value)("ngForTrackBy",n.trackByAdminId)}}function Z(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.toggleDepartment(s.key))}),e.TgZ(2,"div",26)(3,"div",8),e._UZ(4,"i",27),e.TgZ(5,"span",28),e._uU(6),e.qZA(),e.TgZ(7,"span",29),e._uU(8),e.qZA()(),e._UZ(9,"i",30),e.qZA()(),e.YNc(10,A,2,2,"div",31),e.qZA()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.ekj("collapsed",!n.isDepartmentExpanded(t.key)),e.xp6(3),e.Tol(n.getDepartmentIcon(t.key)),e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value.length),e.xp6(1),e.ekj("bi-chevron-down",!n.isDepartmentExpanded(t.key))("bi-chevron-up",n.isDepartmentExpanded(t.key)),e.xp6(1),e.Q6J("ngIf",n.isDepartmentExpanded(t.key))}}let T=(()=>{class i{constructor(t){this.hierarchicalAdminService=t,this.selectOfficer=new e.vpe,this.expandedDepartments=(0,e.tdS)(new Set),this.hierarchyTree=(0,e.tdS)({}),this.subordinateAdmins=(0,e.tdS)([]),this.loadHierarchy()}ngOnInit(){this.loadHierarchy(),this.loadSubordinates()}ngOnChanges(){this.currentUser&&this.loadSubordinates()}loadHierarchy(){const t=this.hierarchicalAdminService.getHierarchyTree();this.hierarchyTree.set(t)}loadSubordinates(){if(this.currentUser){const t=this.hierarchicalAdminService.getSubordinateAdmins(this.currentUser);this.subordinateAdmins.set(t)}}toggleDepartment(t){const n=this.expandedDepartments(),o=new Set(n);o.has(t)?o.delete(t):o.add(t),this.expandedDepartments.set(o)}isDepartmentExpanded(t){return this.expandedDepartments().has(t)}onSelectOfficer(t){this.selectOfficer.emit(t)}isSubordinate(t){return this.currentUser.role.seniorityLevel<t.role.seniorityLevel}isDirectSubordinate(t){return this.currentUser.role.seniorityLevel+1===t.role.seniorityLevel}getRolePriorityColor(t){return t<=2?"text-danger":t<=4?"text-warning":t<=6?"text-info":"text-secondary"}getRoleIcon(t){return{MINISTER:"bi-crown",PRINCIPAL_SECRETARY:"bi-award",CHIEF_ENGINEER_I:"bi-gear-fill",CHIEF_ENGINEER_II:"bi-gear",SENIOR_STAFF_OFFICER:"bi-person-badge",SUPERINTENDING_ENGINEER:"bi-tools",EXECUTIVE_ENGINEER:"bi-hammer",ASSISTANT_ENGINEER:"bi-wrench",JUNIOR_ENGINEER:"bi-nut",CLERICAL_STAFF:"bi-clipboard"}[t]||"bi-person"}getDepartmentIcon(t){return{"Irrigation Department":"bi-droplet","Technical Division":"bi-gear-wide-connected","Administrative Division":"bi-building","IT Division":"bi-laptop"}[t]||"bi-building"}trackByAdminId(t,n){return n.id}getRelativeTime(t){const o=(new Date).getTime()-new Date(t).getTime(),s=Math.floor(o/36e5),c=Math.floor(s/24);return c>0?`${c}d ago`:s>0?`${s}h ago`:"Just now"}getDepartmentCount(){return Object.keys(this.hierarchyTree()).length}getActiveOfficersCount(){const t=this.hierarchyTree();let n=0;return Object.values(t).forEach(o=>{n+=o.filter(s=>s.isActive).length}),n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-role-hierarchy"]],inputs:{currentUser:"currentUser"},outputs:{selectOfficer:"selectOfficer"},standalone:!0,features:[e.TTD,e.jDz],decls:43,vars:11,consts:[[1,"role-hierarchy-container"],[1,"card","border-0","shadow-sm"],[1,"card-header","bg-gradient","bg-primary","text-white"],[1,"mb-0"],[1,"bi","bi-diagram-3","me-2"],[1,"opacity-75"],[1,"card-body","p-0"],[1,"current-user-info","p-3","bg-light","border-bottom"],[1,"d-flex","align-items-center"],[1,"me-3"],[1,"display-6"],[1,"mb-1","fw-bold"],[1,"text-muted","mb-1","small"],[1,"badge","bg-success","small"],[1,"hierarchy-tree"],["class","department-section",4,"ngFor","ngForOf"],[1,"quick-stats","p-3","bg-light","border-top"],[1,"row","text-center"],[1,"col-4"],[1,"stat-item"],[1,"text-primary","mb-0"],[1,"text-muted"],[1,"text-success","mb-0"],[1,"text-info","mb-0"],[1,"department-section"],[1,"department-header","p-3","border-bottom","bg-light",3,"click"],[1,"d-flex","align-items-center","justify-content-between"],[1,"me-2"],[1,"fw-semibold"],[1,"badge","bg-secondary","ms-2","small"],[1,"bi"],["class","officers-list",4,"ngIf"],[1,"officers-list"],["class","officer-item p-3 border-bottom",3,"subordinate","direct-subordinate","current-user","disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"officer-item","p-3","border-bottom",3,"click"],[1,"fs-4"],[1,"mb-1"],["class","bi bi-person-check text-success ms-1","title","You",4,"ngIf"],[1,"text-muted","mb-0","small"],[1,"text-end"],[1,"seniority-badge"],[1,"badge"],[1,"status-indicators","mt-1"],["class","badge bg-success small me-1","title","Direct Subordinate",4,"ngIf"],["class","badge bg-info small me-1","title","Subordinate",4,"ngIf"],["class","badge bg-warning small me-1","title","Superior",4,"ngIf"],["class","badge bg-light text-dark small","title","Last Login",4,"ngIf"],["class","mt-2 text-end",4,"ngIf"],["title","You",1,"bi","bi-person-check","text-success","ms-1"],["title","Direct Subordinate",1,"badge","bg-success","small","me-1"],[1,"bi","bi-arrow-down-circle"],["title","Subordinate",1,"badge","bg-info","small","me-1"],[1,"bi","bi-arrow-down"],["title","Superior",1,"badge","bg-warning","small","me-1"],[1,"bi","bi-arrow-up"],["title","Last Login",1,"badge","bg-light","text-dark","small"],[1,"bi","bi-clock"],[1,"mt-2","text-end"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-eye","me-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),e._UZ(4,"i",4),e._uU(5," Department Hierarchy "),e.qZA(),e.TgZ(6,"small",5),e._uU(7,"View announcements from subordinate officers"),e.qZA()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e._UZ(12,"i",10),e.qZA(),e.TgZ(13,"div")(14,"h6",11),e._uU(15),e.qZA(),e.TgZ(16,"p",12),e._uU(17),e.qZA(),e.TgZ(18,"span",13),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",14),e.YNc(21,Z,11,11,"div",15),e.ALo(22,"keyvalue"),e.qZA(),e.TgZ(23,"div",16)(24,"div",17)(25,"div",18)(26,"div",19)(27,"h6",20),e._uU(28),e.qZA(),e.TgZ(29,"small",21),e._uU(30,"Subordinates"),e.qZA()()(),e.TgZ(31,"div",18)(32,"div",19)(33,"h6",22),e._uU(34),e.qZA(),e.TgZ(35,"small",21),e._uU(36,"Departments"),e.qZA()()(),e.TgZ(37,"div",18)(38,"div",19)(39,"h6",23),e._uU(40),e.qZA(),e.TgZ(41,"small",21),e._uU(42,"Active Officers"),e.qZA()()()()()()()()),2&t&&(e.xp6(12),e.Tol(n.getRoleIcon(n.currentUser.role.name)+" "+n.getRolePriorityColor(n.currentUser.role.seniorityLevel)),e.xp6(3),e.Oqu(n.currentUser.fullName),e.xp6(2),e.Oqu(n.currentUser.role.displayName),e.xp6(2),e.Oqu(n.currentUser.department),e.xp6(2),e.Q6J("ngForOf",e.lcZ(22,9,n.hierarchyTree())),e.xp6(7),e.Oqu(n.subordinateAdmins().length),e.xp6(6),e.Oqu(n.getDepartmentCount()),e.xp6(6),e.Oqu(n.getActiveOfficersCount()))},dependencies:[d.ez,d.sg,d.O5,d.Nd],styles:[".role-hierarchy-container[_ngcontent-%COMP%]{max-height:600px}.department-header[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;-webkit-user-select:none;user-select:none}.department-header[_ngcontent-%COMP%]:hover{background-color:var(--bs-gray-200)!important}.department-header.collapsed[_ngcontent-%COMP%]{opacity:.8}.officers-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.officer-item[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;position:relative}.officer-item[_ngcontent-%COMP%]:hover{background-color:var(--bs-gray-100);transform:translate(5px)}.officer-item.current-user[_ngcontent-%COMP%]{background-color:rgba(var(--bs-success-rgb),.1);border-left:4px solid var(--bs-success)}.officer-item.direct-subordinate[_ngcontent-%COMP%]{background-color:rgba(var(--bs-primary-rgb),.05);border-left:3px solid var(--bs-primary)}.officer-item.subordinate[_ngcontent-%COMP%]:not(.direct-subordinate){background-color:rgba(var(--bs-info-rgb),.03);border-left:2px solid var(--bs-info)}.officer-item.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;background-color:rgba(var(--bs-gray-rgb),.05)}.officer-item.disabled[_ngcontent-%COMP%]:hover{transform:none;background-color:rgba(var(--bs-gray-rgb),.05)}.current-user-info[_ngcontent-%COMP%]{border-left:4px solid var(--bs-success)}.seniority-badge[_ngcontent-%COMP%]{font-size:.75rem}.status-indicators[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:.65rem}.hierarchy-tree[_ngcontent-%COMP%]{max-height:450px;overflow-y:auto}.stat-item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.quick-stats[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)}.officers-list[_ngcontent-%COMP%]::-webkit-scrollbar, .hierarchy-tree[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.officers-list[_ngcontent-%COMP%]::-webkit-scrollbar-track, .hierarchy-tree[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:6px}.officers-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, .hierarchy-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:6px}.officers-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover, .hierarchy-tree[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}@media (max-width: 768px){.role-hierarchy-container[_ngcontent-%COMP%]{max-height:500px}.officer-item[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important}.officer-item[_ngcontent-%COMP%]   .text-end[_ngcontent-%COMP%]{text-align:left!important;margin-top:.5rem}.status-indicators[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem}}.officers-list[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0}to{opacity:1;max-height:400px}}.text-priority-1[_ngcontent-%COMP%]{color:#dc3545!important}.text-priority-2[_ngcontent-%COMP%]{color:#fd7e14!important}.text-priority-3[_ngcontent-%COMP%]{color:#ffc107!important}.text-priority-4[_ngcontent-%COMP%]{color:#20c997!important}"]}),i})();var y=a(5565),C=a(9615),w=a(3076),U=a(6644),q=a(6538);function D(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelEdit())}),e._UZ(1,"i",63),e._uU(2," Cancel Edit "),e.qZA()}}function O(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",64),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showDeleteConfirmation())}),e._UZ(1,"i",65),e._uU(2),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.isDeleting()),e.xp6(2),e.hij(" ",t.isDeleting()?"Deleting...":"Delete Current"," ")}}function S(i,r){if(1&i&&(e.TgZ(0,"div",66),e._UZ(1,"i",67),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.successMessage()," ")}}function I(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",71)(1,"div",72),e._UZ(2,"i",73),e.TgZ(3,"div")(4,"div",74),e._uU(5),e.qZA(),e.TgZ(6,"small",68),e._uU(7),e.qZA()()(),e.TgZ(8,"button",75),e.NdJ("click",function(){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeSelectedFile(s))}),e._UZ(9,"i",76),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.Tol(n.getFileIcon(t.type)),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Oqu(n.formatFileSize(t.size))}}function k(i,r){if(1&i&&(e.TgZ(0,"div",34)(1,"h6",68),e._uU(2,"Selected Files:"),e.qZA(),e.TgZ(3,"div",69),e.YNc(4,I,10,4,"div",70),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.selectedFiles())}}function N(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",71)(1,"div",72),e._UZ(2,"i",77),e.TgZ(3,"div")(4,"div",74),e._uU(5),e.qZA(),e.TgZ(6,"small",68),e._uU(7),e.qZA()()(),e.TgZ(8,"button",75),e.NdJ("click",function(){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.removeUploadedAttachment(s))}),e._UZ(9,"i",76),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.Tol(n.getFileIcon(t.type)),e.xp6(3),e.Oqu(t.originalName),e.xp6(2),e.AsE("",n.formatFileSize(t.size)," \u2022 ",t.downloads," downloads")}}function F(i,r){if(1&i&&(e.TgZ(0,"div",34)(1,"h6",68),e._uU(2,"Current Attachments:"),e.qZA(),e.TgZ(3,"div",69),e.YNc(4,N,10,5,"div",70),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.uploadedAttachments())}}function M(i,r){if(1&i&&(e.TgZ(0,"div",78),e._UZ(1,"i",79),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.hij(" Large file size (",t.formatFileSize(t.getTotalFileSize()),"). Consider reducing file count or size for better performance. ")}}function E(i,r){1&i&&e._UZ(0,"span",80)}function J(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"Uploading Files..."),e.qZA())}function P(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"Saving..."),e.qZA())}function Y(i,r){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.isEditMode()?"Update Announcement":"Create New Announcement"," ")}}function H(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",81),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editCurrentAnnouncement())}),e._UZ(1,"i",82),e._uU(2," Edit Current "),e.qZA()}}function Q(i,r){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"i",88),e._uU(2),e.qZA()),2&i){const t=e.oxw().ngIf;e.xp6(2),e.AsE(" ",t.attachments.length," file",1!==t.attachments.length?"s":""," ")}}function R(i,r){if(1&i&&(e.TgZ(0,"div")(1,"h6",83),e._uU(2),e.qZA(),e.TgZ(3,"p",84),e._uU(4),e.qZA(),e.TgZ(5,"div",85)(6,"span"),e._UZ(7,"i",86),e._uU(8),e.qZA(),e.YNc(9,Q,3,2,"span",49),e.qZA(),e.TgZ(10,"div",87)(11,"small",68),e._uU(12),e.qZA()()()),2&i){const t=r.ngIf,n=e.oxw();e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.content),e.xp6(4),e.hij(" ",t.likes," "),e.xp6(1),e.Q6J("ngIf",t.attachments&&t.attachments.length>0),e.xp6(3),e.hij("Updated: ",n.formatDate(t.updatedAt),"")}}function j(i,r){1&i&&(e.TgZ(0,"div",89),e._UZ(1,"i",90),e.TgZ(2,"p",26),e._uU(3,"No announcement available"),e.qZA(),e.TgZ(4,"small"),e._uU(5,"Create your first announcement using the form"),e.qZA()())}function L(i,r){1&i&&(e.TgZ(0,"div",91)(1,"small"),e._uU(2,"No viewers yet"),e.qZA()())}function z(i,r){1&i&&(e.TgZ(0,"small",99),e._UZ(1,"i",100),e.qZA())}function G(i,r){if(1&i&&(e.TgZ(0,"div",94),e._UZ(1,"i",95),e.TgZ(2,"div",96)(3,"small",97),e._uU(4),e.qZA(),e.TgZ(5,"small",68),e._uU(6),e.qZA()(),e.YNc(7,z,2,0,"small",98),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Oqu(n.formatDate(t.viewedAt)),e.xp6(1),e.Q6J("ngIf",t.hasLiked)}}function $(i,r){if(1&i&&(e.TgZ(0,"div",101)(1,"small",68),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("+",t.viewedUsers().length-5," more viewers")}}function K(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,G,8,3,"div",92),e.YNc(2,$,3,1,"div",93),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.viewedUsers().slice(-5)),e.xp6(1),e.Q6J("ngIf",t.viewedUsers().length>5)}}function B(i,r){if(1&i&&(e.TgZ(0,"div",94),e._UZ(1,"i",103),e.TgZ(2,"div",96)(3,"small",104),e._uU(4),e.qZA(),e.TgZ(5,"small",68),e._uU(6),e.qZA()(),e.TgZ(7,"div",87)(8,"small",105),e._uU(9),e.qZA(),e.TgZ(10,"small",106),e._uU(11,"downloads"),e.qZA()()()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Tol(n.getFileIcon(t.type)),e.xp6(2),e.Q6J("title",t.originalName),e.xp6(1),e.hij(" ",t.originalName," "),e.xp6(2),e.Oqu(n.formatFileSize(t.size)),e.xp6(3),e.Oqu(t.downloads)}}function V(i,r){if(1&i&&(e.TgZ(0,"div",101)(1,"small",68),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("+",t.getTopDownloadedFiles().length-5," more files")}}function X(i,r){if(1&i&&(e.TgZ(0,"div",56)(1,"div",52)(2,"h6",26),e._UZ(3,"i",102),e._uU(4," Top Downloaded Files "),e.qZA()(),e.TgZ(5,"div",15),e.YNc(6,B,12,6,"div",92),e.YNc(7,V,3,1,"div",93),e.qZA()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.getTopDownloadedFiles().slice(0,5)),e.xp6(1),e.Q6J("ngIf",t.getTopDownloadedFiles().length>5)}}function W(i,r){if(1&i&&(e.TgZ(0,"span",148),e._UZ(1,"i",88),e._uU(2),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.AsE(" ",t.attachments.length," file",1!==t.attachments.length?"s":""," ")}}function ee(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",149),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.editAnnouncement(o.id))}),e._UZ(1,"i",150),e.qZA()}}function te(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",151),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.deleteSpecificAnnouncement(o.id))}),e._UZ(1,"i",65),e.qZA()}}function ne(i,r){if(1&i&&(e.TgZ(0,"div",155)(1,"div",156)(2,"div",72),e._UZ(3,"i",157),e.TgZ(4,"div",158)(5,"small",74),e._uU(6),e.qZA(),e.TgZ(7,"small",106),e._uU(8),e.qZA()(),e.TgZ(9,"small",159),e._uU(10),e.qZA()()()()),2&i){const t=r.$implicit,n=e.oxw(7);e.xp6(3),e.Tol(n.getFileIcon(t.type)),e.xp6(3),e.Oqu(t.originalName),e.xp6(2),e.Oqu(n.formatFileSize(t.size)),e.xp6(2),e.hij("",t.downloads," downloads")}}function ie(i,r){if(1&i&&(e.TgZ(0,"div",152)(1,"div",153),e.YNc(2,ne,11,5,"div",154),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.attachments)}}function oe(i,r){if(1&i&&(e.TgZ(0,"div",135)(1,"div",15)(2,"div",136)(3,"h6",137),e._uU(4),e.qZA(),e.TgZ(5,"span",138),e._uU(6),e.qZA()(),e.TgZ(7,"p",139),e._uU(8),e.qZA(),e.TgZ(9,"div",140)(10,"div",141),e._UZ(11,"i",142),e._uU(12),e.YNc(13,W,3,2,"span",143),e.qZA(),e.TgZ(14,"div",144),e.YNc(15,ee,2,0,"button",145),e.YNc(16,te,2,0,"button",146),e.qZA()(),e.YNc(17,ie,3,1,"div",147),e.qZA()()),2&i){const t=r.$implicit,n=e.oxw(5);e.xp6(4),e.Oqu(t.title),e.xp6(1),e.Tol(n.getAnnouncementPriorityBadge(t.priority)),e.xp6(1),e.hij(" ",t.priority||"medium"," "),e.xp6(2),e.Oqu(t.content),e.xp6(4),e.hij(" ",n.formatDate(t.createdAt)," "),e.xp6(1),e.Q6J("ngIf",t.attachments&&t.attachments.length>0),e.xp6(2),e.Q6J("ngIf",n.canEditSelectedAnnouncement(t)),e.xp6(1),e.Q6J("ngIf",n.canDeleteSelectedAnnouncement(t)),e.xp6(1),e.Q6J("ngIf",t.attachments&&t.attachments.length>0)}}function re(i,r){if(1&i&&(e.TgZ(0,"div",133),e.YNc(1,oe,18,10,"div",134),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.selectedOfficerAnnouncements())}}function se(i,r){1&i&&(e.TgZ(0,"div",160),e._UZ(1,"i",161),e.TgZ(2,"p",162),e._uU(3,"No announcements from this officer"),e.qZA()())}function ce(i,r){if(1&i&&(e.TgZ(0,"div")(1,"div",123)(2,"div",124),e._UZ(3,"i",125),e.qZA(),e.TgZ(4,"div")(5,"h6",126),e._uU(6),e.qZA(),e.TgZ(7,"p",127),e._uU(8),e.qZA(),e.TgZ(9,"span",128),e._uU(10),e.qZA()()(),e.TgZ(11,"h6",129),e._UZ(12,"i",130),e._uU(13),e.qZA(),e.YNc(14,re,2,1,"div",131),e.YNc(15,se,4,0,"ng-template",null,132,e.W1O),e.qZA()),2&i){const t=e.MAs(16),n=e.oxw(3);e.xp6(6),e.Oqu(n.selectedOfficer().fullName),e.xp6(2),e.Oqu(n.selectedOfficer().role.displayName),e.xp6(2),e.Oqu(n.selectedOfficer().department),e.xp6(3),e.hij(" Announcements (",n.selectedOfficerAnnouncements().length,") "),e.xp6(1),e.Q6J("ngIf",n.selectedOfficerAnnouncements().length>0)("ngIfElse",t)}}function ae(i,r){1&i&&(e.TgZ(0,"div",163),e._UZ(1,"i",164),e.TgZ(2,"p",165),e._uU(3,"Select an officer from the hierarchy to view their announcements"),e.qZA(),e.TgZ(4,"p",141),e._uU(5,"You can view announcements from officers with lower seniority levels"),e.qZA()())}function de(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",114)(1,"div",115)(2,"div",116)(3,"div",117)(4,"h6",118),e._UZ(5,"i",119),e._uU(6," Officer Hierarchy "),e.qZA(),e.TgZ(7,"app-role-hierarchy",120),e.NdJ("selectOfficer",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onSelectOfficer(o))}),e.qZA()()(),e.TgZ(8,"div",121)(9,"div",117),e.YNc(10,ce,17,6,"div",54),e.YNc(11,ae,6,0,"ng-template",null,122,e.W1O),e.qZA()()()()}if(2&i){const t=e.MAs(12),n=e.oxw(2);e.xp6(7),e.Q6J("currentUser",n.currentAdmin()),e.xp6(3),e.Q6J("ngIf",n.selectedOfficer())("ngIfElse",t)}}function le(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",107)(1,"div",108)(2,"div",24)(3,"div",109)(4,"h5",26),e._UZ(5,"i",110),e._uU(6," Department Hierarchy & Subordinate Announcements "),e.qZA(),e.TgZ(7,"button",111),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.toggleHierarchy())}),e._UZ(8,"i",112),e._uU(9),e.qZA()(),e.YNc(10,de,13,3,"div",113),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(8),e.ekj("bi-chevron-down",!t.showHierarchy())("bi-chevron-up",t.showHierarchy()),e.xp6(1),e.hij(" ",t.showHierarchy()?"Hide":"Show"," Hierarchy "),e.xp6(1),e.Q6J("ngIf",t.showHierarchy())}}function me(i,r){1&i&&e._UZ(0,"span",80)}function ue(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",166),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e.TgZ(1,"div",167),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(2,"div",168)(3,"div",169)(4,"h5",170),e._UZ(5,"i",171),e._uU(6," Confirm Delete "),e.qZA(),e.TgZ(7,"button",172),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e.qZA()(),e.TgZ(8,"div",173)(9,"p")(10,"strong"),e._uU(11,"Are you sure you want to delete this announcement?"),e.qZA()(),e.TgZ(12,"p",174),e._uU(13,"This action cannot be undone. All likes and engagement data will be lost."),e.qZA()(),e.TgZ(14,"div",175)(15,"button",176),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDeleteConfirmation())}),e._uU(16," Cancel "),e.qZA(),e.TgZ(17,"button",177),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmDelete())}),e.YNc(18,me,1,0,"span",48),e._uU(19),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(17),e.Q6J("disabled",t.isDeleting()),e.xp6(1),e.Q6J("ngIf",t.isDeleting()),e.xp6(1),e.hij(" ",t.isDeleting()?"Deleting...":"Delete Announcement"," ")}}let _e=(()=>{class i{constructor(t,n,o,s,c,ge){this.adminService=t,this.announcementService=n,this.userService=o,this.fileService=s,this.hierarchicalAdminService=c,this.router=ge,this.title=(0,e.tdS)(""),this.content=(0,e.tdS)(""),this.isSubmitting=(0,e.tdS)(!1),this.isDeleting=(0,e.tdS)(!1),this.successMessage=(0,e.tdS)(""),this.currentAnnouncement=(0,e.tdS)(null),this.showDeleteConfirm=(0,e.tdS)(!1),this.editingAnnouncementId=(0,e.tdS)(null),this.selectedFiles=(0,e.tdS)([]),this.uploadedAttachments=(0,e.tdS)([]),this.isUploadingFiles=(0,e.tdS)(!1),this.currentAdmin=(0,e.tdS)(null),this.selectedOfficer=(0,e.tdS)(null),this.selectedOfficerAnnouncements=(0,e.tdS)([]),this.showHierarchy=(0,e.tdS)(!1),this.viewedUsers=this.userService.viewedUsers}ngOnInit(){if(!this.adminService.isAuthenticated())return void this.router.navigate(["/admin"]);const t=this.adminService.getCurrentAdmin();this.currentAdmin.set(t),this.loadCurrentAnnouncement(),setInterval(()=>{this.loadCurrentAnnouncement()},3e4)}loadCurrentAnnouncement(){const t=this.announcementService.getLatestAnnouncement();this.currentAnnouncement.set(t),this.editingAnnouncementId()||(this.title.set(""),this.content.set(""),this.uploadedAttachments.set([]),this.selectedFiles.set([]))}onSubmit(){var t=this;return(0,_.Z)(function*(){if(t.title().trim()&&t.content().trim()){t.isSubmitting.set(!0),t.successMessage.set("");try{const n=[...t.uploadedAttachments()];if(t.selectedFiles().length>0){t.isUploadingFiles.set(!0);for(const s of t.selectedFiles())try{const c=yield t.fileService.uploadFile(s);n.push(c)}catch(c){console.error("Error uploading file:",c)}t.isUploadingFiles.set(!1)}const o=t.editingAnnouncementId();o?t.announcementService.updateAnnouncement(o,t.title().trim(),t.content().trim(),n)&&(t.successMessage.set("Announcement updated successfully!"),t.cancelEdit()):(t.announcementService.createNewAnnouncement(t.title().trim(),t.content().trim(),n),t.successMessage.set("New announcement created successfully!"),t.title.set(""),t.content.set(""),t.selectedFiles.set([]),t.uploadedAttachments.set([])),t.currentAnnouncement.set(t.announcementService.getLatestAnnouncement()),setTimeout(()=>{t.successMessage.set("")},3e3)}catch(n){console.error("Error with announcement:",n)}finally{t.isSubmitting.set(!1),t.isUploadingFiles.set(!1)}}})()}showDeleteConfirmation(){this.showDeleteConfirm.set(!0)}hideDeleteConfirmation(){this.showDeleteConfirm.set(!1)}confirmDelete(){const t=this.currentAnnouncement();if(t){this.isDeleting.set(!0),this.showDeleteConfirm.set(!1);try{this.announcementService.deleteAnnouncement(t.id)&&(this.currentAnnouncement.set(null),this.title.set(""),this.content.set(""),this.successMessage.set("Announcement deleted successfully!"),setTimeout(()=>{this.successMessage.set("")},3e3))}catch(n){console.error("Error deleting announcement:",n)}finally{this.isDeleting.set(!1)}}}logout(){this.adminService.logout(),this.router.navigate(["/admin"])}updateTitle(t){this.title.set(t)}updateContent(t){this.content.set(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}getTotalLikes(){const t=this.currentAnnouncement();return t?t.likes:0}getTotalViewers(){return this.viewedUsers().length}hasAnnouncement(){return null!==this.currentAnnouncement()}getTotalAnnouncements(){return this.announcementService.getAllAnnouncements().length}getTotalDownloads(){const t=this.announcementService.getAllAnnouncements();let n=0;return t.forEach(o=>{o.attachments&&o.attachments.forEach(s=>{n+=s.downloads})}),n}getTopDownloadedFiles(){const t=[];return this.announcementService.getAllAnnouncements().forEach(o=>{o.attachments&&t.push(...o.attachments)}),t.sort((o,s)=>s.downloads-o.downloads)}isEditMode(){return null!==this.editingAnnouncementId()}editCurrentAnnouncement(){const t=this.currentAnnouncement();t&&(this.editingAnnouncementId.set(t.id),this.title.set(t.title),this.content.set(t.content),this.uploadedAttachments.set([...t.attachments]),this.selectedFiles.set([]))}cancelEdit(){this.editingAnnouncementId.set(null),this.title.set(""),this.content.set(""),this.uploadedAttachments.set([]),this.selectedFiles.set([])}onFileSelected(t){const n=t.target;if(n.files){const o=Array.from(n.files);this.selectedFiles.update(s=>[...s,...o]),n.value=""}}removeSelectedFile(t){this.selectedFiles.update(n=>n.filter((o,s)=>s!==t))}removeUploadedAttachment(t){this.uploadedAttachments.update(n=>n.filter((o,s)=>s!==t))}getFileIcon(t){return this.fileService.getFileIcon(t)}formatFileSize(t){return this.fileService.formatFileSize(t)}getTotalFileSize(){return this.selectedFiles().reduce((o,s)=>o+s.size,0)+this.uploadedAttachments().reduce((o,s)=>o+s.size,0)}toggleHierarchy(){this.showHierarchy.update(t=>!t)}onSelectOfficer(t){this.selectedOfficer.set(t);const n=this.announcementService.getAnnouncementsByOfficer(t.id);this.selectedOfficerAnnouncements.set(n)}getSubordinateAnnouncements(){return this.announcementService.getSubordinateAnnouncements()}canEditSelectedAnnouncement(t){const n=this.currentAdmin();return!!n&&this.announcementService.canEditAnnouncement(t,n)}canDeleteSelectedAnnouncement(t){const n=this.currentAdmin();return!!n&&this.announcementService.canDeleteAnnouncement(t,n)}getAnnouncementCreatorInfo(t){const n=t.createdBy;return`${n.fullName} (${n.role.displayName}) - ${n.department}`}getAnnouncementPriorityBadge(t){return{urgent:"bg-danger",high:"bg-warning text-dark",medium:"bg-info",low:"bg-secondary"}[t||"medium"]||"bg-secondary"}getRoleHierarchyLevel(){return this.currentAdmin()?.role.seniorityLevel||10}hasSubordinates(){const t=this.currentAdmin();return!!t&&this.hierarchicalAdminService.getSubordinateAdmins(t).length>0}editAnnouncement(t){const n=this.announcementService.getAllAnnouncements().find(o=>o.id===t);if(n){const o=this.currentAdmin();if(o&&this.announcementService.canEditAnnouncement(n,o)){this.editingAnnouncementId.set(t),this.title.set(n.title),this.content.set(n.content),this.uploadedAttachments.set(n.attachments||[]),this.selectedFiles.set([]);const s=document.querySelector(".card");s&&s.scrollIntoView({behavior:"smooth"})}else alert("You do not have permission to edit this announcement.")}}deleteSpecificAnnouncement(t){const n=this.announcementService.getAllAnnouncements().find(o=>o.id===t);if(n){const o=this.currentAdmin();if(o&&this.announcementService.canDeleteAnnouncement(n,o)){if(confirm(`Are you sure you want to delete "${n.title}"?`)&&this.announcementService.deleteAnnouncement(t)){this.successMessage.set("Announcement deleted successfully!");const c=this.selectedOfficer();c&&this.onSelectOfficer(c),setTimeout(()=>this.successMessage.set(""),3e3)}}else alert("You do not have permission to delete this announcement.")}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.l),e.Y36(C.X),e.Y36(w.K),e.Y36(U.I),e.Y36(u.X),e.Y36(q.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admin-dashboard"]],standalone:!0,features:[e.jDz],decls:109,vars:27,consts:[[1,"container-fluid","min-vh-100","position-relative"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-glass"],[1,"container"],["href","#",1,"navbar-brand","animate-glow"],["src","/UPIDlogo.svg","alt","UP Irrigation Department","height","30",1,"me-2"],[1,"text-cyber"],[1,"navbar-nav","ms-auto"],[1,"navbar-text","text-upid-accent","me-3"],[1,"bi","bi-person-gear","me-1"],[1,"btn","btn-outline-light","btn-sm","shadow-glow",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"container","py-4"],[1,"row","mb-4"],[1,"col-md-3"],[1,"card","bg-glass","border-0","shadow-cyber","text-center","animate-fade-in-up"],[1,"card-body"],[1,"bi","bi-people-fill","display-4","text-upid-accent"],[1,"mt-2","text-cyber"],[1,"text-light","opacity-75","mb-0"],[1,"bi","bi-heart-fill","display-4","text-upid-danger"],[1,"bi","bi-megaphone-fill","display-4","text-upid-success"],[1,"bi","bi-download","display-4","text-upid-warning"],[1,"row"],[1,"col-lg-8"],[1,"card","shadow-sm"],[1,"card-header","bg-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"bi","bi-pencil-square","me-2"],[1,"btn-group"],["class","btn btn-outline-secondary btn-sm","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-danger btn-sm","type","button",3,"disabled","click",4,"ngIf"],["class","alert alert-success alert-dismissible",4,"ngIf"],[3,"ngSubmit"],["announcementForm","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Enter announcement title","required","",1,"form-control",3,"value","input"],[1,"mb-4"],["for","content",1,"form-label"],["id","content","rows","6","placeholder","Enter announcement content...","required","",1,"form-control",3,"value","input"],[1,"form-label"],["type","file","id","fileInput","multiple","","accept",".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.gif,.txt,.zip,.rar",1,"form-control",3,"change"],[1,"form-text"],[1,"bi","bi-info-circle","me-1"],["class","mb-3",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-danger",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[4,"ngIf"],["type","button","class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"col-lg-4"],[1,"card-header","bg-white"],[1,"bi","bi-eye-fill","me-2"],[4,"ngIf","ngIfElse"],["noAnnouncement",""],[1,"card","shadow-sm","mt-3"],[1,"bi","bi-clock-history","me-2"],["class","text-center text-muted py-2",4,"ngIf"],["class","card shadow-sm mt-3",4,"ngIf"],["class","row mt-4",4,"ngIf"],["class","modal fade show d-block","style","background-color: rgba(0,0,0,0.5);",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-x-circle"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"disabled","click"],[1,"bi","bi-trash3"],[1,"alert","alert-success","alert-dismissible"],[1,"bi","bi-check-circle-fill","me-2"],[1,"text-muted"],[1,"list-group","list-group-flush"],["class","list-group-item d-flex justify-content-between align-items-center px-0",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","px-0"],[1,"d-flex","align-items-center"],[1,"bi","me-2","text-primary"],[1,"fw-semibold"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-x"],[1,"bi","me-2","text-success"],[1,"alert","alert-warning"],[1,"bi","bi-exclamation-triangle","me-2"],[1,"spinner-border","spinner-border-sm","me-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-pencil","me-1"],[1,"text-primary"],[1,"small","text-muted","mb-2"],[1,"d-flex","justify-content-between","text-muted","small","mb-2"],[1,"bi","bi-heart-fill","text-danger"],[1,"text-end"],[1,"bi","bi-paperclip","text-info"],[1,"text-center","text-muted","py-3"],[1,"bi","bi-megaphone","display-4","d-block","mb-2"],[1,"text-center","text-muted","py-2"],["class","d-flex align-items-center mb-2",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],[1,"bi","bi-person-circle","text-primary","me-2"],[1,"flex-grow-1"],[1,"d-block"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"bi","bi-heart-fill"],[1,"text-center"],[1,"bi","bi-bar-chart","me-2"],[1,"me-2","text-warning"],[1,"d-block","fw-semibold","text-truncate",3,"title"],[1,"text-warning","fw-bold"],[1,"d-block","text-muted"],[1,"row","mt-4"],[1,"col-12"],[1,"card-header","bg-gradient","bg-info","text-white","d-flex","justify-content-between","align-items-center"],[1,"bi","bi-diagram-3","me-2"],[1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi"],["class","card-body p-0",4,"ngIf"],[1,"card-body","p-0"],[1,"row","g-0"],[1,"col-lg-5","border-end"],[1,"p-3"],[1,"text-primary","mb-3"],[1,"bi","bi-people","me-1"],[3,"currentUser","selectOfficer"],[1,"col-lg-7"],["noOfficerSelected",""],[1,"d-flex","align-items-center","mb-3"],[1,"me-3"],[1,"display-6","text-info","bi-person-badge"],[1,"mb-1"],[1,"text-muted","mb-1","small"],[1,"badge","bg-info"],[1,"text-success","mb-3"],[1,"bi","bi-megaphone","me-1"],["class","announcements-list",4,"ngIf","ngIfElse"],["noAnnouncements",""],[1,"announcements-list"],["class","card mb-3 border-start border-info border-3",4,"ngFor","ngForOf"],[1,"card","mb-3","border-start","border-info","border-3"],[1,"d-flex","justify-content-between","align-items-start","mb-2"],[1,"card-title","mb-1"],[1,"badge"],[1,"card-text","small","text-muted","mb-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"small","text-muted"],[1,"bi","bi-calendar3","me-1"],["class","ms-2",4,"ngIf"],[1,"btn-group","btn-group-sm"],["class","btn btn-outline-primary btn-sm","title","Edit Announcement",3,"click",4,"ngIf"],["class","btn btn-outline-danger btn-sm","title","Delete Announcement",3,"click",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"ms-2"],["title","Edit Announcement",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-pencil"],["title","Delete Announcement",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"mt-2"],[1,"row","g-2"],["class","col-md-6",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"card","card-body","p-2","bg-light"],[1,"me-2"],[1,"flex-grow-1","text-truncate"],[1,"text-warning"],[1,"text-center","py-4"],[1,"bi","bi-inbox","display-1","text-muted"],[1,"text-muted","mt-2"],[1,"text-center","py-5"],[1,"bi","bi-person-plus","display-1","text-muted"],[1,"text-muted","mt-3"],[1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.5)",3,"click"],[1,"modal-dialog","modal-dialog-centered",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","text-danger"],[1,"bi","bi-exclamation-triangle-fill","me-2"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-muted","mb-0"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),e._UZ(4,"img",4),e.TgZ(5,"span",5),e._uU(6,"Admin Dashboard"),e.qZA()(),e.TgZ(7,"div",6)(8,"span",7),e._UZ(9,"i",8),e._uU(10," \u0938\u0942\u091a\u0928\u093e Portal Administration "),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return n.logout()}),e._UZ(12,"i",10),e._uU(13," Logout "),e.qZA()()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15),e._UZ(19,"i",16),e.TgZ(20,"h3",17),e._uU(21),e.qZA(),e.TgZ(22,"p",18),e._uU(23,"Total Viewers"),e.qZA()()()(),e.TgZ(24,"div",13)(25,"div",14)(26,"div",15),e._UZ(27,"i",19),e.TgZ(28,"h3",17),e._uU(29),e.qZA(),e.TgZ(30,"p",18),e._uU(31,"Total Likes"),e.qZA()()()(),e.TgZ(32,"div",13)(33,"div",14)(34,"div",15),e._UZ(35,"i",20),e.TgZ(36,"h3",17),e._uU(37),e.qZA(),e.TgZ(38,"p",18),e._uU(39,"Total Notices"),e.qZA()()()(),e.TgZ(40,"div",13)(41,"div",14)(42,"div",15),e._UZ(43,"i",21),e.TgZ(44,"h3",17),e._uU(45),e.qZA(),e.TgZ(46,"p",18),e._uU(47,"Total Downloads"),e.qZA()()()()(),e.TgZ(48,"div",22)(49,"div",23)(50,"div",24)(51,"div",25)(52,"h5",26),e._UZ(53,"i",27),e._uU(54),e.qZA(),e.TgZ(55,"div",28),e.YNc(56,D,3,0,"button",29),e.YNc(57,O,3,2,"button",30),e.qZA()(),e.TgZ(58,"div",15),e.YNc(59,S,3,1,"div",31),e.TgZ(60,"form",32,33),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(62,"div",34)(63,"label",35),e._uU(64,"Announcement Title"),e.qZA(),e.TgZ(65,"input",36),e.NdJ("input",function(s){return n.updateTitle(s.target.value)}),e.qZA()(),e.TgZ(66,"div",37)(67,"label",38),e._uU(68,"Announcement Content"),e.qZA(),e.TgZ(69,"textarea",39),e.NdJ("input",function(s){return n.updateContent(s.target.value)}),e.qZA()(),e.TgZ(70,"div",37)(71,"label",40),e._uU(72,"File Attachments"),e.qZA(),e.TgZ(73,"div",34)(74,"input",41),e.NdJ("change",function(s){return n.onFileSelected(s)}),e.qZA(),e.TgZ(75,"div",42),e._UZ(76,"i",43),e._uU(77," Supported: PDF, Word, Excel, PowerPoint, Images, Text, Archives (Max 10MB each) "),e.qZA()(),e.YNc(78,k,5,1,"div",44),e.YNc(79,F,5,1,"div",44),e.YNc(80,M,3,1,"div",45),e.qZA(),e.TgZ(81,"div",46)(82,"button",47),e.YNc(83,E,1,0,"span",48),e.YNc(84,J,2,0,"span",49),e.YNc(85,P,2,0,"span",49),e.YNc(86,Y,2,1,"span",49),e.qZA(),e.YNc(87,H,3,0,"button",50),e.qZA()()()()(),e.TgZ(88,"div",51)(89,"div",24)(90,"div",52)(91,"h6",26),e._UZ(92,"i",53),e._uU(93),e.qZA()(),e.TgZ(94,"div",15),e.YNc(95,R,13,5,"div",54),e.YNc(96,j,6,0,"ng-template",null,55,e.W1O),e.qZA()(),e.TgZ(98,"div",56)(99,"div",52)(100,"h6",26),e._UZ(101,"i",57),e._uU(102," Recent Viewers "),e.qZA()(),e.TgZ(103,"div",15),e.YNc(104,L,3,0,"div",58),e.YNc(105,K,3,2,"div",49),e.qZA()(),e.YNc(106,X,8,2,"div",59),e.qZA()(),e.YNc(107,le,11,6,"div",60),e.qZA()(),e.YNc(108,ue,20,3,"div",61)),2&t){const o=e.MAs(97);e.xp6(21),e.Oqu(n.getTotalViewers()),e.xp6(8),e.Oqu(n.getTotalLikes()),e.xp6(8),e.Oqu(n.getTotalAnnouncements()),e.xp6(8),e.Oqu(n.getTotalDownloads()),e.xp6(9),e.hij(" ",n.isEditMode()?"Update":"Create New"," Announcement "),e.xp6(2),e.Q6J("ngIf",n.isEditMode()),e.xp6(1),e.Q6J("ngIf",n.hasAnnouncement()),e.xp6(2),e.Q6J("ngIf",n.successMessage()),e.xp6(6),e.Q6J("value",n.title()),e.xp6(4),e.Q6J("value",n.content()),e.xp6(9),e.Q6J("ngIf",n.selectedFiles().length>0),e.xp6(1),e.Q6J("ngIf",n.uploadedAttachments().length>0),e.xp6(1),e.Q6J("ngIf",n.getTotalFileSize()>52428800),e.xp6(2),e.Q6J("disabled",n.isSubmitting()||n.isUploadingFiles()||!n.title().trim()||!n.content().trim()),e.xp6(1),e.Q6J("ngIf",n.isSubmitting()||n.isUploadingFiles()),e.xp6(1),e.Q6J("ngIf",n.isUploadingFiles()),e.xp6(1),e.Q6J("ngIf",!n.isUploadingFiles()&&n.isSubmitting()),e.xp6(1),e.Q6J("ngIf",!n.isSubmitting()&&!n.isUploadingFiles()),e.xp6(1),e.Q6J("ngIf",n.hasAnnouncement()&&!n.isEditMode()),e.xp6(6),e.hij(" ",n.hasAnnouncement()?"Current Announcement":"No Announcement"," "),e.xp6(2),e.Q6J("ngIf",n.currentAnnouncement())("ngIfElse",o),e.xp6(9),e.Q6J("ngIf",0===n.viewedUsers().length),e.xp6(1),e.Q6J("ngIf",n.viewedUsers().length>0),e.xp6(1),e.Q6J("ngIf",n.getTopDownloadedFiles().length>0),e.xp6(1),e.Q6J("ngIf",n.hasSubordinates()),e.xp6(1),e.Q6J("ngIf",n.showDeleteConfirm())}},dependencies:[d.ez,d.sg,d.O5,l.u5,l._Y,l.JL,l.F,T],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:12px;transition:all .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a!important}.navbar-brand[_ngcontent-%COMP%]{font-weight:600}.form-control[_ngcontent-%COMP%]{border-radius:8px;border:2px solid #e9ecef}.form-control[_ngcontent-%COMP%]:focus{border-color:#dc3545;box-shadow:0 0 0 .25rem #dc354526}.btn-danger[_ngcontent-%COMP%]{border-radius:8px;font-weight:500}.bg-light[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)!important}.alert[_ngcontent-%COMP%]{border-radius:8px;border:none}.border-primary[_ngcontent-%COMP%]{border-color:#0d6efd!important;border-width:2px!important}.border-danger[_ngcontent-%COMP%]{border-color:#dc3545!important;border-width:2px!important}.border-success[_ngcontent-%COMP%]{border-color:#198754!important;border-width:2px!important}.modal.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .15s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.btn-outline-danger[_ngcontent-%COMP%]{transition:all .2s ease}.btn-outline-danger[_ngcontent-%COMP%]:hover{transform:scale(1.05)}"]}),i})()}}]);