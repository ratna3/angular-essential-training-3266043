"use strict";(self.webpackChunkannouncement_portal=self.webpackChunkannouncement_portal||[]).push([[382],{4382:(T,l,s)=>{s.r(l),s.d(l,{AnnouncementComponent:()=>A});var d=s(6814),e=s(4946),_=s(3076),u=s(9615),m=s(4670);function g(i,o){1&i&&(e.TgZ(0,"div",33),e._UZ(1,"i",34),e._uU(2," No viewers yet "),e.qZA())}function v(i,o){1&i&&(e.TgZ(0,"div",45),e._UZ(1,"i",46),e.TgZ(2,"small",18),e._uU(3,"Liked"),e.qZA()())}function p(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"div",37)(1,"div",38),e.NdJ("click",function(){const c=e.CHM(n).$implicit,a=e.oxw(3);return e.KtG(a.showUserDetail(c))}),e.TgZ(2,"div",39)(3,"div",40),e._UZ(4,"i",41),e.qZA(),e.TgZ(5,"div",42)(6,"h6",43),e._uU(7),e.qZA(),e.TgZ(8,"small",18),e._uU(9),e.qZA(),e.YNc(10,v,4,0,"div",44),e.qZA()()()()}if(2&i){const n=o.$implicit,t=e.oxw(3);e.xp6(7),e.Oqu(n.name),e.xp6(2),e.hij(" ",t.formatDate(n.viewedAt)," "),e.xp6(1),e.Q6J("ngIf",n.hasLiked)}}function h(i,o){if(1&i&&(e.TgZ(0,"div",35),e.YNc(1,p,11,3,"div",36),e.qZA()),2&i){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.viewedUsers())}}function f(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"h2",17),e._uU(6),e.qZA(),e.TgZ(7,"small",18),e._uU(8),e.qZA()(),e.TgZ(9,"div",19)(10,"p",20),e._uU(11),e.qZA()(),e.TgZ(12,"div",21)(13,"button",22),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.toggleLike())}),e._UZ(14,"i",23),e._uU(15),e.TgZ(16,"span",24),e._uU(17),e.qZA()(),e.TgZ(18,"small",18),e._UZ(19,"i",25),e._uU(20),e.qZA()()()(),e.TgZ(21,"div",26)(22,"div",27)(23,"h5",28),e._UZ(24,"i",29),e._uU(25," Recent Viewers "),e.qZA()(),e.TgZ(26,"div",30),e.YNc(27,g,3,0,"div",31),e.YNc(28,h,2,1,"div",32),e.qZA()()()()}if(2&i){const n=o.ngIf,t=e.oxw();e.xp6(6),e.Oqu(n.title),e.xp6(2),e.hij(" Updated: ",t.formatDate(n.updatedAt)," "),e.xp6(3),e.Oqu(n.content),e.xp6(2),e.ekj("btn-danger",t.hasLiked())("text-white",t.hasLiked()),e.xp6(2),e.hij(" ",t.hasLiked()?"Liked":"Like"," "),e.xp6(1),e.ekj("bg-white",t.hasLiked())("text-danger",t.hasLiked())("bg-danger",!t.hasLiked()),e.xp6(1),e.hij(" ",n.likes," "),e.xp6(3),e.AsE(" ",t.viewedUsers().length," viewer",1!==t.viewedUsers().length?"s":""," "),e.xp6(7),e.Q6J("ngIf",0===t.viewedUsers().length),e.xp6(1),e.Q6J("ngIf",t.viewedUsers().length>0)}}function b(i,o){1&i&&(e.TgZ(0,"span",64),e._UZ(1,"i",65),e._uU(2," Liked "),e.qZA())}function x(i,o){1&i&&(e.TgZ(0,"span",66),e._uU(1," Not Liked "),e.qZA())}function Z(i,o){if(1&i&&(e.TgZ(0,"div",54)(1,"div",55),e._UZ(2,"i",56),e.TgZ(3,"h4",57),e._uU(4),e.qZA()(),e.TgZ(5,"div",58)(6,"div",59)(7,"strong"),e._uU(8,"Email:"),e.qZA()(),e.TgZ(9,"div",59)(10,"a",60),e._uU(11),e.qZA()()(),e.TgZ(12,"div",61)(13,"div",59)(14,"strong"),e._uU(15,"Viewed At:"),e.qZA()(),e.TgZ(16,"div",59),e._uU(17),e.qZA()(),e.TgZ(18,"div",61)(19,"div",59)(20,"strong"),e._uU(21,"Status:"),e.qZA()(),e.TgZ(22,"div",59),e.YNc(23,b,3,0,"span",62),e.YNc(24,x,2,0,"span",63),e.qZA()()()),2&i){const n=o.ngIf,t=e.oxw(2);e.xp6(4),e.Oqu(n.name),e.xp6(6),e.Q6J("href","mailto:"+n.email,e.LSH),e.xp6(1),e.hij(" ",n.email," "),e.xp6(6),e.hij(" ",t.formatDate(n.viewedAt)," "),e.xp6(6),e.Q6J("ngIf",n.hasLiked),e.xp6(1),e.Q6J("ngIf",!n.hasLiked)}}function U(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"div",47),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.hideUserDetails())}),e.TgZ(1,"div",48),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(2,"div",49)(3,"div",50)(4,"h5",51),e._uU(5,"User Details"),e.qZA(),e.TgZ(6,"button",52),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.hideUserDetails())}),e.qZA()(),e.YNc(7,Z,25,6,"div",53),e.qZA()()()}if(2&i){const n=e.oxw();e.xp6(7),e.Q6J("ngIf",n.selectedUser())}}let A=(()=>{class i{constructor(n,t,r){this.userService=n,this.announcementService=t,this.router=r,this.currentUser=(0,e.tdS)(null),this.announcement=(0,e.tdS)(null),this.selectedUser=(0,e.tdS)(null),this.showUserDetails=(0,e.tdS)(!1),this.hasLiked=(0,e.Flj)(()=>{const c=this.currentUser(),a=this.announcement();return!(!c||!a)&&this.announcementService.hasUserLiked(a.id,c.id)}),this.viewedUsers=this.userService.viewedUsers}ngOnInit(){const n=this.userService.getCurrentUser();n?(this.currentUser.set(n),this.announcement.set(this.announcementService.getLatestAnnouncement()),this.userService.markAsViewed(n.id)):this.router.navigate(["/"])}toggleLike(){const n=this.currentUser(),t=this.announcement();n&&t&&(this.announcementService.toggleLike(t.id,n.id),this.userService.toggleLike(n.id),this.announcement.set(this.announcementService.getLatestAnnouncement()))}showUserDetail(n){this.selectedUser.set(n),this.showUserDetails.set(!0)}hideUserDetails(){this.showUserDetails.set(!1),this.selectedUser.set(null)}logout(){this.userService.logout(),this.router.navigate(["/"])}formatDate(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(_.K),e.Y36(u.X),e.Y36(m.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-announcement"]],standalone:!0,features:[e.jDz],decls:15,vars:3,consts:[[1,"container-fluid","min-vh-100","bg-light"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-primary"],[1,"container"],["href","#",1,"navbar-brand"],[1,"bi","bi-megaphone-fill","me-2"],[1,"navbar-nav","ms-auto"],[1,"navbar-text","text-light","me-3"],[1,"btn","btn-outline-light","btn-sm",3,"click"],[1,"bi","bi-box-arrow-right"],[1,"container","py-4"],["class","row justify-content-center",4,"ngIf"],["class","modal fade show d-block","style","background-color: rgba(0,0,0,0.5);",3,"click",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"card","shadow-sm","mb-4"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"h3","text-primary","mb-0"],[1,"text-muted"],[1,"announcement-content","mb-4"],[1,"lead"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn","btn-outline-danger","btn-lg",3,"click"],[1,"bi","bi-heart-fill","me-2"],[1,"badge","ms-2"],[1,"bi","bi-eye-fill","me-1"],[1,"card","shadow-sm"],[1,"card-header","bg-white"],[1,"mb-0"],[1,"bi","bi-people-fill","me-2"],[1,"card-body"],["class","text-center text-muted py-3",4,"ngIf"],["class","row g-2",4,"ngIf"],[1,"text-center","text-muted","py-3"],[1,"bi","bi-person-x","display-4","d-block","mb-2"],[1,"row","g-2"],["class","col-md-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4"],[1,"user-item","p-3","border","rounded","cursor-pointer","h-100",3,"click"],[1,"d-flex","align-items-center"],[1,"avatar","me-3"],[1,"bi","bi-person-circle","display-6","text-primary"],[1,"flex-grow-1"],[1,"mb-1"],["class","mt-1",4,"ngIf"],[1,"mt-1"],[1,"bi","bi-heart-fill","text-danger","me-1"],[1,"modal","fade","show","d-block",2,"background-color","rgba(0,0,0,0.5)",3,"click"],[1,"modal-dialog","modal-dialog-centered",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,"text-center","mb-3"],[1,"bi","bi-person-circle","display-3","text-primary"],[1,"mt-2"],[1,"row"],[1,"col-sm-6"],[1,"text-decoration-none",3,"href"],[1,"row","mt-2"],["class","badge bg-danger",4,"ngIf"],["class","badge bg-secondary",4,"ngIf"],[1,"badge","bg-danger"],[1,"bi","bi-heart-fill"],[1,"badge","bg-secondary"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),e._UZ(4,"i",4),e._uU(5," Announcement Portal "),e.qZA(),e.TgZ(6,"div",5)(7,"span",6),e._uU(8),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return t.logout()}),e._UZ(10,"i",8),e._uU(11," Logout "),e.qZA()()()(),e.TgZ(12,"div",9),e.YNc(13,f,29,19,"div",10),e.qZA()(),e.YNc(14,U,8,1,"div",11)),2&n){let r;e.xp6(8),e.hij(" Welcome, ",null==(r=t.currentUser())?null:r.name,"! "),e.xp6(5),e.Q6J("ngIf",t.announcement()),e.xp6(1),e.Q6J("ngIf",t.showUserDetails())}},dependencies:[d.ez,d.sg,d.O5],styles:[".announcement-content[_ngcontent-%COMP%]{white-space:pre-line;line-height:1.6}.user-item[_ngcontent-%COMP%]{transition:all .2s ease;cursor:pointer}.user-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#0d6efd!important;transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.avatar[_ngcontent-%COMP%]{flex-shrink:0}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.modal.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .15s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.btn-outline-danger[_ngcontent-%COMP%]:hover{transform:scale(1.05);transition:transform .2s ease}.btn-danger[_ngcontent-%COMP%]{transform:scale(1.05)}.navbar-brand[_ngcontent-%COMP%]{font-weight:600}.card[_ngcontent-%COMP%]{border:none;border-radius:12px}.bg-light[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)!important}"]}),i})()}}]);